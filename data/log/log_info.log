25-10-18.09:20:51.642 [main            ] INFO  Application            - Starting Application using Java 17.0.14 with PID 7220 (D:\java\ideapublic\ywz-ai-agent-station-study\ywz-ai-agent-station-study-app\target\classes started by ywz in D:\java\ideapublic\ywz-ai-agent-station-study)
25-10-18.09:20:51.644 [main            ] INFO  Application            - The following 1 profile is active: "dev"
25-10-18.09:20:54.009 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port 8099 (http)
25-10-18.09:20:54.026 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8099"]
25-10-18.09:20:54.027 [main            ] INFO  StandardService        - Starting service [Tomcat]
25-10-18.09:20:54.027 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/10.1.36]
25-10-18.09:20:54.151 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
25-10-18.09:20:54.152 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2452 ms
25-10-18.09:20:54.769 [main            ] INFO  PgVectorStore          - Using the vector table name: vector_store_openai. Is empty: false
25-10-18.09:20:54.776 [main            ] INFO  PgVectorStore          - Initializing PGVectorStore schema for table: vector_store_openai in schema: public
25-10-18.09:20:54.776 [main            ] INFO  PgVectorStore          - vectorTableValidationsEnabled false
25-10-18.09:20:55.495 [main            ] INFO  TaskJobAutoConfigBean  - xfg-wrench，任务调度器初始化完成。线程池大小: 5, 线程名前缀: test-task-scheduler-
25-10-18.09:20:55.506 [main            ] INFO  TaskJobService         - 开始初始化任务调度配置
25-10-18.09:20:55.542 [main            ] INFO  HikariDataSource       - MainHikariPool - Starting...
25-10-18.09:20:56.430 [main            ] INFO  HikariPool             - MainHikariPool - Added connection com.mysql.cj.jdbc.ConnectionImpl@34327c78
25-10-18.09:20:56.432 [main            ] INFO  HikariDataSource       - MainHikariPool - Start completed.
25-10-18.09:20:56.510 [main            ] INFO  TaskJobService         - 任务调度配置初始化完成，已加载任务数: 0
25-10-18.09:20:56.512 [main            ] INFO  TaskJobAutoConfigBean  - xfg-wrench，任务调度作业初始化完成。刷新间隔: 30000ms, 清理cron: 0 0/5 * * * ?
25-10-18.09:20:56.700 [main            ] INFO  OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
25-10-18.09:20:57.419 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8099"]
25-10-18.09:20:57.430 [main            ] INFO  TomcatWebServer        - Tomcat started on port 8099 (http) with context path '/'
25-10-18.09:20:57.443 [main            ] INFO  Application            - Started Application in 6.573 seconds (process running for 7.869)
25-10-18.09:20:57.445 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.09:20:57.452 [pool-2-thread-1 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_api) [6101]
25-10-18.09:20:57.452 [pool-2-thread-2 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_model) [6101]
25-10-18.09:20:57.453 [pool-2-thread-3 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_prompt) [6101]
25-10-18.09:20:57.453 [pool-2-thread-4 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_advisor) [6101]
25-10-18.09:20:57.453 [pool-2-thread-5 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_tool_mcp) [6101]
25-10-18.09:20:57.453 [pool-2-thread-6 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client) [6101]
25-10-18.09:20:57.509 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.09:20:57.608 [pool-2-thread-5 ] INFO  AgentRepository        - 查询modelId对应的mcpId列表 [5001, 5002]
25-10-18.09:20:57.612 [pool-2-thread-2 ] INFO  AgentRepository        - AiClientModelNode: 获取模型信息成功: 6001
25-10-18.09:20:58.038 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_api_1001
25-10-18.09:20:58.488 [HttpClient-11-Worker-2] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[completions=null, experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-csdn, version=1.0.0] and Instructions null
25-10-18.09:20:58.552 [main            ] INFO  AiClientToolMcpNode    - SSE MCP Initialized: InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[completions=null, experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-csdn, version=1.0.0], instructions=null]
25-10-18.09:20:58.555 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5001
25-10-18.09:20:59.019 [HttpClient-12-Worker-2] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[completions=null, experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-weixin, version=1.0.0] and Instructions null
25-10-18.09:20:59.056 [main            ] INFO  AiClientToolMcpNode    - SSE MCP Initialized: InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[completions=null, experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-weixin, version=1.0.0], instructions=null]
25-10-18.09:20:59.057 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5002
25-10-18.09:20:59.057 [main            ] INFO  AiClientModelNode      - 开始初始化 ai client model
25-10-18.09:20:59.209 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_6001
25-10-18.09:20:59.248 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_advisor_4001
25-10-18.09:20:59.471 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_advisor_4004
25-10-18.09:20:59.490 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_6101
25-10-18.09:20:59.490 [main            ] INFO  AiAgentAutoConfiguration - 【AI-AGENT】启动成功，已加载客户端：null
25-10-18.09:21:27.455 [test-task-scheduler-1] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.09:21:27.594 [test-task-scheduler-1] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.09:21:37.112 [http-nio-8099-exec-2] INFO  [/]                    - Initializing Spring DispatcherServlet 'dispatcherServlet'
25-10-18.09:21:37.112 [http-nio-8099-exec-2] INFO  DispatcherServlet      - Initializing Servlet 'dispatcherServlet'
25-10-18.09:21:37.113 [http-nio-8099-exec-2] INFO  DispatcherServlet      - Completed initialization in 1 ms
25-10-18.09:21:37.187 [http-nio-8099-exec-1] INFO  AiClientAdminController - 查询所有AI客户端配置
25-10-18.09:21:39.457 [http-nio-8099-exec-7] INFO  AiClientAdminController - 查询所有AI客户端配置
25-10-18.09:21:55.183 [http-nio-8099-exec-5] INFO  AiClientToolMcpAdminController - 查询所有MCP客户端配置
25-10-18.09:21:57.445 [test-task-scheduler-3] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.09:21:57.570 [test-task-scheduler-3] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.09:21:57.926 [http-nio-8099-exec-6] INFO  AiClientToolMcpAdminController - 查询所有MCP客户端配置
25-10-18.09:22:06.016 [http-nio-8099-exec-3] INFO  AiClientToolMcpAdminController - 查询所有MCP客户端配置
25-10-18.09:22:16.830 [http-nio-8099-exec-9] INFO  AiClientSystemPromptAdminController - 查询所有系统提示词配置
25-10-18.09:22:18.085 [http-nio-8099-exec-10] INFO  AiClientSystemPromptAdminController - 查询所有系统提示词配置
25-10-18.09:22:27.452 [test-task-scheduler-1] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.09:22:27.648 [test-task-scheduler-1] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.09:22:28.725 [http-nio-8099-exec-1] INFO  AiClientModelAdminController - 查询所有启用的AI客户端模型配置请求
25-10-18.09:22:29.584 [http-nio-8099-exec-7] INFO  AiClientModelAdminController - 查询所有启用的AI客户端模型配置请求
25-10-18.09:22:33.365 [http-nio-8099-exec-4] INFO  AiClientModelAdminController - 查询所有启用的AI客户端模型配置请求
25-10-18.09:22:40.055 [http-nio-8099-exec-3] INFO  AiClientAdvisorAdminController - 查询所有顾问配置
25-10-18.09:22:41.895 [http-nio-8099-exec-8] INFO  AiClientAdvisorAdminController - 查询所有顾问配置
25-10-18.09:22:48.845 [http-nio-8099-exec-10] INFO  AiAgentDrawAdminController - 开始保存画布信息: 流程图配置_2025/10/18 09:22:48
25-10-18.09:22:48.857 [http-nio-8099-exec-10] INFO  AiAgentDrawAdminController - 提取地段:[{"key":"","value":{"content":"test01"}}] ,agentName
25-10-18.09:22:48.860 [http-nio-8099-exec-10] INFO  AiAgentDrawAdminController - 提取地段:[{"key":"","value":{"content":"测试用例"}}] ,description
25-10-18.09:22:48.860 [http-nio-8099-exec-10] INFO  AiAgentDrawAdminController - 提取地段:"agent" ,channel
25-10-18.09:22:48.861 [http-nio-8099-exec-10] INFO  AiAgentDrawAdminController - 提取地段:"flowAgentExecuteStrategy" ,strategy
25-10-18.09:22:48.861 [http-nio-8099-exec-10] INFO  AiAgentDrawAdminController - 解析到agent信息: agentName=test01, description=测试用例, channel=agent, strategy=flowAgentExecuteStrategy
25-10-18.09:22:52.531 [http-nio-8099-exec-10] INFO  AiAgentDrawAdminController - 开始更新Client关联表数据
25-10-18.09:23:26.999 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.09:23:26.999 [MainHikariPool housekeeper] WARN  HikariPool             - MainHikariPool - Thread starvation or clock leap detected (housekeeper delta=1m421ms588µs800ns).
25-10-18.09:24:28.297 [MainHikariPool housekeeper] WARN  HikariPool             - MainHikariPool - Thread starvation or clock leap detected (housekeeper delta=1m1s297ms511µs800ns).
25-10-18.09:24:31.688 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.09:24:31.688 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.09:26:26.885 [MainHikariPool housekeeper] WARN  HikariPool             - MainHikariPool - Thread starvation or clock leap detected (housekeeper delta=1m58s587ms493µs600ns).
25-10-18.09:26:26.885 [test-task-scheduler-5] INFO  TaskJobService         - 开始清理无效的任务
25-10-18.09:26:26.885 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.09:26:26.886 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.09:28:24.454 [MainHikariPool housekeeper] WARN  HikariPool             - MainHikariPool - Thread starvation or clock leap detected (housekeeper delta=1m57s569ms637µs300ns).
25-10-18.09:28:24.455 [test-task-scheduler-5] INFO  TaskJobService         - 发现1个无效任务需要清理
25-10-18.09:28:24.455 [test-task-scheduler-5] INFO  TaskJobService         - 无效任务清理完成，当前活跃任务数: 0
25-10-18.09:28:24.456 [http-nio-8099-exec-10] INFO  DrawConfigParser       - 开始解析边关系，总共6条边
25-10-18.09:28:24.457 [http-nio-8099-exec-10] WARN  DrawConfigParser       - 找不到节点信息，sourceNodeId: start_0, targetNodeId: agent_QyqMj
25-10-18.09:28:24.457 [http-nio-8099-exec-10] WARN  DrawConfigParser       - 节点缺少有效的引用ID，跳过关系: agent() -> client(6101)
25-10-18.09:28:24.458 [http-nio-8099-exec-10] INFO  DrawConfigParser       - 创建配置关系: client(6101) -> tool_mcp(5001), sourcePortId: client_select__8DZjR
25-10-18.09:28:24.459 [http-nio-8099-exec-10] INFO  DrawConfigParser       - 成功创建配置关系[1]: client:6101 -> tool_mcp:5001
25-10-18.09:28:24.459 [http-nio-8099-exec-10] INFO  DrawConfigParser       - 创建配置关系: client(6101) -> prompt(6003), sourcePortId: client_select__8DZjR
25-10-18.09:28:24.459 [http-nio-8099-exec-10] INFO  DrawConfigParser       - 成功创建配置关系[2]: client:6101 -> prompt:6003
25-10-18.09:28:24.459 [http-nio-8099-exec-10] INFO  DrawConfigParser       - 创建配置关系: client(6101) -> model(2000), sourcePortId: client_select__8DZjR
25-10-18.09:28:24.459 [http-nio-8099-exec-10] INFO  DrawConfigParser       - 成功创建配置关系[3]: client:6101 -> model:2000
25-10-18.09:28:24.459 [http-nio-8099-exec-10] INFO  DrawConfigParser       - 创建配置关系: model(2000) -> advisor(4001), sourcePortId: model_select_729ASo
25-10-18.09:28:24.459 [http-nio-8099-exec-10] INFO  DrawConfigParser       - 成功创建配置关系[4]: model:2000 -> advisor:4001
25-10-18.09:28:24.459 [http-nio-8099-exec-10] INFO  DrawConfigParser       - 边关系解析完成，处理0条边，跳过2条，生成4条有效配置关系
25-10-18.09:28:24.459 [http-nio-8099-exec-10] INFO  DrawConfigParser       - 节点类型统计结果
25-10-18.09:28:24.459 [http-nio-8099-exec-10] INFO  DrawConfigParser       - 节点类型: advisor, 数量: 1 1有引用id
25-10-18.09:28:24.459 [http-nio-8099-exec-10] ERROR AiAgentDrawAdminController - 解析和保存配置关系数据失败，configId: 4645e2adf05f4356a44cfea0f1cc472f
java.lang.NullPointerException: Cannot invoke "java.lang.Integer.intValue()" because the return value of "java.util.HashMap.get(Object)" is null
	at com.ywzai.trigger.http.admin.util.DrawConfigParser.validateAndLogResults(DrawConfigParser.java:88)
	at com.ywzai.trigger.http.admin.util.DrawConfigParser.parseConfigData(DrawConfigParser.java:50)
	at com.ywzai.trigger.http.admin.AiAgentDrawAdminController.saveDrawConfig(AiAgentDrawAdminController.java:141)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727)
	at com.ywzai.trigger.http.admin.AiAgentDrawAdminController$$SpringCGLIB$$0.saveDrawConfig(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:257)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1088)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:842)
25-10-18.09:28:24.461 [http-nio-8099-exec-10] INFO  AiAgentDrawAdminController - 开始更新agent_flow_config表数据
25-10-18.09:28:24.462 [http-nio-8099-exec-10] ERROR AiAgentDrawAdminController - 解析配置数据失败: Cannot invoke "com.fasterxml.jackson.databind.JsonNode.get(String)" because "inputsValues" is null
25-10-18.09:28:24.501 [SpringApplicationShutdownHook] INFO  GracefulShutdown       - Commencing graceful shutdown. Waiting for active requests to complete
25-10-18.09:28:24.506 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.09:28:24.506 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.09:28:24.607 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.09:28:24.607 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.09:28:24.709 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.09:28:24.709 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.09:28:24.749 [tomcat-shutdown ] INFO  GracefulShutdown       - Graceful shutdown complete
25-10-18.09:28:24.753 [SpringApplicationShutdownHook] INFO  TaskJobService         - 开始停止所有任务
25-10-18.09:28:24.753 [SpringApplicationShutdownHook] INFO  TaskJobService         - 所有任务已停止
25-10-18.09:28:24.768 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.09:28:24.770 [SpringApplicationShutdownHook] INFO  HikariDataSource       - MainHikariPool - Shutdown initiated...
25-10-18.09:28:50.279 [main            ] INFO  Application            - Starting Application using Java 17.0.14 with PID 25984 (D:\java\ideapublic\ywz-ai-agent-station-study\ywz-ai-agent-station-study-app\target\classes started by ywz in D:\java\ideapublic\ywz-ai-agent-station-study)
25-10-18.09:28:50.280 [main            ] INFO  Application            - The following 1 profile is active: "dev"
25-10-18.09:28:51.848 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port 8099 (http)
25-10-18.09:28:51.862 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8099"]
25-10-18.09:28:51.865 [main            ] INFO  StandardService        - Starting service [Tomcat]
25-10-18.09:28:51.865 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/10.1.36]
25-10-18.09:28:51.958 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
25-10-18.09:28:51.958 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1642 ms
25-10-18.09:28:52.378 [main            ] INFO  PgVectorStore          - Using the vector table name: vector_store_openai. Is empty: false
25-10-18.09:28:52.383 [main            ] INFO  PgVectorStore          - Initializing PGVectorStore schema for table: vector_store_openai in schema: public
25-10-18.09:28:52.383 [main            ] INFO  PgVectorStore          - vectorTableValidationsEnabled false
25-10-18.09:28:52.839 [main            ] INFO  TaskJobAutoConfigBean  - xfg-wrench，任务调度器初始化完成。线程池大小: 5, 线程名前缀: test-task-scheduler-
25-10-18.09:28:52.843 [main            ] INFO  TaskJobService         - 开始初始化任务调度配置
25-10-18.09:28:52.859 [main            ] INFO  HikariDataSource       - MainHikariPool - Starting...
25-10-18.09:28:57.171 [main            ] INFO  HikariPool             - MainHikariPool - Added connection com.mysql.cj.jdbc.ConnectionImpl@200733f1
25-10-18.09:28:57.173 [main            ] INFO  HikariDataSource       - MainHikariPool - Start completed.
25-10-18.09:28:57.287 [main            ] INFO  TaskJobService         - 任务调度配置初始化完成，已加载任务数: 0
25-10-18.09:28:57.287 [main            ] INFO  TaskJobAutoConfigBean  - xfg-wrench，任务调度作业初始化完成。刷新间隔: 30000ms, 清理cron: 0 0/5 * * * ?
25-10-18.09:28:57.373 [main            ] INFO  OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
25-10-18.09:28:57.837 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8099"]
25-10-18.09:28:57.845 [main            ] INFO  TomcatWebServer        - Tomcat started on port 8099 (http) with context path '/'
25-10-18.09:28:57.854 [main            ] INFO  Application            - Started Application in 8.091 seconds (process running for 8.939)
25-10-18.09:28:57.855 [test-task-scheduler-1] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.09:28:57.859 [pool-2-thread-1 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_api) [6101]
25-10-18.09:28:57.859 [pool-2-thread-2 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_model) [6101]
25-10-18.09:28:57.859 [pool-2-thread-3 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_prompt) [6101]
25-10-18.09:28:57.859 [pool-2-thread-4 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_advisor) [6101]
25-10-18.09:28:57.860 [pool-2-thread-5 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_tool_mcp) [6101]
25-10-18.09:28:57.860 [pool-2-thread-6 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client) [6101]
25-10-18.09:28:58.092 [test-task-scheduler-1] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.09:28:58.504 [pool-2-thread-5 ] INFO  AgentRepository        - 查询modelId对应的mcpId列表 [5001, 5002]
25-10-18.09:28:58.604 [pool-2-thread-2 ] INFO  AgentRepository        - AiClientModelNode: 获取模型信息成功: 6001
25-10-18.09:28:58.923 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_api_1001
25-10-18.09:28:59.348 [HttpClient-11-Worker-0] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[completions=null, experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-csdn, version=1.0.0] and Instructions null
25-10-18.09:28:59.398 [main            ] INFO  AiClientToolMcpNode    - SSE MCP Initialized: InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[completions=null, experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-csdn, version=1.0.0], instructions=null]
25-10-18.09:28:59.400 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5001
25-10-18.09:28:59.535 [HttpClient-12-Worker-2] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[completions=null, experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-weixin, version=1.0.0] and Instructions null
25-10-18.09:28:59.567 [main            ] INFO  AiClientToolMcpNode    - SSE MCP Initialized: InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[completions=null, experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-weixin, version=1.0.0], instructions=null]
25-10-18.09:28:59.567 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5002
25-10-18.09:28:59.568 [main            ] INFO  AiClientModelNode      - 开始初始化 ai client model
25-10-18.09:28:59.709 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_6001
25-10-18.09:28:59.732 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_advisor_4001
25-10-18.09:28:59.847 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_advisor_4004
25-10-18.09:28:59.856 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_6101
25-10-18.09:28:59.856 [main            ] INFO  AiAgentAutoConfiguration - 【AI-AGENT】启动成功，已加载客户端：null
25-10-18.09:29:04.407 [http-nio-8099-exec-1] INFO  [/]                    - Initializing Spring DispatcherServlet 'dispatcherServlet'
25-10-18.09:29:04.407 [http-nio-8099-exec-1] INFO  DispatcherServlet      - Initializing Servlet 'dispatcherServlet'
25-10-18.09:29:04.408 [http-nio-8099-exec-1] INFO  DispatcherServlet      - Completed initialization in 1 ms
25-10-18.09:29:04.529 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 开始保存画布信息: 流程图配置_2025/10/18 09:29:04
25-10-18.09:29:04.536 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 提取地段:[{"key":"","value":{"content":"test01"}}] ,agentName
25-10-18.09:29:04.542 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 提取地段:[{"key":"","value":{"content":"测试用例"}}] ,description
25-10-18.09:29:04.542 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 提取地段:"agent" ,channel
25-10-18.09:29:04.542 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 提取地段:"flowAgentExecuteStrategy" ,strategy
25-10-18.09:29:04.542 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 解析到agent信息: agentName=test01, description=测试用例, channel=agent, strategy=flowAgentExecuteStrategy
25-10-18.09:29:04.749 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 开始更新Client关联表数据
25-10-18.09:29:13.651 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 开始解析边关系，总共6条边
25-10-18.09:29:13.651 [http-nio-8099-exec-1] WARN  DrawConfigParser       - 找不到节点信息，sourceNodeId: start_0, targetNodeId: agent_QyqMj
25-10-18.09:29:13.651 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 创建配置关系: agent(test01) -> client(6101), sourcePortId: agent_output
25-10-18.09:29:13.651 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 成功创建配置关系[1]: agent:test01 -> client:6101
25-10-18.09:29:13.651 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 创建配置关系: client(6101) -> tool_mcp(5001), sourcePortId: client_select__8DZjR
25-10-18.09:29:13.651 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 成功创建配置关系[2]: client:6101 -> tool_mcp:5001
25-10-18.09:29:13.652 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 创建配置关系: client(6101) -> prompt(6003), sourcePortId: client_select__8DZjR
25-10-18.09:29:13.652 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 成功创建配置关系[3]: client:6101 -> prompt:6003
25-10-18.09:29:13.652 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 创建配置关系: client(6101) -> model(2000), sourcePortId: client_select__8DZjR
25-10-18.09:29:13.652 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 成功创建配置关系[4]: client:6101 -> model:2000
25-10-18.09:29:13.652 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 创建配置关系: model(2000) -> advisor(4001), sourcePortId: model_select_729ASo
25-10-18.09:29:13.652 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 成功创建配置关系[5]: model:2000 -> advisor:4001
25-10-18.09:29:13.652 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 边关系解析完成，处理0条边，跳过1条，生成5条有效配置关系
25-10-18.09:29:13.652 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 节点类型统计结果
25-10-18.09:29:13.652 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 节点类型: advisor, 数量: 1 1有引用id
25-10-18.09:29:13.652 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 节点类型: agent, 数量: 1 1有引用id
25-10-18.09:29:13.652 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 节点类型: tool_mcp, 数量: 1 1有引用id
25-10-18.09:29:13.652 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 节点类型: client, 数量: 1 1有引用id
25-10-18.09:29:13.652 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 节点类型: model, 数量: 1 1有引用id
25-10-18.09:29:13.652 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 节点类型: prompt, 数量: 1 1有引用id
25-10-18.09:29:13.652 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 节点配置关系统计结果
25-10-18.09:29:13.652 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 关系类型: agent -> client, 数量: 1
25-10-18.09:29:13.652 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 关系类型: client -> model, 数量: 1
25-10-18.09:29:13.652 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 关系类型: client -> tool_mcp, 数量: 1
25-10-18.09:29:13.652 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 关系类型: model -> advisor, 数量: 1
25-10-18.09:29:13.652 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 关系类型: client -> prompt, 数量: 1
25-10-18.09:29:13.652 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 总计: 6个节点，6条边，5条有效配置关系
25-10-18.09:29:13.652 [http-nio-8099-exec-1] INFO  DrawConfigParser       - === 统计结束 ===
25-10-18.09:29:13.652 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 解析配置数据完成，生成5条关系
25-10-18.09:29:14.987 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 开始更新agent_flow_config表数据
25-10-18.09:29:14.988 [http-nio-8099-exec-1] ERROR AiAgentDrawAdminController - 解析配置数据失败: Cannot invoke "com.fasterxml.jackson.databind.JsonNode.get(String)" because "inputsValues" is null
25-10-18.09:29:27.855 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.09:29:28.094 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.09:29:57.858 [test-task-scheduler-3] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.09:29:57.927 [test-task-scheduler-3] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.09:30:00.013 [test-task-scheduler-1] INFO  TaskJobService         - 开始清理无效的任务
25-10-18.09:30:00.080 [test-task-scheduler-1] INFO  TaskJobService         - 发现1个无效任务需要清理
25-10-18.09:30:00.080 [test-task-scheduler-1] INFO  TaskJobService         - 无效任务清理完成，当前活跃任务数: 0
25-10-18.09:30:27.869 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.09:30:28.100 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.09:30:57.854 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.09:31:00.766 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.09:31:27.861 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.09:31:28.106 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.09:31:57.867 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.09:31:58.108 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.09:32:27.868 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.09:32:28.110 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.09:32:57.857 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.09:32:58.010 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.09:33:27.855 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.09:33:28.013 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.09:33:57.860 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.09:33:58.016 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.09:34:27.866 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.09:34:27.939 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.09:34:57.854 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.09:34:58.135 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.09:35:00.010 [test-task-scheduler-5] INFO  TaskJobService         - 开始清理无效的任务
25-10-18.09:35:00.122 [test-task-scheduler-5] INFO  TaskJobService         - 发现1个无效任务需要清理
25-10-18.09:35:00.122 [test-task-scheduler-5] INFO  TaskJobService         - 无效任务清理完成，当前活跃任务数: 0
25-10-18.09:35:27.861 [test-task-scheduler-4] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.09:35:27.997 [test-task-scheduler-4] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.09:35:57.866 [test-task-scheduler-4] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.09:35:58.034 [test-task-scheduler-4] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.09:36:02.814 [SpringApplicationShutdownHook] INFO  GracefulShutdown       - Commencing graceful shutdown. Waiting for active requests to complete
25-10-18.09:36:03.053 [tomcat-shutdown ] INFO  GracefulShutdown       - Graceful shutdown complete
25-10-18.09:36:03.057 [SpringApplicationShutdownHook] INFO  TaskJobService         - 开始停止所有任务
25-10-18.09:36:03.057 [SpringApplicationShutdownHook] INFO  TaskJobService         - 所有任务已停止
25-10-18.09:36:03.059 [SpringApplicationShutdownHook] INFO  HikariDataSource       - MainHikariPool - Shutdown initiated...
25-10-18.09:37:32.671 [main            ] INFO  Application            - Starting Application using Java 17.0.14 with PID 11316 (D:\java\ideapublic\ywz-ai-agent-station-study\ywz-ai-agent-station-study-app\target\classes started by ywz in D:\java\ideapublic\ywz-ai-agent-station-study)
25-10-18.09:37:32.672 [main            ] INFO  Application            - The following 1 profile is active: "dev"
25-10-18.09:37:34.261 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port 8099 (http)
25-10-18.09:37:34.274 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8099"]
25-10-18.09:37:34.277 [main            ] INFO  StandardService        - Starting service [Tomcat]
25-10-18.09:37:34.278 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/10.1.36]
25-10-18.09:37:34.372 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
25-10-18.09:37:34.372 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1667 ms
25-10-18.09:37:34.801 [main            ] INFO  PgVectorStore          - Using the vector table name: vector_store_openai. Is empty: false
25-10-18.09:37:34.806 [main            ] INFO  PgVectorStore          - Initializing PGVectorStore schema for table: vector_store_openai in schema: public
25-10-18.09:37:34.807 [main            ] INFO  PgVectorStore          - vectorTableValidationsEnabled false
25-10-18.09:37:35.272 [main            ] INFO  TaskJobAutoConfigBean  - xfg-wrench，任务调度器初始化完成。线程池大小: 5, 线程名前缀: test-task-scheduler-
25-10-18.09:37:35.276 [main            ] INFO  TaskJobService         - 开始初始化任务调度配置
25-10-18.09:37:35.291 [main            ] INFO  HikariDataSource       - MainHikariPool - Starting...
25-10-18.09:37:36.841 [main            ] INFO  HikariPool             - MainHikariPool - Added connection com.mysql.cj.jdbc.ConnectionImpl@b9803a3
25-10-18.09:37:36.844 [main            ] INFO  HikariDataSource       - MainHikariPool - Start completed.
25-10-18.09:37:36.959 [main            ] INFO  TaskJobService         - 任务调度配置初始化完成，已加载任务数: 0
25-10-18.09:37:36.960 [main            ] INFO  TaskJobAutoConfigBean  - xfg-wrench，任务调度作业初始化完成。刷新间隔: 30000ms, 清理cron: 0 0/5 * * * ?
25-10-18.09:37:37.048 [main            ] INFO  OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
25-10-18.09:37:37.469 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8099"]
25-10-18.09:37:37.477 [main            ] INFO  TomcatWebServer        - Tomcat started on port 8099 (http) with context path '/'
25-10-18.09:37:37.486 [main            ] INFO  Application            - Started Application in 5.326 seconds (process running for 6.128)
25-10-18.09:37:37.487 [test-task-scheduler-1] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.09:37:37.496 [pool-2-thread-1 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_api) [6101]
25-10-18.09:37:37.498 [pool-2-thread-2 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_model) [6101]
25-10-18.09:37:37.498 [pool-2-thread-3 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_prompt) [6101]
25-10-18.09:37:37.498 [pool-2-thread-4 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_advisor) [6101]
25-10-18.09:37:37.498 [pool-2-thread-5 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_tool_mcp) [6101]
25-10-18.09:37:37.499 [pool-2-thread-6 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client) [6101]
25-10-18.09:37:37.644 [test-task-scheduler-1] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.09:37:37.865 [pool-2-thread-5 ] INFO  AgentRepository        - 查询modelId对应的mcpId列表 [5001, 5002]
25-10-18.09:37:37.998 [pool-2-thread-2 ] INFO  AgentRepository        - AiClientModelNode: 获取模型信息成功: 6001
25-10-18.09:37:38.184 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_api_1001
25-10-18.09:37:38.713 [HttpClient-11-Worker-1] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[completions=null, experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-csdn, version=1.0.0] and Instructions null
25-10-18.09:37:38.789 [main            ] INFO  AiClientToolMcpNode    - SSE MCP Initialized: InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[completions=null, experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-csdn, version=1.0.0], instructions=null]
25-10-18.09:37:38.791 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5001
25-10-18.09:37:38.995 [HttpClient-12-Worker-1] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[completions=null, experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-weixin, version=1.0.0] and Instructions null
25-10-18.09:37:39.044 [main            ] INFO  AiClientToolMcpNode    - SSE MCP Initialized: InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[completions=null, experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-weixin, version=1.0.0], instructions=null]
25-10-18.09:37:39.044 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5002
25-10-18.09:37:39.044 [main            ] INFO  AiClientModelNode      - 开始初始化 ai client model
25-10-18.09:37:39.154 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_6001
25-10-18.09:37:39.170 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_advisor_4001
25-10-18.09:37:39.248 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_advisor_4004
25-10-18.09:37:39.256 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_6101
25-10-18.09:37:39.256 [main            ] INFO  AiAgentAutoConfiguration - 【AI-AGENT】启动成功，已加载客户端：null
25-10-18.09:37:48.534 [http-nio-8099-exec-1] INFO  [/]                    - Initializing Spring DispatcherServlet 'dispatcherServlet'
25-10-18.09:37:48.534 [http-nio-8099-exec-1] INFO  DispatcherServlet      - Initializing Servlet 'dispatcherServlet'
25-10-18.09:37:48.535 [http-nio-8099-exec-1] INFO  DispatcherServlet      - Completed initialization in 1 ms
25-10-18.09:37:48.823 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 开始保存画布信息: 流程图配置_2025/10/18 09:37:48
25-10-18.09:37:48.830 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 提取地段:[{"key":"","value":{"content":"test01"}}] ,agentName
25-10-18.09:37:48.833 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 提取地段:[{"key":"","value":{"content":"测试用例"}}] ,description
25-10-18.09:37:48.834 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 提取地段:"agent" ,channel
25-10-18.09:37:48.834 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 提取地段:"flowAgentExecuteStrategy" ,strategy
25-10-18.09:37:48.834 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 解析到agent信息: agentName=test01, description=测试用例, channel=agent, strategy=flowAgentExecuteStrategy
25-10-18.09:37:49.336 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 开始更新Client关联表数据
25-10-18.09:37:55.152 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 开始解析边关系，总共6条边
25-10-18.09:37:55.153 [http-nio-8099-exec-1] WARN  DrawConfigParser       - 找不到节点信息，sourceNodeId: start_0, targetNodeId: agent_QyqMj
25-10-18.09:37:55.153 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 创建配置关系: client(6101) -> tool_mcp(5001), sourcePortId: client_select__8DZjR
25-10-18.09:37:55.153 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 成功创建配置关系[1]: client:6101 -> tool_mcp:5001
25-10-18.09:37:55.153 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 创建配置关系: client(6101) -> prompt(6003), sourcePortId: client_select__8DZjR
25-10-18.09:37:55.153 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 成功创建配置关系[2]: client:6101 -> prompt:6003
25-10-18.09:37:55.153 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 创建配置关系: client(6101) -> model(2000), sourcePortId: client_select__8DZjR
25-10-18.09:37:55.153 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 成功创建配置关系[3]: client:6101 -> model:2000
25-10-18.09:37:55.153 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 创建配置关系: model(2000) -> advisor(4001), sourcePortId: model_select_729ASo
25-10-18.09:37:55.153 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 成功创建配置关系[4]: model:2000 -> advisor:4001
25-10-18.09:37:55.153 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 边关系解析完成，处理0条边，跳过2条，生成4条有效配置关系
25-10-18.09:37:55.153 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 节点类型统计结果
25-10-18.09:37:55.153 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 节点类型: advisor, 数量: 1 1有引用id
25-10-18.09:37:55.153 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 节点类型: agent, 数量: 1 1有引用id
25-10-18.09:37:55.153 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 节点类型: tool_mcp, 数量: 1 1有引用id
25-10-18.09:37:55.153 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 节点类型: client, 数量: 1 1有引用id
25-10-18.09:37:55.153 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 节点类型: model, 数量: 1 1有引用id
25-10-18.09:37:55.154 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 节点类型: prompt, 数量: 1 1有引用id
25-10-18.09:37:55.154 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 节点配置关系统计结果
25-10-18.09:37:55.154 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 关系类型: client -> model, 数量: 1
25-10-18.09:37:55.154 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 关系类型: client -> tool_mcp, 数量: 1
25-10-18.09:37:55.154 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 关系类型: model -> advisor, 数量: 1
25-10-18.09:37:55.154 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 关系类型: client -> prompt, 数量: 1
25-10-18.09:37:55.154 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 总计: 6个节点，6条边，4条有效配置关系
25-10-18.09:37:55.154 [http-nio-8099-exec-1] INFO  DrawConfigParser       - === 统计结束 ===
25-10-18.09:37:55.154 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 解析配置数据完成，生成4条关系
25-10-18.09:37:56.398 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 开始更新agent_flow_config表数据
25-10-18.09:39:56.805 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.09:39:56.805 [MainHikariPool housekeeper] WARN  HikariPool             - MainHikariPool - Thread starvation or clock leap detected (housekeeper delta=2m19s848ms970µs800ns).
25-10-18.09:39:56.808 [http-nio-8099-exec-1] ERROR AiAgentDrawAdminController - 解析配置数据失败: Cannot invoke "com.fasterxml.jackson.databind.JsonNode.get(String)" because "inputsValues" is null
25-10-18.09:39:56.834 [SpringApplicationShutdownHook] INFO  GracefulShutdown       - Commencing graceful shutdown. Waiting for active requests to complete
25-10-18.09:39:56.864 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.09:39:56.864 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.09:39:56.893 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.09:39:56.894 [test-task-scheduler-3] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.09:39:56.927 [test-task-scheduler-3] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.09:39:56.928 [test-task-scheduler-3] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.09:39:56.962 [test-task-scheduler-3] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.09:39:57.082 [tomcat-shutdown ] INFO  GracefulShutdown       - Graceful shutdown complete
25-10-18.09:39:57.086 [SpringApplicationShutdownHook] INFO  TaskJobService         - 开始停止所有任务
25-10-18.09:39:57.086 [SpringApplicationShutdownHook] INFO  TaskJobService         - 所有任务已停止
25-10-18.09:39:57.087 [SpringApplicationShutdownHook] INFO  HikariDataSource       - MainHikariPool - Shutdown initiated...
25-10-18.09:40:58.483 [main            ] INFO  Application            - Starting Application using Java 17.0.14 with PID 27288 (D:\java\ideapublic\ywz-ai-agent-station-study\ywz-ai-agent-station-study-app\target\classes started by ywz in D:\java\ideapublic\ywz-ai-agent-station-study)
25-10-18.09:40:58.484 [main            ] INFO  Application            - The following 1 profile is active: "dev"
25-10-18.09:40:59.956 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port 8099 (http)
25-10-18.09:40:59.969 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8099"]
25-10-18.09:40:59.971 [main            ] INFO  StandardService        - Starting service [Tomcat]
25-10-18.09:40:59.972 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/10.1.36]
25-10-18.09:41:00.065 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
25-10-18.09:41:00.065 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1546 ms
25-10-18.09:41:00.443 [main            ] INFO  PgVectorStore          - Using the vector table name: vector_store_openai. Is empty: false
25-10-18.09:41:00.449 [main            ] INFO  PgVectorStore          - Initializing PGVectorStore schema for table: vector_store_openai in schema: public
25-10-18.09:41:00.449 [main            ] INFO  PgVectorStore          - vectorTableValidationsEnabled false
25-10-18.09:41:00.901 [main            ] INFO  TaskJobAutoConfigBean  - xfg-wrench，任务调度器初始化完成。线程池大小: 5, 线程名前缀: test-task-scheduler-
25-10-18.09:41:00.905 [main            ] INFO  TaskJobService         - 开始初始化任务调度配置
25-10-18.09:41:00.918 [main            ] INFO  HikariDataSource       - MainHikariPool - Starting...
25-10-18.09:41:02.048 [main            ] INFO  HikariPool             - MainHikariPool - Added connection com.mysql.cj.jdbc.ConnectionImpl@521259d5
25-10-18.09:41:02.050 [main            ] INFO  HikariDataSource       - MainHikariPool - Start completed.
25-10-18.09:41:02.168 [main            ] INFO  TaskJobService         - 任务调度配置初始化完成，已加载任务数: 0
25-10-18.09:41:02.170 [main            ] INFO  TaskJobAutoConfigBean  - xfg-wrench，任务调度作业初始化完成。刷新间隔: 30000ms, 清理cron: 0 0/5 * * * ?
25-10-18.09:41:02.245 [main            ] INFO  OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
25-10-18.09:41:02.675 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8099"]
25-10-18.09:41:02.682 [main            ] INFO  TomcatWebServer        - Tomcat started on port 8099 (http) with context path '/'
25-10-18.09:41:02.691 [main            ] INFO  Application            - Started Application in 4.696 seconds (process running for 5.471)
25-10-18.09:41:02.692 [test-task-scheduler-1] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.09:41:02.696 [pool-2-thread-1 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_api) [6101]
25-10-18.09:41:02.696 [pool-2-thread-2 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_model) [6101]
25-10-18.09:41:02.697 [pool-2-thread-4 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_advisor) [6101]
25-10-18.09:41:02.697 [pool-2-thread-3 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_prompt) [6101]
25-10-18.09:41:02.697 [pool-2-thread-5 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_tool_mcp) [6101]
25-10-18.09:41:02.698 [pool-2-thread-6 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client) [6101]
25-10-18.09:41:02.868 [test-task-scheduler-1] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.09:41:03.173 [pool-2-thread-5 ] INFO  AgentRepository        - 查询modelId对应的mcpId列表 [5001, 5002]
25-10-18.09:41:03.481 [pool-2-thread-2 ] INFO  AgentRepository        - AiClientModelNode: 获取模型信息成功: 6001
25-10-18.09:41:03.696 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_api_1001
25-10-18.09:41:04.198 [HttpClient-11-Worker-1] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[completions=null, experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-csdn, version=1.0.0] and Instructions null
25-10-18.09:41:04.302 [main            ] INFO  AiClientToolMcpNode    - SSE MCP Initialized: InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[completions=null, experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-csdn, version=1.0.0], instructions=null]
25-10-18.09:41:04.304 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5001
25-10-18.09:41:04.471 [HttpClient-12-Worker-2] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[completions=null, experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-weixin, version=1.0.0] and Instructions null
25-10-18.09:41:04.506 [main            ] INFO  AiClientToolMcpNode    - SSE MCP Initialized: InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[completions=null, experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-weixin, version=1.0.0], instructions=null]
25-10-18.09:41:04.506 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5002
25-10-18.09:41:04.506 [main            ] INFO  AiClientModelNode      - 开始初始化 ai client model
25-10-18.09:41:04.605 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_6001
25-10-18.09:41:04.620 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_advisor_4001
25-10-18.09:41:04.701 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_advisor_4004
25-10-18.09:41:04.711 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_6101
25-10-18.09:41:04.711 [main            ] INFO  AiAgentAutoConfiguration - 【AI-AGENT】启动成功，已加载客户端：null
25-10-18.09:41:10.369 [http-nio-8099-exec-1] INFO  [/]                    - Initializing Spring DispatcherServlet 'dispatcherServlet'
25-10-18.09:41:10.369 [http-nio-8099-exec-1] INFO  DispatcherServlet      - Initializing Servlet 'dispatcherServlet'
25-10-18.09:41:10.370 [http-nio-8099-exec-1] INFO  DispatcherServlet      - Completed initialization in 1 ms
25-10-18.09:41:10.544 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 开始保存画布信息: 流程图配置_2025/10/18 09:41:10
25-10-18.09:41:10.550 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 提取地段:[{"key":"","value":{"content":"test01"}}] ,agentName
25-10-18.09:41:10.553 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 提取地段:[{"key":"","value":{"content":"测试用例"}}] ,description
25-10-18.09:41:10.554 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 提取地段:"agent" ,channel
25-10-18.09:41:10.554 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 提取地段:"flowAgentExecuteStrategy" ,strategy
25-10-18.09:41:10.554 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 解析到agent信息: agentName=test01, description=测试用例, channel=agent, strategy=flowAgentExecuteStrategy
25-10-18.09:41:11.059 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 开始更新Client关联表数据
25-10-18.09:41:13.382 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 开始解析边关系，总共6条边
25-10-18.09:41:13.383 [http-nio-8099-exec-1] WARN  DrawConfigParser       - 找不到节点信息，sourceNodeId: start_0, targetNodeId: agent_QyqMj
25-10-18.09:41:13.383 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 创建配置关系: client(6101) -> tool_mcp(5001), sourcePortId: client_select__8DZjR
25-10-18.09:41:13.383 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 成功创建配置关系[1]: client:6101 -> tool_mcp:5001
25-10-18.09:41:13.383 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 创建配置关系: client(6101) -> prompt(6003), sourcePortId: client_select__8DZjR
25-10-18.09:41:13.383 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 成功创建配置关系[2]: client:6101 -> prompt:6003
25-10-18.09:41:13.383 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 创建配置关系: client(6101) -> model(2000), sourcePortId: client_select__8DZjR
25-10-18.09:41:13.383 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 成功创建配置关系[3]: client:6101 -> model:2000
25-10-18.09:41:13.383 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 创建配置关系: model(2000) -> advisor(4001), sourcePortId: model_select_729ASo
25-10-18.09:41:13.383 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 成功创建配置关系[4]: model:2000 -> advisor:4001
25-10-18.09:41:13.383 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 边关系解析完成，处理0条边，跳过2条，生成4条有效配置关系
25-10-18.09:41:13.383 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 节点类型统计结果
25-10-18.09:41:13.383 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 节点类型: advisor, 数量: 1 1有引用id
25-10-18.09:41:13.383 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 节点类型: agent, 数量: 1 1有引用id
25-10-18.09:41:13.383 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 节点类型: tool_mcp, 数量: 1 1有引用id
25-10-18.09:41:13.383 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 节点类型: client, 数量: 1 1有引用id
25-10-18.09:41:13.384 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 节点类型: model, 数量: 1 1有引用id
25-10-18.09:41:13.384 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 节点类型: prompt, 数量: 1 1有引用id
25-10-18.09:41:13.384 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 节点配置关系统计结果
25-10-18.09:41:13.384 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 关系类型: client -> model, 数量: 1
25-10-18.09:41:13.384 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 关系类型: client -> tool_mcp, 数量: 1
25-10-18.09:41:13.384 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 关系类型: model -> advisor, 数量: 1
25-10-18.09:41:13.384 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 关系类型: client -> prompt, 数量: 1
25-10-18.09:41:13.384 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 总计: 6个节点，6条边，4条有效配置关系
25-10-18.09:41:13.384 [http-nio-8099-exec-1] INFO  DrawConfigParser       - === 统计结束 ===
25-10-18.09:41:13.384 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 解析配置数据完成，生成4条关系
25-10-18.09:41:14.540 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 开始更新agent_flow_config表数据
25-10-18.09:41:14.542 [http-nio-8099-exec-1] ERROR AiAgentDrawAdminController - 解析配置数据失败: Cannot invoke "com.fasterxml.jackson.databind.JsonNode.iterator()" because "dataNode" is null
25-10-18.09:41:32.696 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.09:41:32.869 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.09:41:41.217 [SpringApplicationShutdownHook] INFO  GracefulShutdown       - Commencing graceful shutdown. Waiting for active requests to complete
25-10-18.09:41:41.453 [tomcat-shutdown ] INFO  GracefulShutdown       - Graceful shutdown complete
25-10-18.09:41:41.457 [SpringApplicationShutdownHook] INFO  TaskJobService         - 开始停止所有任务
25-10-18.09:41:41.457 [SpringApplicationShutdownHook] INFO  TaskJobService         - 所有任务已停止
25-10-18.09:41:41.458 [SpringApplicationShutdownHook] INFO  HikariDataSource       - MainHikariPool - Shutdown initiated...
25-10-18.09:44:51.369 [main            ] INFO  Application            - Starting Application using Java 17.0.14 with PID 23900 (D:\java\ideapublic\ywz-ai-agent-station-study\ywz-ai-agent-station-study-app\target\classes started by ywz in D:\java\ideapublic\ywz-ai-agent-station-study)
25-10-18.09:44:51.371 [main            ] INFO  Application            - The following 1 profile is active: "dev"
25-10-18.09:44:52.944 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port 8099 (http)
25-10-18.09:44:52.958 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8099"]
25-10-18.09:44:52.960 [main            ] INFO  StandardService        - Starting service [Tomcat]
25-10-18.09:44:52.960 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/10.1.36]
25-10-18.09:44:53.057 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
25-10-18.09:44:53.058 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1652 ms
25-10-18.09:44:53.465 [main            ] INFO  PgVectorStore          - Using the vector table name: vector_store_openai. Is empty: false
25-10-18.09:44:53.470 [main            ] INFO  PgVectorStore          - Initializing PGVectorStore schema for table: vector_store_openai in schema: public
25-10-18.09:44:53.470 [main            ] INFO  PgVectorStore          - vectorTableValidationsEnabled false
25-10-18.09:44:53.911 [main            ] INFO  TaskJobAutoConfigBean  - xfg-wrench，任务调度器初始化完成。线程池大小: 5, 线程名前缀: test-task-scheduler-
25-10-18.09:44:53.916 [main            ] INFO  TaskJobService         - 开始初始化任务调度配置
25-10-18.09:44:53.930 [main            ] INFO  HikariDataSource       - MainHikariPool - Starting...
25-10-18.09:44:55.004 [main            ] INFO  HikariPool             - MainHikariPool - Added connection com.mysql.cj.jdbc.ConnectionImpl@200733f1
25-10-18.09:44:55.007 [main            ] INFO  HikariDataSource       - MainHikariPool - Start completed.
25-10-18.09:44:55.123 [main            ] INFO  TaskJobService         - 任务调度配置初始化完成，已加载任务数: 0
25-10-18.09:44:55.124 [main            ] INFO  TaskJobAutoConfigBean  - xfg-wrench，任务调度作业初始化完成。刷新间隔: 30000ms, 清理cron: 0 0/5 * * * ?
25-10-18.09:44:55.208 [main            ] INFO  OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
25-10-18.09:44:55.697 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8099"]
25-10-18.09:44:55.706 [main            ] INFO  TomcatWebServer        - Tomcat started on port 8099 (http) with context path '/'
25-10-18.09:44:55.716 [main            ] INFO  Application            - Started Application in 4.842 seconds (process running for 5.719)
25-10-18.09:44:55.718 [test-task-scheduler-1] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.09:44:55.723 [pool-2-thread-1 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_api) [6101]
25-10-18.09:44:55.723 [pool-2-thread-2 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_model) [6101]
25-10-18.09:44:55.723 [pool-2-thread-3 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_prompt) [6101]
25-10-18.09:44:55.723 [pool-2-thread-4 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_advisor) [6101]
25-10-18.09:44:55.723 [pool-2-thread-5 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_tool_mcp) [6101]
25-10-18.09:44:55.724 [pool-2-thread-6 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client) [6101]
25-10-18.09:44:55.783 [test-task-scheduler-1] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.09:44:55.912 [main            ] ERROR SpringApplication      - Application run failed
java.lang.RuntimeException: java.util.concurrent.CompletionException: org.mybatis.spring.MyBatisSystemException: Expected one result (or null) to be returned by selectOne(), but found: 2
	at com.ywzai.config.AiAgentAutoConfiguration.onApplicationEvent(AiAgentAutoConfiguration.java:60)
	at com.ywzai.config.AiAgentAutoConfiguration.onApplicationEvent(AiAgentAutoConfiguration.java:1)
	at com.ywzai.config.AiAgentAutoConfiguration$$SpringCGLIB$$0.onApplicationEvent(<generated>)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.boot.context.event.EventPublishingRunListener.ready(EventPublishingRunListener.java:109)
	at org.springframework.boot.SpringApplicationRunListeners.lambda$ready$6(SpringApplicationRunListeners.java:80)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.boot.SpringApplicationRunListeners.doWithListeners(SpringApplicationRunListeners.java:118)
	at org.springframework.boot.SpringApplicationRunListeners.doWithListeners(SpringApplicationRunListeners.java:112)
	at org.springframework.boot.SpringApplicationRunListeners.ready(SpringApplicationRunListeners.java:80)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:332)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.ywzai.Application.main(Application.java:17)
Caused by: java.util.concurrent.CompletionException: org.mybatis.spring.MyBatisSystemException: Expected one result (or null) to be returned by selectOne(), but found: 2
	at java.base/java.util.concurrent.CompletableFuture.encodeThrowable(CompletableFuture.java:315)
	at java.base/java.util.concurrent.CompletableFuture.completeThrowable(CompletableFuture.java:320)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run$$$capture(CompletableFuture.java:1770)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: org.mybatis.spring.MyBatisSystemException: Expected one result (or null) to be returned by selectOne(), but found: 2
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:99)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:347)
	at jdk.proxy2/jdk.proxy2.$Proxy78.selectOne(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.selectOne(SqlSessionTemplate.java:154)
	at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:87)
	at org.apache.ibatis.binding.MapperProxy$PlainMethodInvoker.invoke(MapperProxy.java:141)
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:86)
	at jdk.proxy2/jdk.proxy2.$Proxy81.queryModelIdByClientId(Unknown Source)
	at com.ywzai.infrastructure.adapter.repository.AgentRepository.getAiClientApiVOListByClientIds(AgentRepository.java:412)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:138)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727)
	at com.ywzai.infrastructure.adapter.repository.AgentRepository$$SpringCGLIB$$0.getAiClientApiVOListByClientIds(<generated>)
	at com.ywzai.domain.agent.service.armory.business.data.impl.AiClientLoadDataStrategy.lambda$0(AiClientLoadDataStrategy.java:39)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run$$$capture(CompletableFuture.java:1768)
	... 4 common frames omitted
Caused by: org.apache.ibatis.exceptions.TooManyResultsException: Expected one result (or null) to be returned by selectOne(), but found: 2
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectOne(DefaultSqlSession.java:81)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:333)
	... 24 common frames omitted
25-10-18.09:44:55.917 [main            ] INFO  GracefulShutdown       - Commencing graceful shutdown. Waiting for active requests to complete
25-10-18.09:44:55.917 [tomcat-shutdown ] INFO  Http11NioProtocol      - Pausing ProtocolHandler ["http-nio-8099"]
25-10-18.09:44:56.185 [tomcat-shutdown ] INFO  GracefulShutdown       - Graceful shutdown complete
25-10-18.09:44:56.186 [main            ] INFO  Http11NioProtocol      - Stopping ProtocolHandler ["http-nio-8099"]
25-10-18.09:44:56.189 [main            ] INFO  TaskJobService         - 开始停止所有任务
25-10-18.09:44:56.189 [main            ] INFO  TaskJobService         - 所有任务已停止
25-10-18.09:44:56.190 [main            ] INFO  HikariDataSource       - MainHikariPool - Shutdown initiated...
25-10-18.09:44:56.642 [main            ] INFO  HikariDataSource       - MainHikariPool - Shutdown completed.
25-10-18.09:52:23.237 [main            ] INFO  Application            - Starting Application using Java 17.0.14 with PID 16424 (D:\java\ideapublic\ywz-ai-agent-station-study\ywz-ai-agent-station-study-app\target\classes started by ywz in D:\java\ideapublic\ywz-ai-agent-station-study)
25-10-18.09:52:23.238 [main            ] INFO  Application            - The following 1 profile is active: "dev"
25-10-18.09:52:24.714 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port 8099 (http)
25-10-18.09:52:24.728 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8099"]
25-10-18.09:52:24.729 [main            ] INFO  StandardService        - Starting service [Tomcat]
25-10-18.09:52:24.729 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/10.1.36]
25-10-18.09:52:24.818 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
25-10-18.09:52:24.819 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1545 ms
25-10-18.09:52:25.194 [main            ] INFO  PgVectorStore          - Using the vector table name: vector_store_openai. Is empty: false
25-10-18.09:52:25.199 [main            ] INFO  PgVectorStore          - Initializing PGVectorStore schema for table: vector_store_openai in schema: public
25-10-18.09:52:25.199 [main            ] INFO  PgVectorStore          - vectorTableValidationsEnabled false
25-10-18.09:52:25.644 [main            ] INFO  TaskJobAutoConfigBean  - xfg-wrench，任务调度器初始化完成。线程池大小: 5, 线程名前缀: test-task-scheduler-
25-10-18.09:52:25.648 [main            ] INFO  TaskJobService         - 开始初始化任务调度配置
25-10-18.09:52:25.662 [main            ] INFO  HikariDataSource       - MainHikariPool - Starting...
25-10-18.09:52:26.715 [main            ] INFO  HikariPool             - MainHikariPool - Added connection com.mysql.cj.jdbc.ConnectionImpl@550e57d6
25-10-18.09:52:26.718 [main            ] INFO  HikariDataSource       - MainHikariPool - Start completed.
25-10-18.09:52:26.802 [main            ] INFO  TaskJobService         - 任务调度配置初始化完成，已加载任务数: 0
25-10-18.09:52:26.803 [main            ] INFO  TaskJobAutoConfigBean  - xfg-wrench，任务调度作业初始化完成。刷新间隔: 30000ms, 清理cron: 0 0/5 * * * ?
25-10-18.09:52:26.876 [main            ] INFO  OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
25-10-18.09:52:27.294 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8099"]
25-10-18.09:52:27.302 [main            ] INFO  TomcatWebServer        - Tomcat started on port 8099 (http) with context path '/'
25-10-18.09:52:27.311 [main            ] INFO  Application            - Started Application in 4.58 seconds (process running for 5.365)
25-10-18.09:52:27.312 [test-task-scheduler-1] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.09:52:27.316 [pool-2-thread-1 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_api) [6101]
25-10-18.09:52:27.317 [pool-2-thread-2 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_model) [6101]
25-10-18.09:52:27.317 [pool-2-thread-3 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_prompt) [6101]
25-10-18.09:52:27.317 [pool-2-thread-4 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_advisor) [6101]
25-10-18.09:52:27.317 [pool-2-thread-5 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_tool_mcp) [6101]
25-10-18.09:52:27.318 [pool-2-thread-6 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client) [6101]
25-10-18.09:52:27.500 [test-task-scheduler-1] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.09:52:27.814 [pool-2-thread-2 ] INFO  AgentRepository        - AiClientModelNode: 获取模型信息成功: 2000
25-10-18.09:52:28.013 [pool-2-thread-5 ] INFO  AgentRepository        - 查询modelId对应的mcpId列表 [5006]
25-10-18.09:52:28.241 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_api_1001
25-10-18.09:52:28.862 [HttpClient-11-Worker-1] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[completions=null, experimental={}, logging=null, prompts=PromptCapabilities[listChanged=false], resources=ResourceCapabilities[subscribe=false, listChanged=false], tools=ToolCapabilities[listChanged=false]], Info: Implementation[name=AIsearch, version=1.4.1] and Instructions null
25-10-18.09:52:28.947 [main            ] INFO  AiClientToolMcpNode    - SSE MCP Initialized: InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[completions=null, experimental={}, logging=null, prompts=PromptCapabilities[listChanged=false], resources=ResourceCapabilities[subscribe=false, listChanged=false], tools=ToolCapabilities[listChanged=false]], serverInfo=Implementation[name=AIsearch, version=1.4.1], instructions=null]
25-10-18.09:52:28.950 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5006
25-10-18.09:52:28.950 [main            ] INFO  AiClientModelNode      - 开始初始化 ai client model
25-10-18.09:52:29.043 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_2000
25-10-18.09:52:29.058 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_advisor_4001
25-10-18.09:52:29.143 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_advisor_4004
25-10-18.09:52:29.212 [main            ] ERROR LoggingFailureAnalysisReporter - 

***************************
APPLICATION FAILED TO START
***************************

Description:

A component required a bean named 'ai_client_model_6001' that could not be found.


Action:

Consider defining a bean named 'ai_client_model_6001' in your configuration.

25-10-18.09:52:29.214 [main            ] INFO  GracefulShutdown       - Commencing graceful shutdown. Waiting for active requests to complete
25-10-18.09:52:29.215 [tomcat-shutdown ] INFO  Http11NioProtocol      - Pausing ProtocolHandler ["http-nio-8099"]
25-10-18.09:52:29.457 [tomcat-shutdown ] INFO  GracefulShutdown       - Graceful shutdown complete
25-10-18.09:52:29.457 [main            ] INFO  Http11NioProtocol      - Stopping ProtocolHandler ["http-nio-8099"]
25-10-18.09:52:29.460 [main            ] INFO  TaskJobService         - 开始停止所有任务
25-10-18.09:52:29.461 [main            ] INFO  TaskJobService         - 所有任务已停止
25-10-18.09:52:29.462 [main            ] INFO  HikariDataSource       - MainHikariPool - Shutdown initiated...
25-10-18.09:52:29.676 [main            ] INFO  HikariDataSource       - MainHikariPool - Shutdown completed.
25-10-18.10:01:02.237 [main            ] INFO  Application            - Starting Application using Java 17.0.14 with PID 1748 (D:\java\ideapublic\ywz-ai-agent-station-study\ywz-ai-agent-station-study-app\target\classes started by ywz in D:\java\ideapublic\ywz-ai-agent-station-study)
25-10-18.10:01:02.238 [main            ] INFO  Application            - The following 1 profile is active: "dev"
25-10-18.10:01:03.812 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port 8099 (http)
25-10-18.10:01:03.826 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8099"]
25-10-18.10:01:03.829 [main            ] INFO  StandardService        - Starting service [Tomcat]
25-10-18.10:01:03.829 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/10.1.36]
25-10-18.10:01:03.922 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
25-10-18.10:01:03.922 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1649 ms
25-10-18.10:01:04.322 [main            ] INFO  PgVectorStore          - Using the vector table name: vector_store_openai. Is empty: false
25-10-18.10:01:04.327 [main            ] INFO  PgVectorStore          - Initializing PGVectorStore schema for table: vector_store_openai in schema: public
25-10-18.10:01:04.327 [main            ] INFO  PgVectorStore          - vectorTableValidationsEnabled false
25-10-18.10:01:04.796 [main            ] INFO  TaskJobAutoConfigBean  - xfg-wrench，任务调度器初始化完成。线程池大小: 5, 线程名前缀: test-task-scheduler-
25-10-18.10:01:04.800 [main            ] INFO  TaskJobService         - 开始初始化任务调度配置
25-10-18.10:01:04.814 [main            ] INFO  HikariDataSource       - MainHikariPool - Starting...
25-10-18.10:01:06.046 [main            ] INFO  HikariPool             - MainHikariPool - Added connection com.mysql.cj.jdbc.ConnectionImpl@550e57d6
25-10-18.10:01:06.049 [main            ] INFO  HikariDataSource       - MainHikariPool - Start completed.
25-10-18.10:01:06.144 [main            ] INFO  TaskJobService         - 任务调度配置初始化完成，已加载任务数: 0
25-10-18.10:01:06.146 [main            ] INFO  TaskJobAutoConfigBean  - xfg-wrench，任务调度作业初始化完成。刷新间隔: 30000ms, 清理cron: 0 0/5 * * * ?
25-10-18.10:01:06.218 [main            ] INFO  OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
25-10-18.10:01:06.661 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8099"]
25-10-18.10:01:06.668 [main            ] INFO  TomcatWebServer        - Tomcat started on port 8099 (http) with context path '/'
25-10-18.10:01:06.678 [main            ] INFO  Application            - Started Application in 4.922 seconds (process running for 5.729)
25-10-18.10:01:06.679 [test-task-scheduler-1] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.10:01:06.682 [pool-2-thread-1 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_api) [6101]
25-10-18.10:01:06.682 [pool-2-thread-2 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_model) [6101]
25-10-18.10:01:06.683 [pool-2-thread-3 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_prompt) [6101]
25-10-18.10:01:06.683 [pool-2-thread-4 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_advisor) [6101]
25-10-18.10:01:06.683 [pool-2-thread-5 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_tool_mcp) [6101]
25-10-18.10:01:06.684 [pool-2-thread-6 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client) [6101]
25-10-18.10:01:06.865 [test-task-scheduler-1] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.10:01:07.312 [pool-2-thread-5 ] INFO  AgentRepository        - 查询modelId对应的mcpId列表 [5006]
25-10-18.10:01:07.478 [pool-2-thread-2 ] INFO  AgentRepository        - AiClientModelNode: 获取模型信息成功: 2000
25-10-18.10:01:07.584 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_api_1001
25-10-18.10:01:07.980 [HttpClient-11-Worker-1] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[completions=null, experimental={}, logging=null, prompts=PromptCapabilities[listChanged=false], resources=ResourceCapabilities[subscribe=false, listChanged=false], tools=ToolCapabilities[listChanged=false]], Info: Implementation[name=AIsearch, version=1.4.1] and Instructions null
25-10-18.10:01:08.051 [main            ] INFO  AiClientToolMcpNode    - SSE MCP Initialized: InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[completions=null, experimental={}, logging=null, prompts=PromptCapabilities[listChanged=false], resources=ResourceCapabilities[subscribe=false, listChanged=false], tools=ToolCapabilities[listChanged=false]], serverInfo=Implementation[name=AIsearch, version=1.4.1], instructions=null]
25-10-18.10:01:08.054 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5006
25-10-18.10:01:08.054 [main            ] INFO  AiClientModelNode      - 开始初始化 ai client model
25-10-18.10:01:08.144 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_2000
25-10-18.10:01:08.158 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_advisor_4001
25-10-18.10:01:08.238 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_advisor_4004
25-10-18.10:01:08.296 [main            ] ERROR LoggingFailureAnalysisReporter - 

***************************
APPLICATION FAILED TO START
***************************

Description:

A component required a bean named 'ai_client_tool_mcp_5001' that could not be found.


Action:

Consider defining a bean named 'ai_client_tool_mcp_5001' in your configuration.

25-10-18.10:01:08.299 [main            ] INFO  GracefulShutdown       - Commencing graceful shutdown. Waiting for active requests to complete
25-10-18.10:01:08.300 [tomcat-shutdown ] INFO  Http11NioProtocol      - Pausing ProtocolHandler ["http-nio-8099"]
25-10-18.10:01:08.537 [tomcat-shutdown ] INFO  GracefulShutdown       - Graceful shutdown complete
25-10-18.10:01:08.538 [main            ] INFO  Http11NioProtocol      - Stopping ProtocolHandler ["http-nio-8099"]
25-10-18.10:01:08.541 [main            ] INFO  TaskJobService         - 开始停止所有任务
25-10-18.10:01:08.542 [main            ] INFO  TaskJobService         - 所有任务已停止
25-10-18.10:01:08.543 [main            ] INFO  HikariDataSource       - MainHikariPool - Shutdown initiated...
25-10-18.10:01:08.827 [main            ] INFO  HikariDataSource       - MainHikariPool - Shutdown completed.
25-10-18.10:11:52.159 [main            ] INFO  Application            - Starting Application using Java 17.0.14 with PID 4836 (D:\java\ideapublic\ywz-ai-agent-station-study\ywz-ai-agent-station-study-app\target\classes started by ywz in D:\java\ideapublic\ywz-ai-agent-station-study)
25-10-18.10:11:52.160 [main            ] INFO  Application            - The following 1 profile is active: "dev"
25-10-18.10:11:53.650 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port 8099 (http)
25-10-18.10:11:53.664 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8099"]
25-10-18.10:11:53.666 [main            ] INFO  StandardService        - Starting service [Tomcat]
25-10-18.10:11:53.666 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/10.1.36]
25-10-18.10:11:53.760 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
25-10-18.10:11:53.760 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1567 ms
25-10-18.10:11:54.157 [main            ] INFO  PgVectorStore          - Using the vector table name: vector_store_openai. Is empty: false
25-10-18.10:11:54.172 [main            ] INFO  PgVectorStore          - Initializing PGVectorStore schema for table: vector_store_openai in schema: public
25-10-18.10:11:54.172 [main            ] INFO  PgVectorStore          - vectorTableValidationsEnabled false
25-10-18.10:11:54.618 [main            ] INFO  TaskJobAutoConfigBean  - xfg-wrench，任务调度器初始化完成。线程池大小: 5, 线程名前缀: test-task-scheduler-
25-10-18.10:11:54.622 [main            ] INFO  TaskJobService         - 开始初始化任务调度配置
25-10-18.10:11:54.636 [main            ] INFO  HikariDataSource       - MainHikariPool - Starting...
25-10-18.10:11:59.346 [main            ] INFO  HikariPool             - MainHikariPool - Added connection com.mysql.cj.jdbc.ConnectionImpl@1e70a007
25-10-18.10:11:59.347 [main            ] INFO  HikariDataSource       - MainHikariPool - Start completed.
25-10-18.10:11:59.429 [main            ] INFO  TaskJobService         - 任务调度配置初始化完成，已加载任务数: 0
25-10-18.10:11:59.430 [main            ] INFO  TaskJobAutoConfigBean  - xfg-wrench，任务调度作业初始化完成。刷新间隔: 30000ms, 清理cron: 0 0/5 * * * ?
25-10-18.10:11:59.503 [main            ] INFO  OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
25-10-18.10:11:59.939 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8099"]
25-10-18.10:11:59.947 [main            ] INFO  TomcatWebServer        - Tomcat started on port 8099 (http) with context path '/'
25-10-18.10:11:59.956 [main            ] INFO  Application            - Started Application in 8.306 seconds (process running for 9.083)
25-10-18.10:11:59.958 [test-task-scheduler-1] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.10:11:59.961 [pool-2-thread-1 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_api) [6101]
25-10-18.10:11:59.961 [pool-2-thread-2 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_model) [6101]
25-10-18.10:11:59.961 [pool-2-thread-3 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_prompt) [6101]
25-10-18.10:11:59.962 [pool-2-thread-4 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_advisor) [6101]
25-10-18.10:11:59.962 [pool-2-thread-5 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_tool_mcp) [6101]
25-10-18.10:11:59.962 [pool-2-thread-6 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client) [6101]
25-10-18.10:12:00.165 [test-task-scheduler-1] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.10:12:00.744 [pool-2-thread-5 ] INFO  AgentRepository        - 查询modelId对应的mcpId列表 [5006, 5001]
25-10-18.10:12:00.775 [pool-2-thread-2 ] INFO  AgentRepository        - AiClientModelNode: 获取模型信息成功: 2000
25-10-18.10:12:00.991 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_api_1001
25-10-18.10:12:01.530 [HttpClient-11-Worker-2] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[completions=null, experimental={}, logging=null, prompts=PromptCapabilities[listChanged=false], resources=ResourceCapabilities[subscribe=false, listChanged=false], tools=ToolCapabilities[listChanged=false]], Info: Implementation[name=AIsearch, version=1.4.1] and Instructions null
25-10-18.10:12:01.612 [main            ] INFO  AiClientToolMcpNode    - SSE MCP Initialized: InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[completions=null, experimental={}, logging=null, prompts=PromptCapabilities[listChanged=false], resources=ResourceCapabilities[subscribe=false, listChanged=false], tools=ToolCapabilities[listChanged=false]], serverInfo=Implementation[name=AIsearch, version=1.4.1], instructions=null]
25-10-18.10:12:01.616 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5006
25-10-18.10:12:01.915 [HttpClient-12-Worker-0] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[completions=null, experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-csdn, version=1.0.0] and Instructions null
25-10-18.10:12:01.961 [main            ] INFO  AiClientToolMcpNode    - SSE MCP Initialized: InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[completions=null, experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-csdn, version=1.0.0], instructions=null]
25-10-18.10:12:01.961 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5001
25-10-18.10:12:01.962 [main            ] INFO  AiClientModelNode      - 开始初始化 ai client model
25-10-18.10:12:02.136 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_2000
25-10-18.10:12:02.152 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_advisor_4001
25-10-18.10:12:02.227 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_advisor_4004
25-10-18.10:12:02.283 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_6101
25-10-18.10:12:02.284 [main            ] INFO  AiAgentAutoConfiguration - 【AI-AGENT】启动成功，已加载客户端：null
25-10-18.10:12:10.416 [http-nio-8099-exec-1] INFO  [/]                    - Initializing Spring DispatcherServlet 'dispatcherServlet'
25-10-18.10:12:10.416 [http-nio-8099-exec-1] INFO  DispatcherServlet      - Initializing Servlet 'dispatcherServlet'
25-10-18.10:12:10.418 [http-nio-8099-exec-1] INFO  DispatcherServlet      - Completed initialization in 2 ms
25-10-18.10:12:12.146 [http-nio-8099-exec-2] INFO  AiAgentDrawAdminController - 开始保存画布信息: 流程图配置_2025/10/18 10:12:10
25-10-18.10:12:12.151 [http-nio-8099-exec-2] INFO  AiAgentDrawAdminController - 提取地段:[{"key":"","value":{"content":"test01"}}] ,agentName
25-10-18.10:12:12.156 [http-nio-8099-exec-2] INFO  AiAgentDrawAdminController - 提取地段:[{"key":"","value":{"content":"测试用例"}}] ,description
25-10-18.10:12:12.157 [http-nio-8099-exec-2] INFO  AiAgentDrawAdminController - 提取地段:"agent" ,channel
25-10-18.10:12:12.157 [http-nio-8099-exec-2] INFO  AiAgentDrawAdminController - 提取地段:"flowAgentExecuteStrategy" ,strategy
25-10-18.10:12:12.157 [http-nio-8099-exec-2] INFO  AiAgentDrawAdminController - 解析到agent信息: agentName=test01, description=测试用例, channel=agent, strategy=flowAgentExecuteStrategy
25-10-18.10:12:12.657 [http-nio-8099-exec-2] INFO  AiAgentDrawAdminController - 开始更新Client关联表数据
25-10-18.10:12:20.042 [http-nio-8099-exec-2] INFO  DrawConfigParser       - 开始解析边关系，总共6条边
25-10-18.10:12:20.042 [http-nio-8099-exec-2] WARN  DrawConfigParser       - 找不到节点信息，sourceNodeId: start_0, targetNodeId: agent_QyqMj
25-10-18.10:12:20.042 [http-nio-8099-exec-2] INFO  DrawConfigParser       - 创建配置关系: client(6101) -> tool_mcp(5001), sourcePortId: client_select__8DZjR
25-10-18.10:12:20.042 [http-nio-8099-exec-2] INFO  DrawConfigParser       - 成功创建配置关系[1]: client:6101 -> tool_mcp:5001
25-10-18.10:12:20.042 [http-nio-8099-exec-2] INFO  DrawConfigParser       - 创建配置关系: client(6101) -> prompt(6003), sourcePortId: client_select__8DZjR
25-10-18.10:12:20.042 [http-nio-8099-exec-2] INFO  DrawConfigParser       - 成功创建配置关系[2]: client:6101 -> prompt:6003
25-10-18.10:12:20.042 [http-nio-8099-exec-2] INFO  DrawConfigParser       - 创建配置关系: client(6101) -> model(2000), sourcePortId: client_select__8DZjR
25-10-18.10:12:20.042 [http-nio-8099-exec-2] INFO  DrawConfigParser       - 成功创建配置关系[3]: client:6101 -> model:2000
25-10-18.10:12:20.042 [http-nio-8099-exec-2] INFO  DrawConfigParser       - 创建配置关系: model(2000) -> advisor(4001), sourcePortId: model_select_729ASo
25-10-18.10:12:20.042 [http-nio-8099-exec-2] INFO  DrawConfigParser       - 成功创建配置关系[4]: model:2000 -> advisor:4001
25-10-18.10:12:20.042 [http-nio-8099-exec-2] INFO  DrawConfigParser       - 边关系解析完成，处理0条边，跳过2条，生成4条有效配置关系
25-10-18.10:12:20.042 [http-nio-8099-exec-2] INFO  DrawConfigParser       - 节点类型统计结果
25-10-18.10:12:20.042 [http-nio-8099-exec-2] INFO  DrawConfigParser       - 节点类型: advisor, 数量: 1 1有引用id
25-10-18.10:12:20.042 [http-nio-8099-exec-2] INFO  DrawConfigParser       - 节点类型: agent, 数量: 1 1有引用id
25-10-18.10:12:20.042 [http-nio-8099-exec-2] INFO  DrawConfigParser       - 节点类型: tool_mcp, 数量: 1 1有引用id
25-10-18.10:12:20.043 [http-nio-8099-exec-2] INFO  DrawConfigParser       - 节点类型: client, 数量: 1 1有引用id
25-10-18.10:12:20.043 [http-nio-8099-exec-2] INFO  DrawConfigParser       - 节点类型: model, 数量: 1 1有引用id
25-10-18.10:12:20.043 [http-nio-8099-exec-2] INFO  DrawConfigParser       - 节点类型: prompt, 数量: 1 1有引用id
25-10-18.10:12:20.043 [http-nio-8099-exec-2] INFO  DrawConfigParser       - 节点配置关系统计结果
25-10-18.10:12:20.043 [http-nio-8099-exec-2] INFO  DrawConfigParser       - 关系类型: client -> model, 数量: 1
25-10-18.10:12:20.043 [http-nio-8099-exec-2] INFO  DrawConfigParser       - 关系类型: client -> tool_mcp, 数量: 1
25-10-18.10:12:20.043 [http-nio-8099-exec-2] INFO  DrawConfigParser       - 关系类型: model -> advisor, 数量: 1
25-10-18.10:12:20.043 [http-nio-8099-exec-2] INFO  DrawConfigParser       - 关系类型: client -> prompt, 数量: 1
25-10-18.10:12:20.043 [http-nio-8099-exec-2] INFO  DrawConfigParser       - 总计: 6个节点，6条边，4条有效配置关系
25-10-18.10:12:20.043 [http-nio-8099-exec-2] INFO  DrawConfigParser       - === 统计结束 ===
25-10-18.10:12:20.043 [http-nio-8099-exec-2] INFO  DrawConfigParser       - 解析配置数据完成，生成4条关系
25-10-18.10:12:20.134 [http-nio-8099-exec-2] INFO  AiAgentDrawAdminController - 已存在相同的记录, 不需要重复插入: AiClientConfig(id=null, sourceType=client, sourceId=6101, targetType=tool_mcp, targetId=5001, extParam={"sourcePortId":"client_select__8DZjR","sourceTitle":"Client_1","targetTitle":"ToolMcp_1"}, status=1, createTime=2025-10-18T10:12:20.042465800, updateTime=2025-10-18T10:12:20.042465800)
25-10-18.10:12:20.235 [http-nio-8099-exec-2] INFO  AiAgentDrawAdminController - 已存在相同的记录, 不需要重复插入: AiClientConfig(id=null, sourceType=client, sourceId=6101, targetType=prompt, targetId=6003, extParam={"sourcePortId":"client_select__8DZjR","sourceTitle":"Client_1","targetTitle":"Prompt_1"}, status=1, createTime=2025-10-18T10:12:20.042465800, updateTime=2025-10-18T10:12:20.042465800)
25-10-18.10:12:20.284 [http-nio-8099-exec-2] INFO  AiAgentDrawAdminController - 已存在相同的记录, 不需要重复插入: AiClientConfig(id=null, sourceType=client, sourceId=6101, targetType=model, targetId=2000, extParam={"sourcePortId":"client_select__8DZjR","sourceTitle":"Client_1","targetTitle":"Model_1"}, status=1, createTime=2025-10-18T10:12:20.042465800, updateTime=2025-10-18T10:12:20.042465800)
25-10-18.10:12:20.337 [http-nio-8099-exec-2] INFO  AiAgentDrawAdminController - 已存在相同的记录, 不需要重复插入: AiClientConfig(id=null, sourceType=model, sourceId=2000, targetType=advisor, targetId=4001, extParam={"sourcePortId":"model_select_729ASo","sourceTitle":"Model_1","targetTitle":"Advisor_1"}, status=1, createTime=2025-10-18T10:12:20.042465800, updateTime=2025-10-18T10:12:20.042465800)
25-10-18.10:12:20.337 [http-nio-8099-exec-2] INFO  AiAgentDrawAdminController - 开始更新agent_flow_config表数据
25-10-18.10:12:20.338 [http-nio-8099-exec-2] INFO  AiAgentDrawAdminController - 提取地段:[{"key":"client_type_kOprhJ","value":"DEFAULT"}] ,clientType
25-10-18.10:12:20.338 [http-nio-8099-exec-2] INFO  AiAgentDrawAdminController - 提取地段:"6101" ,clientId
25-10-18.10:12:20.338 [http-nio-8099-exec-2] INFO  AiAgentDrawAdminController - 提取地段:"6101-CSDN发帖&通知" ,clientName
25-10-18.10:12:20.338 [http-nio-8099-exec-2] INFO  AiAgentDrawAdminController - 提取字段:[{"key":"sequence_CagJ4V","value":1}] ,sequence
25-10-18.10:12:20.338 [http-nio-8099-exec-2] INFO  AiAgentDrawAdminController - 提取地段:[{"key":"step_prompt_-0aB4W","value":""}] ,stepPrompt
25-10-18.10:12:20.647 [http-nio-8099-exec-2] ERROR AiAgentDrawAdminController - 解析和保存agent-client关系数据失败，agentId: 53532146
org.springframework.dao.DataIntegrityViolationException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'sequence' cannot be null
### The error may exist in file [D:\java\ideapublic\ywz-ai-agent-station-study\ywz-ai-agent-station-study-app\target\classes\mybatis\mapper\ai_agent_flow_config_mapper.xml]
### The error may involve com.ywzai.infrastructure.dao.IAiAgentFlowConfigDao.insert-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO ai_agent_flow_config(agent_id, client_id, client_name, client_type, step_prompt, sequence, status,                                          create_time)         VALUES (?, ?, ?, ?, ?, ?, ?, NOW())
### Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'sequence' cannot be null
; Column 'sequence' cannot be null
	at org.springframework.jdbc.support.SQLExceptionSubclassTranslator.doTranslate(SQLExceptionSubclassTranslator.java:97)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:107)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:116)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:93)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:347)
	at jdk.proxy2/jdk.proxy2.$Proxy78.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:224)
	at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:62)
	at org.apache.ibatis.binding.MapperProxy$PlainMethodInvoker.invoke(MapperProxy.java:141)
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:86)
	at jdk.proxy2/jdk.proxy2.$Proxy88.insert(Unknown Source)
	at com.ywzai.trigger.http.admin.AiAgentDrawAdminController.saveDrawConfig(AiAgentDrawAdminController.java:171)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727)
	at com.ywzai.trigger.http.admin.AiAgentDrawAdminController$$SpringCGLIB$$0.saveDrawConfig(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:257)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1088)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Column 'sequence' cannot be null
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:371)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:48)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:75)
	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:50)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:76)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:333)
	... 69 common frames omitted
25-10-18.10:12:29.969 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.10:12:30.151 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.10:12:59.965 [test-task-scheduler-3] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.10:13:00.171 [test-task-scheduler-3] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.10:13:29.956 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.10:13:30.016 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.10:13:59.962 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.10:14:00.103 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.10:14:29.965 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.10:14:30.101 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.10:14:30.380 [http-nio-8099-exec-5] INFO  AiClientAdminController - 查询所有AI客户端配置
25-10-18.10:14:34.995 [http-nio-8099-exec-7] INFO  AiClientAdminController - 查询所有AI客户端配置
25-10-18.10:14:59.963 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.10:15:00.010 [test-task-scheduler-4] INFO  TaskJobService         - 开始清理无效的任务
25-10-18.10:15:00.180 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.10:15:00.181 [test-task-scheduler-4] INFO  TaskJobService         - 发现1个无效任务需要清理
25-10-18.10:15:00.181 [test-task-scheduler-4] INFO  TaskJobService         - 无效任务清理完成，当前活跃任务数: 0
25-10-18.10:15:29.962 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.10:15:30.175 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.10:15:59.962 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.10:16:00.187 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.10:16:29.970 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.10:16:30.192 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.10:16:59.971 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.10:17:00.131 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.10:17:29.966 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.10:17:30.092 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.10:17:52.410 [http-nio-8099-exec-6] INFO  AiClientAdminController - 查询所有AI客户端配置
25-10-18.10:17:59.964 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.10:18:00.145 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.10:18:29.964 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.10:18:31.123 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.10:18:59.963 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.10:19:00.202 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.10:19:29.965 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.10:19:32.663 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.10:19:59.959 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.10:20:00.006 [test-task-scheduler-5] INFO  TaskJobService         - 开始清理无效的任务
25-10-18.10:20:00.515 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.10:20:00.515 [test-task-scheduler-5] INFO  TaskJobService         - 发现1个无效任务需要清理
25-10-18.10:20:00.515 [test-task-scheduler-5] INFO  TaskJobService         - 无效任务清理完成，当前活跃任务数: 0
25-10-18.10:20:24.837 [SpringApplicationShutdownHook] INFO  GracefulShutdown       - Commencing graceful shutdown. Waiting for active requests to complete
25-10-18.10:20:54.451 [main            ] INFO  Application            - Starting Application using Java 17.0.14 with PID 29200 (D:\java\ideapublic\ywz-ai-agent-station-study\ywz-ai-agent-station-study-app\target\classes started by ywz in D:\java\ideapublic\ywz-ai-agent-station-study)
25-10-18.10:20:54.452 [main            ] INFO  Application            - The following 1 profile is active: "dev"
25-10-18.10:20:55.941 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port 8099 (http)
25-10-18.10:20:55.955 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8099"]
25-10-18.10:20:55.956 [main            ] INFO  StandardService        - Starting service [Tomcat]
25-10-18.10:20:55.956 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/10.1.36]
25-10-18.10:20:56.049 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
25-10-18.10:20:56.049 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1565 ms
25-10-18.10:20:56.474 [main            ] INFO  PgVectorStore          - Using the vector table name: vector_store_openai. Is empty: false
25-10-18.10:20:56.479 [main            ] INFO  PgVectorStore          - Initializing PGVectorStore schema for table: vector_store_openai in schema: public
25-10-18.10:20:56.479 [main            ] INFO  PgVectorStore          - vectorTableValidationsEnabled false
25-10-18.10:20:56.950 [main            ] INFO  TaskJobAutoConfigBean  - xfg-wrench，任务调度器初始化完成。线程池大小: 5, 线程名前缀: test-task-scheduler-
25-10-18.10:20:56.953 [main            ] INFO  TaskJobService         - 开始初始化任务调度配置
25-10-18.10:20:56.967 [main            ] INFO  HikariDataSource       - MainHikariPool - Starting...
25-10-18.10:20:58.165 [main            ] INFO  HikariPool             - MainHikariPool - Added connection com.mysql.cj.jdbc.ConnectionImpl@16c0f05c
25-10-18.10:20:58.167 [main            ] INFO  HikariDataSource       - MainHikariPool - Start completed.
25-10-18.10:20:58.386 [main            ] INFO  TaskJobService         - 任务调度配置初始化完成，已加载任务数: 0
25-10-18.10:20:58.388 [main            ] INFO  TaskJobAutoConfigBean  - xfg-wrench，任务调度作业初始化完成。刷新间隔: 30000ms, 清理cron: 0 0/5 * * * ?
25-10-18.10:20:58.462 [main            ] INFO  OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
25-10-18.10:20:58.881 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8099"]
25-10-18.10:20:58.889 [main            ] INFO  TomcatWebServer        - Tomcat started on port 8099 (http) with context path '/'
25-10-18.10:20:58.898 [main            ] INFO  Application            - Started Application in 4.92 seconds (process running for 5.675)
25-10-18.10:20:58.900 [test-task-scheduler-1] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.10:20:58.903 [pool-2-thread-1 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_api) [6101]
25-10-18.10:20:58.903 [pool-2-thread-2 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_model) [6101]
25-10-18.10:20:58.903 [pool-2-thread-3 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_prompt) [6101]
25-10-18.10:20:58.903 [pool-2-thread-4 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_advisor) [6101]
25-10-18.10:20:58.903 [pool-2-thread-5 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_tool_mcp) [6101]
25-10-18.10:20:58.903 [pool-2-thread-6 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client) [6101]
25-10-18.10:21:02.399 [test-task-scheduler-1] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.10:21:03.182 [pool-2-thread-2 ] INFO  AgentRepository        - AiClientModelNode: 获取模型信息成功: 2000
25-10-18.10:21:03.184 [pool-2-thread-5 ] INFO  AgentRepository        - 查询modelId对应的mcpId列表 [5006, 5001]
25-10-18.10:21:03.560 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_api_1001
25-10-18.10:21:04.015 [HttpClient-11-Worker-2] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[completions=null, experimental={}, logging=null, prompts=PromptCapabilities[listChanged=false], resources=ResourceCapabilities[subscribe=false, listChanged=false], tools=ToolCapabilities[listChanged=false]], Info: Implementation[name=AIsearch, version=1.4.1] and Instructions null
25-10-18.10:21:04.104 [main            ] INFO  AiClientToolMcpNode    - SSE MCP Initialized: InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[completions=null, experimental={}, logging=null, prompts=PromptCapabilities[listChanged=false], resources=ResourceCapabilities[subscribe=false, listChanged=false], tools=ToolCapabilities[listChanged=false]], serverInfo=Implementation[name=AIsearch, version=1.4.1], instructions=null]
25-10-18.10:21:04.107 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5006
25-10-18.10:21:04.249 [HttpClient-12-Worker-1] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[completions=null, experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-csdn, version=1.0.0] and Instructions null
25-10-18.10:21:04.283 [main            ] INFO  AiClientToolMcpNode    - SSE MCP Initialized: InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[completions=null, experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-csdn, version=1.0.0], instructions=null]
25-10-18.10:21:04.284 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5001
25-10-18.10:21:04.284 [main            ] INFO  AiClientModelNode      - 开始初始化 ai client model
25-10-18.10:21:04.397 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_2000
25-10-18.10:21:04.410 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_advisor_4001
25-10-18.10:21:04.487 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_advisor_4004
25-10-18.10:21:04.531 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_6101
25-10-18.10:21:04.531 [main            ] INFO  AiAgentAutoConfiguration - 【AI-AGENT】启动成功，已加载客户端：null
25-10-18.10:21:07.703 [http-nio-8099-exec-1] INFO  [/]                    - Initializing Spring DispatcherServlet 'dispatcherServlet'
25-10-18.10:21:07.703 [http-nio-8099-exec-1] INFO  DispatcherServlet      - Initializing Servlet 'dispatcherServlet'
25-10-18.10:21:07.704 [http-nio-8099-exec-1] INFO  DispatcherServlet      - Completed initialization in 1 ms
25-10-18.10:21:07.820 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 开始保存画布信息: 流程图配置_2025/10/18 10:21:07
25-10-18.10:21:07.825 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 提取字段:[{"key":"","value":{"content":"test01"}}] ,agentName
25-10-18.10:21:07.830 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 提取字段:[{"key":"","value":{"content":"测试用例"}}] ,description
25-10-18.10:21:07.830 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 提取字段:"agent" ,channel
25-10-18.10:21:07.830 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 提取字段:"flowAgentExecuteStrategy" ,strategy
25-10-18.10:21:07.831 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 解析到agent信息: agentName=test01, description=测试用例, channel=agent, strategy=flowAgentExecuteStrategy
25-10-18.10:21:08.015 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 开始更新Client关联表数据
25-10-18.10:21:08.025 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 开始解析边关系，总共6条边
25-10-18.10:21:08.025 [http-nio-8099-exec-1] WARN  DrawConfigParser       - 找不到节点信息，sourceNodeId: start_0, targetNodeId: agent_QyqMj
25-10-18.10:21:08.025 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 创建配置关系: client(6101) -> tool_mcp(5001), sourcePortId: client_select__8DZjR
25-10-18.10:21:08.026 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 成功创建配置关系[1]: client:6101 -> tool_mcp:5001
25-10-18.10:21:08.026 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 创建配置关系: client(6101) -> prompt(6003), sourcePortId: client_select__8DZjR
25-10-18.10:21:08.026 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 成功创建配置关系[2]: client:6101 -> prompt:6003
25-10-18.10:21:08.026 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 创建配置关系: client(6101) -> model(2000), sourcePortId: client_select__8DZjR
25-10-18.10:21:08.026 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 成功创建配置关系[3]: client:6101 -> model:2000
25-10-18.10:21:08.026 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 创建配置关系: model(2000) -> advisor(4001), sourcePortId: model_select_729ASo
25-10-18.10:21:08.026 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 成功创建配置关系[4]: model:2000 -> advisor:4001
25-10-18.10:21:08.026 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 边关系解析完成，处理0条边，跳过2条，生成4条有效配置关系
25-10-18.10:21:08.026 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 节点类型统计结果
25-10-18.10:21:08.026 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 节点类型: advisor, 数量: 1 1有引用id
25-10-18.10:21:08.026 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 节点类型: agent, 数量: 1 1有引用id
25-10-18.10:21:08.026 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 节点类型: tool_mcp, 数量: 1 1有引用id
25-10-18.10:21:08.026 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 节点类型: client, 数量: 1 1有引用id
25-10-18.10:21:08.026 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 节点类型: model, 数量: 1 1有引用id
25-10-18.10:21:08.026 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 节点类型: prompt, 数量: 1 1有引用id
25-10-18.10:21:08.026 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 节点配置关系统计结果
25-10-18.10:21:08.026 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 关系类型: client -> model, 数量: 1
25-10-18.10:21:08.026 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 关系类型: client -> tool_mcp, 数量: 1
25-10-18.10:21:08.026 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 关系类型: model -> advisor, 数量: 1
25-10-18.10:21:08.026 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 关系类型: client -> prompt, 数量: 1
25-10-18.10:21:08.026 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 总计: 6个节点，6条边，4条有效配置关系
25-10-18.10:21:08.026 [http-nio-8099-exec-1] INFO  DrawConfigParser       - === 统计结束 ===
25-10-18.10:21:08.026 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 解析配置数据完成，生成4条关系
25-10-18.10:21:08.060 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 已存在相同的记录, 不需要重复插入: AiClientConfig(id=null, sourceType=client, sourceId=6101, targetType=tool_mcp, targetId=5001, extParam={"sourcePortId":"client_select__8DZjR","sourceTitle":"Client_1","targetTitle":"ToolMcp_1"}, status=1, createTime=2025-10-18T10:21:08.025340700, updateTime=2025-10-18T10:21:08.025340700)
25-10-18.10:21:08.100 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 已存在相同的记录, 不需要重复插入: AiClientConfig(id=null, sourceType=client, sourceId=6101, targetType=prompt, targetId=6003, extParam={"sourcePortId":"client_select__8DZjR","sourceTitle":"Client_1","targetTitle":"Prompt_1"}, status=1, createTime=2025-10-18T10:21:08.026342500, updateTime=2025-10-18T10:21:08.026342500)
25-10-18.10:21:08.135 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 已存在相同的记录, 不需要重复插入: AiClientConfig(id=null, sourceType=client, sourceId=6101, targetType=model, targetId=2000, extParam={"sourcePortId":"client_select__8DZjR","sourceTitle":"Client_1","targetTitle":"Model_1"}, status=1, createTime=2025-10-18T10:21:08.026342500, updateTime=2025-10-18T10:21:08.026342500)
25-10-18.10:21:08.172 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 已存在相同的记录, 不需要重复插入: AiClientConfig(id=null, sourceType=model, sourceId=2000, targetType=advisor, targetId=4001, extParam={"sourcePortId":"model_select_729ASo","sourceTitle":"Model_1","targetTitle":"Advisor_1"}, status=1, createTime=2025-10-18T10:21:08.026342500, updateTime=2025-10-18T10:21:08.026342500)
25-10-18.10:21:08.172 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 开始更新agent_flow_config表数据
25-10-18.10:21:08.173 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 提取字段:[{"key":"client_type_kOprhJ","value":"DEFAULT"}] ,clientType
25-10-18.10:21:08.173 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 提取字段:"6101" ,clientId
25-10-18.10:21:08.173 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 提取字段:"6101-CSDN发帖&通知" ,clientName
25-10-18.10:21:08.173 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 提取字段:[{"key":"sequence_CagJ4V","value":1}] ,sequence
25-10-18.10:21:08.173 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 提取字段:[{"key":"step_prompt_-0aB4W","value":""}] ,stepPrompt
25-10-18.10:21:08.240 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 插入agent_flow_config表数据: AiAgentFlowConfig(id=null, agentId=54067820, clientId=6101, clientName=6101-CSDN发帖&通知, clientType=DEFAULT, stepPrompt=, sequence=1, status=1, createTime=2025-10-18T10:21:08.175263200)
25-10-18.10:21:28.909 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.10:21:29.089 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.10:21:58.902 [test-task-scheduler-3] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.10:21:58.969 [test-task-scheduler-3] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.10:22:28.902 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.10:22:29.095 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.10:22:58.906 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.10:22:59.097 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.10:23:03.084 [SpringApplicationShutdownHook] INFO  GracefulShutdown       - Commencing graceful shutdown. Waiting for active requests to complete
25-10-18.10:23:03.320 [tomcat-shutdown ] INFO  GracefulShutdown       - Graceful shutdown complete
25-10-18.10:23:03.324 [SpringApplicationShutdownHook] INFO  TaskJobService         - 开始停止所有任务
25-10-18.10:23:03.324 [SpringApplicationShutdownHook] INFO  TaskJobService         - 所有任务已停止
25-10-18.10:23:03.326 [SpringApplicationShutdownHook] INFO  HikariDataSource       - MainHikariPool - Shutdown initiated...
25-10-18.10:23:07.069 [main            ] INFO  Application            - Starting Application using Java 17.0.14 with PID 25116 (D:\java\ideapublic\ywz-ai-agent-station-study\ywz-ai-agent-station-study-app\target\classes started by ywz in D:\java\ideapublic\ywz-ai-agent-station-study)
25-10-18.10:23:07.070 [main            ] INFO  Application            - The following 1 profile is active: "dev"
25-10-18.10:23:08.612 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port 8099 (http)
25-10-18.10:23:08.627 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8099"]
25-10-18.10:23:08.628 [main            ] INFO  StandardService        - Starting service [Tomcat]
25-10-18.10:23:08.629 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/10.1.36]
25-10-18.10:23:08.726 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
25-10-18.10:23:08.727 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1625 ms
25-10-18.10:23:09.139 [main            ] INFO  PgVectorStore          - Using the vector table name: vector_store_openai. Is empty: false
25-10-18.10:23:09.155 [main            ] INFO  PgVectorStore          - Initializing PGVectorStore schema for table: vector_store_openai in schema: public
25-10-18.10:23:09.155 [main            ] INFO  PgVectorStore          - vectorTableValidationsEnabled false
25-10-18.10:23:09.595 [main            ] INFO  TaskJobAutoConfigBean  - xfg-wrench，任务调度器初始化完成。线程池大小: 5, 线程名前缀: test-task-scheduler-
25-10-18.10:23:09.599 [main            ] INFO  TaskJobService         - 开始初始化任务调度配置
25-10-18.10:23:09.613 [main            ] INFO  HikariDataSource       - MainHikariPool - Starting...
25-10-18.10:23:10.121 [main            ] INFO  HikariPool             - MainHikariPool - Added connection com.mysql.cj.jdbc.ConnectionImpl@77667947
25-10-18.10:23:10.122 [main            ] INFO  HikariDataSource       - MainHikariPool - Start completed.
25-10-18.10:23:10.202 [main            ] INFO  TaskJobService         - 任务调度配置初始化完成，已加载任务数: 0
25-10-18.10:23:10.204 [main            ] INFO  TaskJobAutoConfigBean  - xfg-wrench，任务调度作业初始化完成。刷新间隔: 30000ms, 清理cron: 0 0/5 * * * ?
25-10-18.10:23:10.281 [main            ] INFO  OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
25-10-18.10:23:10.736 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8099"]
25-10-18.10:23:10.743 [main            ] INFO  TomcatWebServer        - Tomcat started on port 8099 (http) with context path '/'
25-10-18.10:23:10.753 [main            ] INFO  Application            - Started Application in 4.176 seconds (process running for 4.993)
25-10-18.10:23:10.754 [test-task-scheduler-1] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.10:23:10.758 [pool-2-thread-1 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_api) [6101]
25-10-18.10:23:10.758 [pool-2-thread-2 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_model) [6101]
25-10-18.10:23:10.758 [pool-2-thread-3 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_prompt) [6101]
25-10-18.10:23:10.758 [pool-2-thread-4 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_advisor) [6101]
25-10-18.10:23:10.759 [pool-2-thread-5 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_tool_mcp) [6101]
25-10-18.10:23:10.759 [pool-2-thread-6 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client) [6101]
25-10-18.10:23:10.824 [test-task-scheduler-1] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.10:23:10.980 [pool-2-thread-2 ] INFO  AgentRepository        - AiClientModelNode: 获取模型信息成功: 2000
25-10-18.10:23:11.016 [pool-2-thread-5 ] INFO  AgentRepository        - 查询modelId对应的mcpId列表 [5006, 5001]
25-10-18.10:23:11.152 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_api_1001
25-10-18.10:23:11.516 [HttpClient-11-Worker-2] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[completions=null, experimental={}, logging=null, prompts=PromptCapabilities[listChanged=false], resources=ResourceCapabilities[subscribe=false, listChanged=false], tools=ToolCapabilities[listChanged=false]], Info: Implementation[name=AIsearch, version=1.4.1] and Instructions null
25-10-18.10:23:11.604 [main            ] INFO  AiClientToolMcpNode    - SSE MCP Initialized: InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[completions=null, experimental={}, logging=null, prompts=PromptCapabilities[listChanged=false], resources=ResourceCapabilities[subscribe=false, listChanged=false], tools=ToolCapabilities[listChanged=false]], serverInfo=Implementation[name=AIsearch, version=1.4.1], instructions=null]
25-10-18.10:23:11.607 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5006
25-10-18.10:23:18.045 [HttpClient-12-Worker-2] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[completions=null, experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-csdn, version=1.0.0] and Instructions null
25-10-18.10:23:18.103 [main            ] INFO  AiClientToolMcpNode    - SSE MCP Initialized: InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[completions=null, experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-csdn, version=1.0.0], instructions=null]
25-10-18.10:23:18.103 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5001
25-10-18.10:23:18.103 [main            ] INFO  AiClientModelNode      - 开始初始化 ai client model
25-10-18.10:23:18.264 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_2000
25-10-18.10:23:18.280 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_advisor_4001
25-10-18.10:23:18.362 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_advisor_4004
25-10-18.10:23:18.456 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_6101
25-10-18.10:23:18.456 [main            ] INFO  AiAgentAutoConfiguration - 【AI-AGENT】启动成功，已加载客户端：null
25-10-18.10:23:27.109 [http-nio-8099-exec-1] INFO  [/]                    - Initializing Spring DispatcherServlet 'dispatcherServlet'
25-10-18.10:23:27.109 [http-nio-8099-exec-1] INFO  DispatcherServlet      - Initializing Servlet 'dispatcherServlet'
25-10-18.10:23:27.110 [http-nio-8099-exec-1] INFO  DispatcherServlet      - Completed initialization in 1 ms
25-10-18.10:23:29.612 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 开始保存画布信息: 流程图配置_2025/10/18 10:23:27
25-10-18.10:23:29.617 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 提取字段:[{"key":"","value":{"content":"test01"}}] ,agentName
25-10-18.10:23:29.620 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 提取字段:[{"key":"","value":{"content":"测试用例"}}] ,description
25-10-18.10:23:29.620 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 提取字段:"agent" ,channel
25-10-18.10:24:18.655 [MainHikariPool housekeeper] WARN  HikariPool             - MainHikariPool - Thread starvation or clock leap detected (housekeeper delta=1m8s418ms762µs600ns).
25-10-18.10:24:18.655 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.10:24:18.658 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 提取字段:"flowAgentExecuteStrategy" ,strategy
25-10-18.10:24:34.196 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.10:24:34.197 [test-task-scheduler-3] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.10:24:55.085 [test-task-scheduler-3] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.10:24:55.086 [test-task-scheduler-1] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.10:24:55.088 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 解析到agent信息: agentName=test01, description=测试用例, channel=agent, strategy=flowAgentExecuteStrategy
25-10-18.10:24:55.956 [test-task-scheduler-1] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.10:25:04.964 [test-task-scheduler-3] INFO  TaskJobService         - 开始清理无效的任务
25-10-18.10:25:14.103 [test-task-scheduler-4] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.10:25:19.625 [test-task-scheduler-3] INFO  TaskJobService         - 发现1个无效任务需要清理
25-10-18.10:25:20.692 [test-task-scheduler-3] INFO  TaskJobService         - 无效任务清理完成，当前活跃任务数: 0
25-10-18.10:25:20.693 [test-task-scheduler-4] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.10:26:12.513 [test-task-scheduler-4] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.10:26:12.539 [SpringApplicationShutdownHook] INFO  GracefulShutdown       - Commencing graceful shutdown. Waiting for active requests to complete
