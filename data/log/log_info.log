25-10-18.09:20:51.642 [main            ] INFO  Application            - Starting Application using Java 17.0.14 with PID 7220 (D:\java\ideapublic\ywz-ai-agent-station-study\ywz-ai-agent-station-study-app\target\classes started by ywz in D:\java\ideapublic\ywz-ai-agent-station-study)
25-10-18.09:20:51.644 [main            ] INFO  Application            - The following 1 profile is active: "dev"
25-10-18.09:20:54.009 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port 8099 (http)
25-10-18.09:20:54.026 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8099"]
25-10-18.09:20:54.027 [main            ] INFO  StandardService        - Starting service [Tomcat]
25-10-18.09:20:54.027 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/10.1.36]
25-10-18.09:20:54.151 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
25-10-18.09:20:54.152 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2452 ms
25-10-18.09:20:54.769 [main            ] INFO  PgVectorStore          - Using the vector table name: vector_store_openai. Is empty: false
25-10-18.09:20:54.776 [main            ] INFO  PgVectorStore          - Initializing PGVectorStore schema for table: vector_store_openai in schema: public
25-10-18.09:20:54.776 [main            ] INFO  PgVectorStore          - vectorTableValidationsEnabled false
25-10-18.09:20:55.495 [main            ] INFO  TaskJobAutoConfigBean  - xfg-wrench，任务调度器初始化完成。线程池大小: 5, 线程名前缀: test-task-scheduler-
25-10-18.09:20:55.506 [main            ] INFO  TaskJobService         - 开始初始化任务调度配置
25-10-18.09:20:55.542 [main            ] INFO  HikariDataSource       - MainHikariPool - Starting...
25-10-18.09:20:56.430 [main            ] INFO  HikariPool             - MainHikariPool - Added connection com.mysql.cj.jdbc.ConnectionImpl@34327c78
25-10-18.09:20:56.432 [main            ] INFO  HikariDataSource       - MainHikariPool - Start completed.
25-10-18.09:20:56.510 [main            ] INFO  TaskJobService         - 任务调度配置初始化完成，已加载任务数: 0
25-10-18.09:20:56.512 [main            ] INFO  TaskJobAutoConfigBean  - xfg-wrench，任务调度作业初始化完成。刷新间隔: 30000ms, 清理cron: 0 0/5 * * * ?
25-10-18.09:20:56.700 [main            ] INFO  OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
25-10-18.09:20:57.419 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8099"]
25-10-18.09:20:57.430 [main            ] INFO  TomcatWebServer        - Tomcat started on port 8099 (http) with context path '/'
25-10-18.09:20:57.443 [main            ] INFO  Application            - Started Application in 6.573 seconds (process running for 7.869)
25-10-18.09:20:57.445 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.09:20:57.452 [pool-2-thread-1 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_api) [6101]
25-10-18.09:20:57.452 [pool-2-thread-2 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_model) [6101]
25-10-18.09:20:57.453 [pool-2-thread-3 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_prompt) [6101]
25-10-18.09:20:57.453 [pool-2-thread-4 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_advisor) [6101]
25-10-18.09:20:57.453 [pool-2-thread-5 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_tool_mcp) [6101]
25-10-18.09:20:57.453 [pool-2-thread-6 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client) [6101]
25-10-18.09:20:57.509 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.09:20:57.608 [pool-2-thread-5 ] INFO  AgentRepository        - 查询modelId对应的mcpId列表 [5001, 5002]
25-10-18.09:20:57.612 [pool-2-thread-2 ] INFO  AgentRepository        - AiClientModelNode: 获取模型信息成功: 6001
25-10-18.09:20:58.038 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_api_1001
25-10-18.09:20:58.488 [HttpClient-11-Worker-2] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[completions=null, experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-csdn, version=1.0.0] and Instructions null
25-10-18.09:20:58.552 [main            ] INFO  AiClientToolMcpNode    - SSE MCP Initialized: InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[completions=null, experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-csdn, version=1.0.0], instructions=null]
25-10-18.09:20:58.555 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5001
25-10-18.09:20:59.019 [HttpClient-12-Worker-2] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[completions=null, experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-weixin, version=1.0.0] and Instructions null
25-10-18.09:20:59.056 [main            ] INFO  AiClientToolMcpNode    - SSE MCP Initialized: InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[completions=null, experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-weixin, version=1.0.0], instructions=null]
25-10-18.09:20:59.057 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5002
25-10-18.09:20:59.057 [main            ] INFO  AiClientModelNode      - 开始初始化 ai client model
25-10-18.09:20:59.209 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_6001
25-10-18.09:20:59.248 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_advisor_4001
25-10-18.09:20:59.471 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_advisor_4004
25-10-18.09:20:59.490 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_6101
25-10-18.09:20:59.490 [main            ] INFO  AiAgentAutoConfiguration - 【AI-AGENT】启动成功，已加载客户端：null
25-10-18.09:21:27.455 [test-task-scheduler-1] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.09:21:27.594 [test-task-scheduler-1] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.09:21:37.112 [http-nio-8099-exec-2] INFO  [/]                    - Initializing Spring DispatcherServlet 'dispatcherServlet'
25-10-18.09:21:37.112 [http-nio-8099-exec-2] INFO  DispatcherServlet      - Initializing Servlet 'dispatcherServlet'
25-10-18.09:21:37.113 [http-nio-8099-exec-2] INFO  DispatcherServlet      - Completed initialization in 1 ms
25-10-18.09:21:37.187 [http-nio-8099-exec-1] INFO  AiClientAdminController - 查询所有AI客户端配置
25-10-18.09:21:39.457 [http-nio-8099-exec-7] INFO  AiClientAdminController - 查询所有AI客户端配置
25-10-18.09:21:55.183 [http-nio-8099-exec-5] INFO  AiClientToolMcpAdminController - 查询所有MCP客户端配置
25-10-18.09:21:57.445 [test-task-scheduler-3] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.09:21:57.570 [test-task-scheduler-3] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.09:21:57.926 [http-nio-8099-exec-6] INFO  AiClientToolMcpAdminController - 查询所有MCP客户端配置
25-10-18.09:22:06.016 [http-nio-8099-exec-3] INFO  AiClientToolMcpAdminController - 查询所有MCP客户端配置
25-10-18.09:22:16.830 [http-nio-8099-exec-9] INFO  AiClientSystemPromptAdminController - 查询所有系统提示词配置
25-10-18.09:22:18.085 [http-nio-8099-exec-10] INFO  AiClientSystemPromptAdminController - 查询所有系统提示词配置
25-10-18.09:22:27.452 [test-task-scheduler-1] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.09:22:27.648 [test-task-scheduler-1] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.09:22:28.725 [http-nio-8099-exec-1] INFO  AiClientModelAdminController - 查询所有启用的AI客户端模型配置请求
25-10-18.09:22:29.584 [http-nio-8099-exec-7] INFO  AiClientModelAdminController - 查询所有启用的AI客户端模型配置请求
25-10-18.09:22:33.365 [http-nio-8099-exec-4] INFO  AiClientModelAdminController - 查询所有启用的AI客户端模型配置请求
25-10-18.09:22:40.055 [http-nio-8099-exec-3] INFO  AiClientAdvisorAdminController - 查询所有顾问配置
25-10-18.09:22:41.895 [http-nio-8099-exec-8] INFO  AiClientAdvisorAdminController - 查询所有顾问配置
25-10-18.09:22:48.845 [http-nio-8099-exec-10] INFO  AiAgentDrawAdminController - 开始保存画布信息: 流程图配置_2025/10/18 09:22:48
25-10-18.09:22:48.857 [http-nio-8099-exec-10] INFO  AiAgentDrawAdminController - 提取地段:[{"key":"","value":{"content":"test01"}}] ,agentName
25-10-18.09:22:48.860 [http-nio-8099-exec-10] INFO  AiAgentDrawAdminController - 提取地段:[{"key":"","value":{"content":"测试用例"}}] ,description
25-10-18.09:22:48.860 [http-nio-8099-exec-10] INFO  AiAgentDrawAdminController - 提取地段:"agent" ,channel
25-10-18.09:22:48.861 [http-nio-8099-exec-10] INFO  AiAgentDrawAdminController - 提取地段:"flowAgentExecuteStrategy" ,strategy
25-10-18.09:22:48.861 [http-nio-8099-exec-10] INFO  AiAgentDrawAdminController - 解析到agent信息: agentName=test01, description=测试用例, channel=agent, strategy=flowAgentExecuteStrategy
25-10-18.09:22:52.531 [http-nio-8099-exec-10] INFO  AiAgentDrawAdminController - 开始更新Client关联表数据
25-10-18.09:23:26.999 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.09:23:26.999 [MainHikariPool housekeeper] WARN  HikariPool             - MainHikariPool - Thread starvation or clock leap detected (housekeeper delta=1m421ms588µs800ns).
25-10-18.09:24:28.297 [MainHikariPool housekeeper] WARN  HikariPool             - MainHikariPool - Thread starvation or clock leap detected (housekeeper delta=1m1s297ms511µs800ns).
25-10-18.09:24:31.688 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.09:24:31.688 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.09:26:26.885 [MainHikariPool housekeeper] WARN  HikariPool             - MainHikariPool - Thread starvation or clock leap detected (housekeeper delta=1m58s587ms493µs600ns).
25-10-18.09:26:26.885 [test-task-scheduler-5] INFO  TaskJobService         - 开始清理无效的任务
25-10-18.09:26:26.885 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.09:26:26.886 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.09:28:24.454 [MainHikariPool housekeeper] WARN  HikariPool             - MainHikariPool - Thread starvation or clock leap detected (housekeeper delta=1m57s569ms637µs300ns).
25-10-18.09:28:24.455 [test-task-scheduler-5] INFO  TaskJobService         - 发现1个无效任务需要清理
25-10-18.09:28:24.455 [test-task-scheduler-5] INFO  TaskJobService         - 无效任务清理完成，当前活跃任务数: 0
25-10-18.09:28:24.456 [http-nio-8099-exec-10] INFO  DrawConfigParser       - 开始解析边关系，总共6条边
25-10-18.09:28:24.457 [http-nio-8099-exec-10] WARN  DrawConfigParser       - 找不到节点信息，sourceNodeId: start_0, targetNodeId: agent_QyqMj
25-10-18.09:28:24.457 [http-nio-8099-exec-10] WARN  DrawConfigParser       - 节点缺少有效的引用ID，跳过关系: agent() -> client(6101)
25-10-18.09:28:24.458 [http-nio-8099-exec-10] INFO  DrawConfigParser       - 创建配置关系: client(6101) -> tool_mcp(5001), sourcePortId: client_select__8DZjR
25-10-18.09:28:24.459 [http-nio-8099-exec-10] INFO  DrawConfigParser       - 成功创建配置关系[1]: client:6101 -> tool_mcp:5001
25-10-18.09:28:24.459 [http-nio-8099-exec-10] INFO  DrawConfigParser       - 创建配置关系: client(6101) -> prompt(6003), sourcePortId: client_select__8DZjR
25-10-18.09:28:24.459 [http-nio-8099-exec-10] INFO  DrawConfigParser       - 成功创建配置关系[2]: client:6101 -> prompt:6003
25-10-18.09:28:24.459 [http-nio-8099-exec-10] INFO  DrawConfigParser       - 创建配置关系: client(6101) -> model(2000), sourcePortId: client_select__8DZjR
25-10-18.09:28:24.459 [http-nio-8099-exec-10] INFO  DrawConfigParser       - 成功创建配置关系[3]: client:6101 -> model:2000
25-10-18.09:28:24.459 [http-nio-8099-exec-10] INFO  DrawConfigParser       - 创建配置关系: model(2000) -> advisor(4001), sourcePortId: model_select_729ASo
25-10-18.09:28:24.459 [http-nio-8099-exec-10] INFO  DrawConfigParser       - 成功创建配置关系[4]: model:2000 -> advisor:4001
25-10-18.09:28:24.459 [http-nio-8099-exec-10] INFO  DrawConfigParser       - 边关系解析完成，处理0条边，跳过2条，生成4条有效配置关系
25-10-18.09:28:24.459 [http-nio-8099-exec-10] INFO  DrawConfigParser       - 节点类型统计结果
25-10-18.09:28:24.459 [http-nio-8099-exec-10] INFO  DrawConfigParser       - 节点类型: advisor, 数量: 1 1有引用id
25-10-18.09:28:24.459 [http-nio-8099-exec-10] ERROR AiAgentDrawAdminController - 解析和保存配置关系数据失败，configId: 4645e2adf05f4356a44cfea0f1cc472f
java.lang.NullPointerException: Cannot invoke "java.lang.Integer.intValue()" because the return value of "java.util.HashMap.get(Object)" is null
	at com.ywzai.trigger.http.admin.util.DrawConfigParser.validateAndLogResults(DrawConfigParser.java:88)
	at com.ywzai.trigger.http.admin.util.DrawConfigParser.parseConfigData(DrawConfigParser.java:50)
	at com.ywzai.trigger.http.admin.AiAgentDrawAdminController.saveDrawConfig(AiAgentDrawAdminController.java:141)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727)
	at com.ywzai.trigger.http.admin.AiAgentDrawAdminController$$SpringCGLIB$$0.saveDrawConfig(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:257)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1088)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:842)
25-10-18.09:28:24.461 [http-nio-8099-exec-10] INFO  AiAgentDrawAdminController - 开始更新agent_flow_config表数据
25-10-18.09:28:24.462 [http-nio-8099-exec-10] ERROR AiAgentDrawAdminController - 解析配置数据失败: Cannot invoke "com.fasterxml.jackson.databind.JsonNode.get(String)" because "inputsValues" is null
25-10-18.09:28:24.501 [SpringApplicationShutdownHook] INFO  GracefulShutdown       - Commencing graceful shutdown. Waiting for active requests to complete
25-10-18.09:28:24.506 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.09:28:24.506 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.09:28:24.607 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.09:28:24.607 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.09:28:24.709 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.09:28:24.709 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.09:28:24.749 [tomcat-shutdown ] INFO  GracefulShutdown       - Graceful shutdown complete
25-10-18.09:28:24.753 [SpringApplicationShutdownHook] INFO  TaskJobService         - 开始停止所有任务
25-10-18.09:28:24.753 [SpringApplicationShutdownHook] INFO  TaskJobService         - 所有任务已停止
25-10-18.09:28:24.768 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.09:28:24.770 [SpringApplicationShutdownHook] INFO  HikariDataSource       - MainHikariPool - Shutdown initiated...
25-10-18.09:28:50.279 [main            ] INFO  Application            - Starting Application using Java 17.0.14 with PID 25984 (D:\java\ideapublic\ywz-ai-agent-station-study\ywz-ai-agent-station-study-app\target\classes started by ywz in D:\java\ideapublic\ywz-ai-agent-station-study)
25-10-18.09:28:50.280 [main            ] INFO  Application            - The following 1 profile is active: "dev"
25-10-18.09:28:51.848 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port 8099 (http)
25-10-18.09:28:51.862 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8099"]
25-10-18.09:28:51.865 [main            ] INFO  StandardService        - Starting service [Tomcat]
25-10-18.09:28:51.865 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/10.1.36]
25-10-18.09:28:51.958 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
25-10-18.09:28:51.958 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1642 ms
25-10-18.09:28:52.378 [main            ] INFO  PgVectorStore          - Using the vector table name: vector_store_openai. Is empty: false
25-10-18.09:28:52.383 [main            ] INFO  PgVectorStore          - Initializing PGVectorStore schema for table: vector_store_openai in schema: public
25-10-18.09:28:52.383 [main            ] INFO  PgVectorStore          - vectorTableValidationsEnabled false
25-10-18.09:28:52.839 [main            ] INFO  TaskJobAutoConfigBean  - xfg-wrench，任务调度器初始化完成。线程池大小: 5, 线程名前缀: test-task-scheduler-
25-10-18.09:28:52.843 [main            ] INFO  TaskJobService         - 开始初始化任务调度配置
25-10-18.09:28:52.859 [main            ] INFO  HikariDataSource       - MainHikariPool - Starting...
25-10-18.09:28:57.171 [main            ] INFO  HikariPool             - MainHikariPool - Added connection com.mysql.cj.jdbc.ConnectionImpl@200733f1
25-10-18.09:28:57.173 [main            ] INFO  HikariDataSource       - MainHikariPool - Start completed.
25-10-18.09:28:57.287 [main            ] INFO  TaskJobService         - 任务调度配置初始化完成，已加载任务数: 0
25-10-18.09:28:57.287 [main            ] INFO  TaskJobAutoConfigBean  - xfg-wrench，任务调度作业初始化完成。刷新间隔: 30000ms, 清理cron: 0 0/5 * * * ?
25-10-18.09:28:57.373 [main            ] INFO  OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
25-10-18.09:28:57.837 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8099"]
25-10-18.09:28:57.845 [main            ] INFO  TomcatWebServer        - Tomcat started on port 8099 (http) with context path '/'
25-10-18.09:28:57.854 [main            ] INFO  Application            - Started Application in 8.091 seconds (process running for 8.939)
25-10-18.09:28:57.855 [test-task-scheduler-1] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.09:28:57.859 [pool-2-thread-1 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_api) [6101]
25-10-18.09:28:57.859 [pool-2-thread-2 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_model) [6101]
25-10-18.09:28:57.859 [pool-2-thread-3 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_prompt) [6101]
25-10-18.09:28:57.859 [pool-2-thread-4 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_advisor) [6101]
25-10-18.09:28:57.860 [pool-2-thread-5 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_tool_mcp) [6101]
25-10-18.09:28:57.860 [pool-2-thread-6 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client) [6101]
25-10-18.09:28:58.092 [test-task-scheduler-1] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.09:28:58.504 [pool-2-thread-5 ] INFO  AgentRepository        - 查询modelId对应的mcpId列表 [5001, 5002]
25-10-18.09:28:58.604 [pool-2-thread-2 ] INFO  AgentRepository        - AiClientModelNode: 获取模型信息成功: 6001
25-10-18.09:28:58.923 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_api_1001
25-10-18.09:28:59.348 [HttpClient-11-Worker-0] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[completions=null, experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-csdn, version=1.0.0] and Instructions null
25-10-18.09:28:59.398 [main            ] INFO  AiClientToolMcpNode    - SSE MCP Initialized: InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[completions=null, experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-csdn, version=1.0.0], instructions=null]
25-10-18.09:28:59.400 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5001
25-10-18.09:28:59.535 [HttpClient-12-Worker-2] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[completions=null, experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-weixin, version=1.0.0] and Instructions null
25-10-18.09:28:59.567 [main            ] INFO  AiClientToolMcpNode    - SSE MCP Initialized: InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[completions=null, experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-weixin, version=1.0.0], instructions=null]
25-10-18.09:28:59.567 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5002
25-10-18.09:28:59.568 [main            ] INFO  AiClientModelNode      - 开始初始化 ai client model
25-10-18.09:28:59.709 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_6001
25-10-18.09:28:59.732 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_advisor_4001
25-10-18.09:28:59.847 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_advisor_4004
25-10-18.09:28:59.856 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_6101
25-10-18.09:28:59.856 [main            ] INFO  AiAgentAutoConfiguration - 【AI-AGENT】启动成功，已加载客户端：null
25-10-18.09:29:04.407 [http-nio-8099-exec-1] INFO  [/]                    - Initializing Spring DispatcherServlet 'dispatcherServlet'
25-10-18.09:29:04.407 [http-nio-8099-exec-1] INFO  DispatcherServlet      - Initializing Servlet 'dispatcherServlet'
25-10-18.09:29:04.408 [http-nio-8099-exec-1] INFO  DispatcherServlet      - Completed initialization in 1 ms
25-10-18.09:29:04.529 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 开始保存画布信息: 流程图配置_2025/10/18 09:29:04
25-10-18.09:29:04.536 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 提取地段:[{"key":"","value":{"content":"test01"}}] ,agentName
25-10-18.09:29:04.542 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 提取地段:[{"key":"","value":{"content":"测试用例"}}] ,description
25-10-18.09:29:04.542 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 提取地段:"agent" ,channel
25-10-18.09:29:04.542 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 提取地段:"flowAgentExecuteStrategy" ,strategy
25-10-18.09:29:04.542 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 解析到agent信息: agentName=test01, description=测试用例, channel=agent, strategy=flowAgentExecuteStrategy
25-10-18.09:29:04.749 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 开始更新Client关联表数据
25-10-18.09:29:13.651 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 开始解析边关系，总共6条边
25-10-18.09:29:13.651 [http-nio-8099-exec-1] WARN  DrawConfigParser       - 找不到节点信息，sourceNodeId: start_0, targetNodeId: agent_QyqMj
25-10-18.09:29:13.651 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 创建配置关系: agent(test01) -> client(6101), sourcePortId: agent_output
25-10-18.09:29:13.651 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 成功创建配置关系[1]: agent:test01 -> client:6101
25-10-18.09:29:13.651 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 创建配置关系: client(6101) -> tool_mcp(5001), sourcePortId: client_select__8DZjR
25-10-18.09:29:13.651 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 成功创建配置关系[2]: client:6101 -> tool_mcp:5001
25-10-18.09:29:13.652 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 创建配置关系: client(6101) -> prompt(6003), sourcePortId: client_select__8DZjR
25-10-18.09:29:13.652 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 成功创建配置关系[3]: client:6101 -> prompt:6003
25-10-18.09:29:13.652 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 创建配置关系: client(6101) -> model(2000), sourcePortId: client_select__8DZjR
25-10-18.09:29:13.652 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 成功创建配置关系[4]: client:6101 -> model:2000
25-10-18.09:29:13.652 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 创建配置关系: model(2000) -> advisor(4001), sourcePortId: model_select_729ASo
25-10-18.09:29:13.652 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 成功创建配置关系[5]: model:2000 -> advisor:4001
25-10-18.09:29:13.652 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 边关系解析完成，处理0条边，跳过1条，生成5条有效配置关系
25-10-18.09:29:13.652 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 节点类型统计结果
25-10-18.09:29:13.652 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 节点类型: advisor, 数量: 1 1有引用id
25-10-18.09:29:13.652 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 节点类型: agent, 数量: 1 1有引用id
25-10-18.09:29:13.652 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 节点类型: tool_mcp, 数量: 1 1有引用id
25-10-18.09:29:13.652 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 节点类型: client, 数量: 1 1有引用id
25-10-18.09:29:13.652 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 节点类型: model, 数量: 1 1有引用id
25-10-18.09:29:13.652 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 节点类型: prompt, 数量: 1 1有引用id
25-10-18.09:29:13.652 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 节点配置关系统计结果
25-10-18.09:29:13.652 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 关系类型: agent -> client, 数量: 1
25-10-18.09:29:13.652 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 关系类型: client -> model, 数量: 1
25-10-18.09:29:13.652 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 关系类型: client -> tool_mcp, 数量: 1
25-10-18.09:29:13.652 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 关系类型: model -> advisor, 数量: 1
25-10-18.09:29:13.652 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 关系类型: client -> prompt, 数量: 1
25-10-18.09:29:13.652 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 总计: 6个节点，6条边，5条有效配置关系
25-10-18.09:29:13.652 [http-nio-8099-exec-1] INFO  DrawConfigParser       - === 统计结束 ===
25-10-18.09:29:13.652 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 解析配置数据完成，生成5条关系
25-10-18.09:29:14.987 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 开始更新agent_flow_config表数据
25-10-18.09:29:14.988 [http-nio-8099-exec-1] ERROR AiAgentDrawAdminController - 解析配置数据失败: Cannot invoke "com.fasterxml.jackson.databind.JsonNode.get(String)" because "inputsValues" is null
25-10-18.09:29:27.855 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.09:29:28.094 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.09:29:57.858 [test-task-scheduler-3] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.09:29:57.927 [test-task-scheduler-3] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.09:30:00.013 [test-task-scheduler-1] INFO  TaskJobService         - 开始清理无效的任务
25-10-18.09:30:00.080 [test-task-scheduler-1] INFO  TaskJobService         - 发现1个无效任务需要清理
25-10-18.09:30:00.080 [test-task-scheduler-1] INFO  TaskJobService         - 无效任务清理完成，当前活跃任务数: 0
25-10-18.09:30:27.869 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.09:30:28.100 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.09:30:57.854 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.09:31:00.766 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.09:31:27.861 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.09:31:28.106 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.09:31:57.867 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.09:31:58.108 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.09:32:27.868 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.09:32:28.110 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.09:32:57.857 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.09:32:58.010 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.09:33:27.855 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.09:33:28.013 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.09:33:57.860 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.09:33:58.016 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.09:34:27.866 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.09:34:27.939 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.09:34:57.854 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.09:34:58.135 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.09:35:00.010 [test-task-scheduler-5] INFO  TaskJobService         - 开始清理无效的任务
25-10-18.09:35:00.122 [test-task-scheduler-5] INFO  TaskJobService         - 发现1个无效任务需要清理
25-10-18.09:35:00.122 [test-task-scheduler-5] INFO  TaskJobService         - 无效任务清理完成，当前活跃任务数: 0
25-10-18.09:35:27.861 [test-task-scheduler-4] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.09:35:27.997 [test-task-scheduler-4] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.09:35:57.866 [test-task-scheduler-4] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.09:35:58.034 [test-task-scheduler-4] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.09:36:02.814 [SpringApplicationShutdownHook] INFO  GracefulShutdown       - Commencing graceful shutdown. Waiting for active requests to complete
25-10-18.09:36:03.053 [tomcat-shutdown ] INFO  GracefulShutdown       - Graceful shutdown complete
25-10-18.09:36:03.057 [SpringApplicationShutdownHook] INFO  TaskJobService         - 开始停止所有任务
25-10-18.09:36:03.057 [SpringApplicationShutdownHook] INFO  TaskJobService         - 所有任务已停止
25-10-18.09:36:03.059 [SpringApplicationShutdownHook] INFO  HikariDataSource       - MainHikariPool - Shutdown initiated...
25-10-18.09:37:32.671 [main            ] INFO  Application            - Starting Application using Java 17.0.14 with PID 11316 (D:\java\ideapublic\ywz-ai-agent-station-study\ywz-ai-agent-station-study-app\target\classes started by ywz in D:\java\ideapublic\ywz-ai-agent-station-study)
25-10-18.09:37:32.672 [main            ] INFO  Application            - The following 1 profile is active: "dev"
25-10-18.09:37:34.261 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port 8099 (http)
25-10-18.09:37:34.274 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8099"]
25-10-18.09:37:34.277 [main            ] INFO  StandardService        - Starting service [Tomcat]
25-10-18.09:37:34.278 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/10.1.36]
25-10-18.09:37:34.372 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
25-10-18.09:37:34.372 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1667 ms
25-10-18.09:37:34.801 [main            ] INFO  PgVectorStore          - Using the vector table name: vector_store_openai. Is empty: false
25-10-18.09:37:34.806 [main            ] INFO  PgVectorStore          - Initializing PGVectorStore schema for table: vector_store_openai in schema: public
25-10-18.09:37:34.807 [main            ] INFO  PgVectorStore          - vectorTableValidationsEnabled false
25-10-18.09:37:35.272 [main            ] INFO  TaskJobAutoConfigBean  - xfg-wrench，任务调度器初始化完成。线程池大小: 5, 线程名前缀: test-task-scheduler-
25-10-18.09:37:35.276 [main            ] INFO  TaskJobService         - 开始初始化任务调度配置
25-10-18.09:37:35.291 [main            ] INFO  HikariDataSource       - MainHikariPool - Starting...
25-10-18.09:37:36.841 [main            ] INFO  HikariPool             - MainHikariPool - Added connection com.mysql.cj.jdbc.ConnectionImpl@b9803a3
25-10-18.09:37:36.844 [main            ] INFO  HikariDataSource       - MainHikariPool - Start completed.
25-10-18.09:37:36.959 [main            ] INFO  TaskJobService         - 任务调度配置初始化完成，已加载任务数: 0
25-10-18.09:37:36.960 [main            ] INFO  TaskJobAutoConfigBean  - xfg-wrench，任务调度作业初始化完成。刷新间隔: 30000ms, 清理cron: 0 0/5 * * * ?
25-10-18.09:37:37.048 [main            ] INFO  OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
25-10-18.09:37:37.469 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8099"]
25-10-18.09:37:37.477 [main            ] INFO  TomcatWebServer        - Tomcat started on port 8099 (http) with context path '/'
25-10-18.09:37:37.486 [main            ] INFO  Application            - Started Application in 5.326 seconds (process running for 6.128)
25-10-18.09:37:37.487 [test-task-scheduler-1] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.09:37:37.496 [pool-2-thread-1 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_api) [6101]
25-10-18.09:37:37.498 [pool-2-thread-2 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_model) [6101]
25-10-18.09:37:37.498 [pool-2-thread-3 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_prompt) [6101]
25-10-18.09:37:37.498 [pool-2-thread-4 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_advisor) [6101]
25-10-18.09:37:37.498 [pool-2-thread-5 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_tool_mcp) [6101]
25-10-18.09:37:37.499 [pool-2-thread-6 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client) [6101]
25-10-18.09:37:37.644 [test-task-scheduler-1] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.09:37:37.865 [pool-2-thread-5 ] INFO  AgentRepository        - 查询modelId对应的mcpId列表 [5001, 5002]
25-10-18.09:37:37.998 [pool-2-thread-2 ] INFO  AgentRepository        - AiClientModelNode: 获取模型信息成功: 6001
25-10-18.09:37:38.184 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_api_1001
25-10-18.09:37:38.713 [HttpClient-11-Worker-1] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[completions=null, experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-csdn, version=1.0.0] and Instructions null
25-10-18.09:37:38.789 [main            ] INFO  AiClientToolMcpNode    - SSE MCP Initialized: InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[completions=null, experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-csdn, version=1.0.0], instructions=null]
25-10-18.09:37:38.791 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5001
25-10-18.09:37:38.995 [HttpClient-12-Worker-1] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[completions=null, experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-weixin, version=1.0.0] and Instructions null
25-10-18.09:37:39.044 [main            ] INFO  AiClientToolMcpNode    - SSE MCP Initialized: InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[completions=null, experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-weixin, version=1.0.0], instructions=null]
25-10-18.09:37:39.044 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5002
25-10-18.09:37:39.044 [main            ] INFO  AiClientModelNode      - 开始初始化 ai client model
25-10-18.09:37:39.154 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_6001
25-10-18.09:37:39.170 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_advisor_4001
25-10-18.09:37:39.248 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_advisor_4004
25-10-18.09:37:39.256 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_6101
25-10-18.09:37:39.256 [main            ] INFO  AiAgentAutoConfiguration - 【AI-AGENT】启动成功，已加载客户端：null
25-10-18.09:37:48.534 [http-nio-8099-exec-1] INFO  [/]                    - Initializing Spring DispatcherServlet 'dispatcherServlet'
25-10-18.09:37:48.534 [http-nio-8099-exec-1] INFO  DispatcherServlet      - Initializing Servlet 'dispatcherServlet'
25-10-18.09:37:48.535 [http-nio-8099-exec-1] INFO  DispatcherServlet      - Completed initialization in 1 ms
25-10-18.09:37:48.823 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 开始保存画布信息: 流程图配置_2025/10/18 09:37:48
25-10-18.09:37:48.830 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 提取地段:[{"key":"","value":{"content":"test01"}}] ,agentName
25-10-18.09:37:48.833 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 提取地段:[{"key":"","value":{"content":"测试用例"}}] ,description
25-10-18.09:37:48.834 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 提取地段:"agent" ,channel
25-10-18.09:37:48.834 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 提取地段:"flowAgentExecuteStrategy" ,strategy
25-10-18.09:37:48.834 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 解析到agent信息: agentName=test01, description=测试用例, channel=agent, strategy=flowAgentExecuteStrategy
25-10-18.09:37:49.336 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 开始更新Client关联表数据
25-10-18.09:37:55.152 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 开始解析边关系，总共6条边
25-10-18.09:37:55.153 [http-nio-8099-exec-1] WARN  DrawConfigParser       - 找不到节点信息，sourceNodeId: start_0, targetNodeId: agent_QyqMj
25-10-18.09:37:55.153 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 创建配置关系: client(6101) -> tool_mcp(5001), sourcePortId: client_select__8DZjR
25-10-18.09:37:55.153 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 成功创建配置关系[1]: client:6101 -> tool_mcp:5001
25-10-18.09:37:55.153 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 创建配置关系: client(6101) -> prompt(6003), sourcePortId: client_select__8DZjR
25-10-18.09:37:55.153 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 成功创建配置关系[2]: client:6101 -> prompt:6003
25-10-18.09:37:55.153 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 创建配置关系: client(6101) -> model(2000), sourcePortId: client_select__8DZjR
25-10-18.09:37:55.153 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 成功创建配置关系[3]: client:6101 -> model:2000
25-10-18.09:37:55.153 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 创建配置关系: model(2000) -> advisor(4001), sourcePortId: model_select_729ASo
25-10-18.09:37:55.153 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 成功创建配置关系[4]: model:2000 -> advisor:4001
25-10-18.09:37:55.153 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 边关系解析完成，处理0条边，跳过2条，生成4条有效配置关系
25-10-18.09:37:55.153 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 节点类型统计结果
25-10-18.09:37:55.153 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 节点类型: advisor, 数量: 1 1有引用id
25-10-18.09:37:55.153 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 节点类型: agent, 数量: 1 1有引用id
25-10-18.09:37:55.153 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 节点类型: tool_mcp, 数量: 1 1有引用id
25-10-18.09:37:55.153 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 节点类型: client, 数量: 1 1有引用id
25-10-18.09:37:55.153 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 节点类型: model, 数量: 1 1有引用id
25-10-18.09:37:55.154 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 节点类型: prompt, 数量: 1 1有引用id
25-10-18.09:37:55.154 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 节点配置关系统计结果
25-10-18.09:37:55.154 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 关系类型: client -> model, 数量: 1
25-10-18.09:37:55.154 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 关系类型: client -> tool_mcp, 数量: 1
25-10-18.09:37:55.154 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 关系类型: model -> advisor, 数量: 1
25-10-18.09:37:55.154 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 关系类型: client -> prompt, 数量: 1
25-10-18.09:37:55.154 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 总计: 6个节点，6条边，4条有效配置关系
25-10-18.09:37:55.154 [http-nio-8099-exec-1] INFO  DrawConfigParser       - === 统计结束 ===
25-10-18.09:37:55.154 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 解析配置数据完成，生成4条关系
25-10-18.09:37:56.398 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 开始更新agent_flow_config表数据
25-10-18.09:39:56.805 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.09:39:56.805 [MainHikariPool housekeeper] WARN  HikariPool             - MainHikariPool - Thread starvation or clock leap detected (housekeeper delta=2m19s848ms970µs800ns).
25-10-18.09:39:56.808 [http-nio-8099-exec-1] ERROR AiAgentDrawAdminController - 解析配置数据失败: Cannot invoke "com.fasterxml.jackson.databind.JsonNode.get(String)" because "inputsValues" is null
25-10-18.09:39:56.834 [SpringApplicationShutdownHook] INFO  GracefulShutdown       - Commencing graceful shutdown. Waiting for active requests to complete
25-10-18.09:39:56.864 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.09:39:56.864 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.09:39:56.893 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.09:39:56.894 [test-task-scheduler-3] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.09:39:56.927 [test-task-scheduler-3] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.09:39:56.928 [test-task-scheduler-3] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.09:39:56.962 [test-task-scheduler-3] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.09:39:57.082 [tomcat-shutdown ] INFO  GracefulShutdown       - Graceful shutdown complete
25-10-18.09:39:57.086 [SpringApplicationShutdownHook] INFO  TaskJobService         - 开始停止所有任务
25-10-18.09:39:57.086 [SpringApplicationShutdownHook] INFO  TaskJobService         - 所有任务已停止
25-10-18.09:39:57.087 [SpringApplicationShutdownHook] INFO  HikariDataSource       - MainHikariPool - Shutdown initiated...
25-10-18.09:40:58.483 [main            ] INFO  Application            - Starting Application using Java 17.0.14 with PID 27288 (D:\java\ideapublic\ywz-ai-agent-station-study\ywz-ai-agent-station-study-app\target\classes started by ywz in D:\java\ideapublic\ywz-ai-agent-station-study)
25-10-18.09:40:58.484 [main            ] INFO  Application            - The following 1 profile is active: "dev"
25-10-18.09:40:59.956 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port 8099 (http)
25-10-18.09:40:59.969 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8099"]
25-10-18.09:40:59.971 [main            ] INFO  StandardService        - Starting service [Tomcat]
25-10-18.09:40:59.972 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/10.1.36]
25-10-18.09:41:00.065 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
25-10-18.09:41:00.065 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1546 ms
25-10-18.09:41:00.443 [main            ] INFO  PgVectorStore          - Using the vector table name: vector_store_openai. Is empty: false
25-10-18.09:41:00.449 [main            ] INFO  PgVectorStore          - Initializing PGVectorStore schema for table: vector_store_openai in schema: public
25-10-18.09:41:00.449 [main            ] INFO  PgVectorStore          - vectorTableValidationsEnabled false
25-10-18.09:41:00.901 [main            ] INFO  TaskJobAutoConfigBean  - xfg-wrench，任务调度器初始化完成。线程池大小: 5, 线程名前缀: test-task-scheduler-
25-10-18.09:41:00.905 [main            ] INFO  TaskJobService         - 开始初始化任务调度配置
25-10-18.09:41:00.918 [main            ] INFO  HikariDataSource       - MainHikariPool - Starting...
25-10-18.09:41:02.048 [main            ] INFO  HikariPool             - MainHikariPool - Added connection com.mysql.cj.jdbc.ConnectionImpl@521259d5
25-10-18.09:41:02.050 [main            ] INFO  HikariDataSource       - MainHikariPool - Start completed.
25-10-18.09:41:02.168 [main            ] INFO  TaskJobService         - 任务调度配置初始化完成，已加载任务数: 0
25-10-18.09:41:02.170 [main            ] INFO  TaskJobAutoConfigBean  - xfg-wrench，任务调度作业初始化完成。刷新间隔: 30000ms, 清理cron: 0 0/5 * * * ?
25-10-18.09:41:02.245 [main            ] INFO  OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
25-10-18.09:41:02.675 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8099"]
25-10-18.09:41:02.682 [main            ] INFO  TomcatWebServer        - Tomcat started on port 8099 (http) with context path '/'
25-10-18.09:41:02.691 [main            ] INFO  Application            - Started Application in 4.696 seconds (process running for 5.471)
25-10-18.09:41:02.692 [test-task-scheduler-1] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.09:41:02.696 [pool-2-thread-1 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_api) [6101]
25-10-18.09:41:02.696 [pool-2-thread-2 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_model) [6101]
25-10-18.09:41:02.697 [pool-2-thread-4 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_advisor) [6101]
25-10-18.09:41:02.697 [pool-2-thread-3 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_prompt) [6101]
25-10-18.09:41:02.697 [pool-2-thread-5 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_tool_mcp) [6101]
25-10-18.09:41:02.698 [pool-2-thread-6 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client) [6101]
25-10-18.09:41:02.868 [test-task-scheduler-1] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.09:41:03.173 [pool-2-thread-5 ] INFO  AgentRepository        - 查询modelId对应的mcpId列表 [5001, 5002]
25-10-18.09:41:03.481 [pool-2-thread-2 ] INFO  AgentRepository        - AiClientModelNode: 获取模型信息成功: 6001
25-10-18.09:41:03.696 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_api_1001
25-10-18.09:41:04.198 [HttpClient-11-Worker-1] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[completions=null, experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-csdn, version=1.0.0] and Instructions null
25-10-18.09:41:04.302 [main            ] INFO  AiClientToolMcpNode    - SSE MCP Initialized: InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[completions=null, experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-csdn, version=1.0.0], instructions=null]
25-10-18.09:41:04.304 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5001
25-10-18.09:41:04.471 [HttpClient-12-Worker-2] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[completions=null, experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-weixin, version=1.0.0] and Instructions null
25-10-18.09:41:04.506 [main            ] INFO  AiClientToolMcpNode    - SSE MCP Initialized: InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[completions=null, experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-weixin, version=1.0.0], instructions=null]
25-10-18.09:41:04.506 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5002
25-10-18.09:41:04.506 [main            ] INFO  AiClientModelNode      - 开始初始化 ai client model
25-10-18.09:41:04.605 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_6001
25-10-18.09:41:04.620 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_advisor_4001
25-10-18.09:41:04.701 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_advisor_4004
25-10-18.09:41:04.711 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_6101
25-10-18.09:41:04.711 [main            ] INFO  AiAgentAutoConfiguration - 【AI-AGENT】启动成功，已加载客户端：null
25-10-18.09:41:10.369 [http-nio-8099-exec-1] INFO  [/]                    - Initializing Spring DispatcherServlet 'dispatcherServlet'
25-10-18.09:41:10.369 [http-nio-8099-exec-1] INFO  DispatcherServlet      - Initializing Servlet 'dispatcherServlet'
25-10-18.09:41:10.370 [http-nio-8099-exec-1] INFO  DispatcherServlet      - Completed initialization in 1 ms
25-10-18.09:41:10.544 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 开始保存画布信息: 流程图配置_2025/10/18 09:41:10
25-10-18.09:41:10.550 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 提取地段:[{"key":"","value":{"content":"test01"}}] ,agentName
25-10-18.09:41:10.553 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 提取地段:[{"key":"","value":{"content":"测试用例"}}] ,description
25-10-18.09:41:10.554 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 提取地段:"agent" ,channel
25-10-18.09:41:10.554 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 提取地段:"flowAgentExecuteStrategy" ,strategy
25-10-18.09:41:10.554 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 解析到agent信息: agentName=test01, description=测试用例, channel=agent, strategy=flowAgentExecuteStrategy
25-10-18.09:41:11.059 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 开始更新Client关联表数据
25-10-18.09:41:13.382 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 开始解析边关系，总共6条边
25-10-18.09:41:13.383 [http-nio-8099-exec-1] WARN  DrawConfigParser       - 找不到节点信息，sourceNodeId: start_0, targetNodeId: agent_QyqMj
25-10-18.09:41:13.383 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 创建配置关系: client(6101) -> tool_mcp(5001), sourcePortId: client_select__8DZjR
25-10-18.09:41:13.383 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 成功创建配置关系[1]: client:6101 -> tool_mcp:5001
25-10-18.09:41:13.383 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 创建配置关系: client(6101) -> prompt(6003), sourcePortId: client_select__8DZjR
25-10-18.09:41:13.383 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 成功创建配置关系[2]: client:6101 -> prompt:6003
25-10-18.09:41:13.383 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 创建配置关系: client(6101) -> model(2000), sourcePortId: client_select__8DZjR
25-10-18.09:41:13.383 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 成功创建配置关系[3]: client:6101 -> model:2000
25-10-18.09:41:13.383 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 创建配置关系: model(2000) -> advisor(4001), sourcePortId: model_select_729ASo
25-10-18.09:41:13.383 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 成功创建配置关系[4]: model:2000 -> advisor:4001
25-10-18.09:41:13.383 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 边关系解析完成，处理0条边，跳过2条，生成4条有效配置关系
25-10-18.09:41:13.383 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 节点类型统计结果
25-10-18.09:41:13.383 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 节点类型: advisor, 数量: 1 1有引用id
25-10-18.09:41:13.383 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 节点类型: agent, 数量: 1 1有引用id
25-10-18.09:41:13.383 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 节点类型: tool_mcp, 数量: 1 1有引用id
25-10-18.09:41:13.383 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 节点类型: client, 数量: 1 1有引用id
25-10-18.09:41:13.384 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 节点类型: model, 数量: 1 1有引用id
25-10-18.09:41:13.384 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 节点类型: prompt, 数量: 1 1有引用id
25-10-18.09:41:13.384 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 节点配置关系统计结果
25-10-18.09:41:13.384 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 关系类型: client -> model, 数量: 1
25-10-18.09:41:13.384 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 关系类型: client -> tool_mcp, 数量: 1
25-10-18.09:41:13.384 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 关系类型: model -> advisor, 数量: 1
25-10-18.09:41:13.384 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 关系类型: client -> prompt, 数量: 1
25-10-18.09:41:13.384 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 总计: 6个节点，6条边，4条有效配置关系
25-10-18.09:41:13.384 [http-nio-8099-exec-1] INFO  DrawConfigParser       - === 统计结束 ===
25-10-18.09:41:13.384 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 解析配置数据完成，生成4条关系
25-10-18.09:41:14.540 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 开始更新agent_flow_config表数据
25-10-18.09:41:14.542 [http-nio-8099-exec-1] ERROR AiAgentDrawAdminController - 解析配置数据失败: Cannot invoke "com.fasterxml.jackson.databind.JsonNode.iterator()" because "dataNode" is null
25-10-18.09:41:32.696 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.09:41:32.869 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.09:41:41.217 [SpringApplicationShutdownHook] INFO  GracefulShutdown       - Commencing graceful shutdown. Waiting for active requests to complete
25-10-18.09:41:41.453 [tomcat-shutdown ] INFO  GracefulShutdown       - Graceful shutdown complete
25-10-18.09:41:41.457 [SpringApplicationShutdownHook] INFO  TaskJobService         - 开始停止所有任务
25-10-18.09:41:41.457 [SpringApplicationShutdownHook] INFO  TaskJobService         - 所有任务已停止
25-10-18.09:41:41.458 [SpringApplicationShutdownHook] INFO  HikariDataSource       - MainHikariPool - Shutdown initiated...
25-10-18.09:44:51.369 [main            ] INFO  Application            - Starting Application using Java 17.0.14 with PID 23900 (D:\java\ideapublic\ywz-ai-agent-station-study\ywz-ai-agent-station-study-app\target\classes started by ywz in D:\java\ideapublic\ywz-ai-agent-station-study)
25-10-18.09:44:51.371 [main            ] INFO  Application            - The following 1 profile is active: "dev"
25-10-18.09:44:52.944 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port 8099 (http)
25-10-18.09:44:52.958 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8099"]
25-10-18.09:44:52.960 [main            ] INFO  StandardService        - Starting service [Tomcat]
25-10-18.09:44:52.960 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/10.1.36]
25-10-18.09:44:53.057 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
25-10-18.09:44:53.058 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1652 ms
25-10-18.09:44:53.465 [main            ] INFO  PgVectorStore          - Using the vector table name: vector_store_openai. Is empty: false
25-10-18.09:44:53.470 [main            ] INFO  PgVectorStore          - Initializing PGVectorStore schema for table: vector_store_openai in schema: public
25-10-18.09:44:53.470 [main            ] INFO  PgVectorStore          - vectorTableValidationsEnabled false
25-10-18.09:44:53.911 [main            ] INFO  TaskJobAutoConfigBean  - xfg-wrench，任务调度器初始化完成。线程池大小: 5, 线程名前缀: test-task-scheduler-
25-10-18.09:44:53.916 [main            ] INFO  TaskJobService         - 开始初始化任务调度配置
25-10-18.09:44:53.930 [main            ] INFO  HikariDataSource       - MainHikariPool - Starting...
25-10-18.09:44:55.004 [main            ] INFO  HikariPool             - MainHikariPool - Added connection com.mysql.cj.jdbc.ConnectionImpl@200733f1
25-10-18.09:44:55.007 [main            ] INFO  HikariDataSource       - MainHikariPool - Start completed.
25-10-18.09:44:55.123 [main            ] INFO  TaskJobService         - 任务调度配置初始化完成，已加载任务数: 0
25-10-18.09:44:55.124 [main            ] INFO  TaskJobAutoConfigBean  - xfg-wrench，任务调度作业初始化完成。刷新间隔: 30000ms, 清理cron: 0 0/5 * * * ?
25-10-18.09:44:55.208 [main            ] INFO  OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
25-10-18.09:44:55.697 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8099"]
25-10-18.09:44:55.706 [main            ] INFO  TomcatWebServer        - Tomcat started on port 8099 (http) with context path '/'
25-10-18.09:44:55.716 [main            ] INFO  Application            - Started Application in 4.842 seconds (process running for 5.719)
25-10-18.09:44:55.718 [test-task-scheduler-1] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.09:44:55.723 [pool-2-thread-1 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_api) [6101]
25-10-18.09:44:55.723 [pool-2-thread-2 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_model) [6101]
25-10-18.09:44:55.723 [pool-2-thread-3 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_prompt) [6101]
25-10-18.09:44:55.723 [pool-2-thread-4 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_advisor) [6101]
25-10-18.09:44:55.723 [pool-2-thread-5 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_tool_mcp) [6101]
25-10-18.09:44:55.724 [pool-2-thread-6 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client) [6101]
25-10-18.09:44:55.783 [test-task-scheduler-1] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.09:44:55.912 [main            ] ERROR SpringApplication      - Application run failed
java.lang.RuntimeException: java.util.concurrent.CompletionException: org.mybatis.spring.MyBatisSystemException: Expected one result (or null) to be returned by selectOne(), but found: 2
	at com.ywzai.config.AiAgentAutoConfiguration.onApplicationEvent(AiAgentAutoConfiguration.java:60)
	at com.ywzai.config.AiAgentAutoConfiguration.onApplicationEvent(AiAgentAutoConfiguration.java:1)
	at com.ywzai.config.AiAgentAutoConfiguration$$SpringCGLIB$$0.onApplicationEvent(<generated>)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.boot.context.event.EventPublishingRunListener.ready(EventPublishingRunListener.java:109)
	at org.springframework.boot.SpringApplicationRunListeners.lambda$ready$6(SpringApplicationRunListeners.java:80)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.boot.SpringApplicationRunListeners.doWithListeners(SpringApplicationRunListeners.java:118)
	at org.springframework.boot.SpringApplicationRunListeners.doWithListeners(SpringApplicationRunListeners.java:112)
	at org.springframework.boot.SpringApplicationRunListeners.ready(SpringApplicationRunListeners.java:80)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:332)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.ywzai.Application.main(Application.java:17)
Caused by: java.util.concurrent.CompletionException: org.mybatis.spring.MyBatisSystemException: Expected one result (or null) to be returned by selectOne(), but found: 2
	at java.base/java.util.concurrent.CompletableFuture.encodeThrowable(CompletableFuture.java:315)
	at java.base/java.util.concurrent.CompletableFuture.completeThrowable(CompletableFuture.java:320)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run$$$capture(CompletableFuture.java:1770)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: org.mybatis.spring.MyBatisSystemException: Expected one result (or null) to be returned by selectOne(), but found: 2
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:99)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:347)
	at jdk.proxy2/jdk.proxy2.$Proxy78.selectOne(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.selectOne(SqlSessionTemplate.java:154)
	at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:87)
	at org.apache.ibatis.binding.MapperProxy$PlainMethodInvoker.invoke(MapperProxy.java:141)
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:86)
	at jdk.proxy2/jdk.proxy2.$Proxy81.queryModelIdByClientId(Unknown Source)
	at com.ywzai.infrastructure.adapter.repository.AgentRepository.getAiClientApiVOListByClientIds(AgentRepository.java:412)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:138)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727)
	at com.ywzai.infrastructure.adapter.repository.AgentRepository$$SpringCGLIB$$0.getAiClientApiVOListByClientIds(<generated>)
	at com.ywzai.domain.agent.service.armory.business.data.impl.AiClientLoadDataStrategy.lambda$0(AiClientLoadDataStrategy.java:39)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run$$$capture(CompletableFuture.java:1768)
	... 4 common frames omitted
Caused by: org.apache.ibatis.exceptions.TooManyResultsException: Expected one result (or null) to be returned by selectOne(), but found: 2
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectOne(DefaultSqlSession.java:81)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:333)
	... 24 common frames omitted
25-10-18.09:44:55.917 [main            ] INFO  GracefulShutdown       - Commencing graceful shutdown. Waiting for active requests to complete
25-10-18.09:44:55.917 [tomcat-shutdown ] INFO  Http11NioProtocol      - Pausing ProtocolHandler ["http-nio-8099"]
25-10-18.09:44:56.185 [tomcat-shutdown ] INFO  GracefulShutdown       - Graceful shutdown complete
25-10-18.09:44:56.186 [main            ] INFO  Http11NioProtocol      - Stopping ProtocolHandler ["http-nio-8099"]
25-10-18.09:44:56.189 [main            ] INFO  TaskJobService         - 开始停止所有任务
25-10-18.09:44:56.189 [main            ] INFO  TaskJobService         - 所有任务已停止
25-10-18.09:44:56.190 [main            ] INFO  HikariDataSource       - MainHikariPool - Shutdown initiated...
25-10-18.09:44:56.642 [main            ] INFO  HikariDataSource       - MainHikariPool - Shutdown completed.
25-10-18.09:52:23.237 [main            ] INFO  Application            - Starting Application using Java 17.0.14 with PID 16424 (D:\java\ideapublic\ywz-ai-agent-station-study\ywz-ai-agent-station-study-app\target\classes started by ywz in D:\java\ideapublic\ywz-ai-agent-station-study)
25-10-18.09:52:23.238 [main            ] INFO  Application            - The following 1 profile is active: "dev"
25-10-18.09:52:24.714 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port 8099 (http)
25-10-18.09:52:24.728 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8099"]
25-10-18.09:52:24.729 [main            ] INFO  StandardService        - Starting service [Tomcat]
25-10-18.09:52:24.729 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/10.1.36]
25-10-18.09:52:24.818 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
25-10-18.09:52:24.819 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1545 ms
25-10-18.09:52:25.194 [main            ] INFO  PgVectorStore          - Using the vector table name: vector_store_openai. Is empty: false
25-10-18.09:52:25.199 [main            ] INFO  PgVectorStore          - Initializing PGVectorStore schema for table: vector_store_openai in schema: public
25-10-18.09:52:25.199 [main            ] INFO  PgVectorStore          - vectorTableValidationsEnabled false
25-10-18.09:52:25.644 [main            ] INFO  TaskJobAutoConfigBean  - xfg-wrench，任务调度器初始化完成。线程池大小: 5, 线程名前缀: test-task-scheduler-
25-10-18.09:52:25.648 [main            ] INFO  TaskJobService         - 开始初始化任务调度配置
25-10-18.09:52:25.662 [main            ] INFO  HikariDataSource       - MainHikariPool - Starting...
25-10-18.09:52:26.715 [main            ] INFO  HikariPool             - MainHikariPool - Added connection com.mysql.cj.jdbc.ConnectionImpl@550e57d6
25-10-18.09:52:26.718 [main            ] INFO  HikariDataSource       - MainHikariPool - Start completed.
25-10-18.09:52:26.802 [main            ] INFO  TaskJobService         - 任务调度配置初始化完成，已加载任务数: 0
25-10-18.09:52:26.803 [main            ] INFO  TaskJobAutoConfigBean  - xfg-wrench，任务调度作业初始化完成。刷新间隔: 30000ms, 清理cron: 0 0/5 * * * ?
25-10-18.09:52:26.876 [main            ] INFO  OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
25-10-18.09:52:27.294 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8099"]
25-10-18.09:52:27.302 [main            ] INFO  TomcatWebServer        - Tomcat started on port 8099 (http) with context path '/'
25-10-18.09:52:27.311 [main            ] INFO  Application            - Started Application in 4.58 seconds (process running for 5.365)
25-10-18.09:52:27.312 [test-task-scheduler-1] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.09:52:27.316 [pool-2-thread-1 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_api) [6101]
25-10-18.09:52:27.317 [pool-2-thread-2 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_model) [6101]
25-10-18.09:52:27.317 [pool-2-thread-3 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_prompt) [6101]
25-10-18.09:52:27.317 [pool-2-thread-4 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_advisor) [6101]
25-10-18.09:52:27.317 [pool-2-thread-5 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_tool_mcp) [6101]
25-10-18.09:52:27.318 [pool-2-thread-6 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client) [6101]
25-10-18.09:52:27.500 [test-task-scheduler-1] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.09:52:27.814 [pool-2-thread-2 ] INFO  AgentRepository        - AiClientModelNode: 获取模型信息成功: 2000
25-10-18.09:52:28.013 [pool-2-thread-5 ] INFO  AgentRepository        - 查询modelId对应的mcpId列表 [5006]
25-10-18.09:52:28.241 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_api_1001
25-10-18.09:52:28.862 [HttpClient-11-Worker-1] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[completions=null, experimental={}, logging=null, prompts=PromptCapabilities[listChanged=false], resources=ResourceCapabilities[subscribe=false, listChanged=false], tools=ToolCapabilities[listChanged=false]], Info: Implementation[name=AIsearch, version=1.4.1] and Instructions null
25-10-18.09:52:28.947 [main            ] INFO  AiClientToolMcpNode    - SSE MCP Initialized: InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[completions=null, experimental={}, logging=null, prompts=PromptCapabilities[listChanged=false], resources=ResourceCapabilities[subscribe=false, listChanged=false], tools=ToolCapabilities[listChanged=false]], serverInfo=Implementation[name=AIsearch, version=1.4.1], instructions=null]
25-10-18.09:52:28.950 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5006
25-10-18.09:52:28.950 [main            ] INFO  AiClientModelNode      - 开始初始化 ai client model
25-10-18.09:52:29.043 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_2000
25-10-18.09:52:29.058 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_advisor_4001
25-10-18.09:52:29.143 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_advisor_4004
25-10-18.09:52:29.212 [main            ] ERROR LoggingFailureAnalysisReporter - 

***************************
APPLICATION FAILED TO START
***************************

Description:

A component required a bean named 'ai_client_model_6001' that could not be found.


Action:

Consider defining a bean named 'ai_client_model_6001' in your configuration.

25-10-18.09:52:29.214 [main            ] INFO  GracefulShutdown       - Commencing graceful shutdown. Waiting for active requests to complete
25-10-18.09:52:29.215 [tomcat-shutdown ] INFO  Http11NioProtocol      - Pausing ProtocolHandler ["http-nio-8099"]
25-10-18.09:52:29.457 [tomcat-shutdown ] INFO  GracefulShutdown       - Graceful shutdown complete
25-10-18.09:52:29.457 [main            ] INFO  Http11NioProtocol      - Stopping ProtocolHandler ["http-nio-8099"]
25-10-18.09:52:29.460 [main            ] INFO  TaskJobService         - 开始停止所有任务
25-10-18.09:52:29.461 [main            ] INFO  TaskJobService         - 所有任务已停止
25-10-18.09:52:29.462 [main            ] INFO  HikariDataSource       - MainHikariPool - Shutdown initiated...
25-10-18.09:52:29.676 [main            ] INFO  HikariDataSource       - MainHikariPool - Shutdown completed.
25-10-18.10:01:02.237 [main            ] INFO  Application            - Starting Application using Java 17.0.14 with PID 1748 (D:\java\ideapublic\ywz-ai-agent-station-study\ywz-ai-agent-station-study-app\target\classes started by ywz in D:\java\ideapublic\ywz-ai-agent-station-study)
25-10-18.10:01:02.238 [main            ] INFO  Application            - The following 1 profile is active: "dev"
25-10-18.10:01:03.812 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port 8099 (http)
25-10-18.10:01:03.826 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8099"]
25-10-18.10:01:03.829 [main            ] INFO  StandardService        - Starting service [Tomcat]
25-10-18.10:01:03.829 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/10.1.36]
25-10-18.10:01:03.922 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
25-10-18.10:01:03.922 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1649 ms
25-10-18.10:01:04.322 [main            ] INFO  PgVectorStore          - Using the vector table name: vector_store_openai. Is empty: false
25-10-18.10:01:04.327 [main            ] INFO  PgVectorStore          - Initializing PGVectorStore schema for table: vector_store_openai in schema: public
25-10-18.10:01:04.327 [main            ] INFO  PgVectorStore          - vectorTableValidationsEnabled false
25-10-18.10:01:04.796 [main            ] INFO  TaskJobAutoConfigBean  - xfg-wrench，任务调度器初始化完成。线程池大小: 5, 线程名前缀: test-task-scheduler-
25-10-18.10:01:04.800 [main            ] INFO  TaskJobService         - 开始初始化任务调度配置
25-10-18.10:01:04.814 [main            ] INFO  HikariDataSource       - MainHikariPool - Starting...
25-10-18.10:01:06.046 [main            ] INFO  HikariPool             - MainHikariPool - Added connection com.mysql.cj.jdbc.ConnectionImpl@550e57d6
25-10-18.10:01:06.049 [main            ] INFO  HikariDataSource       - MainHikariPool - Start completed.
25-10-18.10:01:06.144 [main            ] INFO  TaskJobService         - 任务调度配置初始化完成，已加载任务数: 0
25-10-18.10:01:06.146 [main            ] INFO  TaskJobAutoConfigBean  - xfg-wrench，任务调度作业初始化完成。刷新间隔: 30000ms, 清理cron: 0 0/5 * * * ?
25-10-18.10:01:06.218 [main            ] INFO  OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
25-10-18.10:01:06.661 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8099"]
25-10-18.10:01:06.668 [main            ] INFO  TomcatWebServer        - Tomcat started on port 8099 (http) with context path '/'
25-10-18.10:01:06.678 [main            ] INFO  Application            - Started Application in 4.922 seconds (process running for 5.729)
25-10-18.10:01:06.679 [test-task-scheduler-1] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.10:01:06.682 [pool-2-thread-1 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_api) [6101]
25-10-18.10:01:06.682 [pool-2-thread-2 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_model) [6101]
25-10-18.10:01:06.683 [pool-2-thread-3 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_prompt) [6101]
25-10-18.10:01:06.683 [pool-2-thread-4 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_advisor) [6101]
25-10-18.10:01:06.683 [pool-2-thread-5 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_tool_mcp) [6101]
25-10-18.10:01:06.684 [pool-2-thread-6 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client) [6101]
25-10-18.10:01:06.865 [test-task-scheduler-1] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.10:01:07.312 [pool-2-thread-5 ] INFO  AgentRepository        - 查询modelId对应的mcpId列表 [5006]
25-10-18.10:01:07.478 [pool-2-thread-2 ] INFO  AgentRepository        - AiClientModelNode: 获取模型信息成功: 2000
25-10-18.10:01:07.584 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_api_1001
25-10-18.10:01:07.980 [HttpClient-11-Worker-1] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[completions=null, experimental={}, logging=null, prompts=PromptCapabilities[listChanged=false], resources=ResourceCapabilities[subscribe=false, listChanged=false], tools=ToolCapabilities[listChanged=false]], Info: Implementation[name=AIsearch, version=1.4.1] and Instructions null
25-10-18.10:01:08.051 [main            ] INFO  AiClientToolMcpNode    - SSE MCP Initialized: InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[completions=null, experimental={}, logging=null, prompts=PromptCapabilities[listChanged=false], resources=ResourceCapabilities[subscribe=false, listChanged=false], tools=ToolCapabilities[listChanged=false]], serverInfo=Implementation[name=AIsearch, version=1.4.1], instructions=null]
25-10-18.10:01:08.054 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5006
25-10-18.10:01:08.054 [main            ] INFO  AiClientModelNode      - 开始初始化 ai client model
25-10-18.10:01:08.144 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_2000
25-10-18.10:01:08.158 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_advisor_4001
25-10-18.10:01:08.238 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_advisor_4004
25-10-18.10:01:08.296 [main            ] ERROR LoggingFailureAnalysisReporter - 

***************************
APPLICATION FAILED TO START
***************************

Description:

A component required a bean named 'ai_client_tool_mcp_5001' that could not be found.


Action:

Consider defining a bean named 'ai_client_tool_mcp_5001' in your configuration.

25-10-18.10:01:08.299 [main            ] INFO  GracefulShutdown       - Commencing graceful shutdown. Waiting for active requests to complete
25-10-18.10:01:08.300 [tomcat-shutdown ] INFO  Http11NioProtocol      - Pausing ProtocolHandler ["http-nio-8099"]
25-10-18.10:01:08.537 [tomcat-shutdown ] INFO  GracefulShutdown       - Graceful shutdown complete
25-10-18.10:01:08.538 [main            ] INFO  Http11NioProtocol      - Stopping ProtocolHandler ["http-nio-8099"]
25-10-18.10:01:08.541 [main            ] INFO  TaskJobService         - 开始停止所有任务
25-10-18.10:01:08.542 [main            ] INFO  TaskJobService         - 所有任务已停止
25-10-18.10:01:08.543 [main            ] INFO  HikariDataSource       - MainHikariPool - Shutdown initiated...
25-10-18.10:01:08.827 [main            ] INFO  HikariDataSource       - MainHikariPool - Shutdown completed.
25-10-18.10:11:52.159 [main            ] INFO  Application            - Starting Application using Java 17.0.14 with PID 4836 (D:\java\ideapublic\ywz-ai-agent-station-study\ywz-ai-agent-station-study-app\target\classes started by ywz in D:\java\ideapublic\ywz-ai-agent-station-study)
25-10-18.10:11:52.160 [main            ] INFO  Application            - The following 1 profile is active: "dev"
25-10-18.10:11:53.650 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port 8099 (http)
25-10-18.10:11:53.664 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8099"]
25-10-18.10:11:53.666 [main            ] INFO  StandardService        - Starting service [Tomcat]
25-10-18.10:11:53.666 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/10.1.36]
25-10-18.10:11:53.760 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
25-10-18.10:11:53.760 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1567 ms
25-10-18.10:11:54.157 [main            ] INFO  PgVectorStore          - Using the vector table name: vector_store_openai. Is empty: false
25-10-18.10:11:54.172 [main            ] INFO  PgVectorStore          - Initializing PGVectorStore schema for table: vector_store_openai in schema: public
25-10-18.10:11:54.172 [main            ] INFO  PgVectorStore          - vectorTableValidationsEnabled false
25-10-18.10:11:54.618 [main            ] INFO  TaskJobAutoConfigBean  - xfg-wrench，任务调度器初始化完成。线程池大小: 5, 线程名前缀: test-task-scheduler-
25-10-18.10:11:54.622 [main            ] INFO  TaskJobService         - 开始初始化任务调度配置
25-10-18.10:11:54.636 [main            ] INFO  HikariDataSource       - MainHikariPool - Starting...
25-10-18.10:11:59.346 [main            ] INFO  HikariPool             - MainHikariPool - Added connection com.mysql.cj.jdbc.ConnectionImpl@1e70a007
25-10-18.10:11:59.347 [main            ] INFO  HikariDataSource       - MainHikariPool - Start completed.
25-10-18.10:11:59.429 [main            ] INFO  TaskJobService         - 任务调度配置初始化完成，已加载任务数: 0
25-10-18.10:11:59.430 [main            ] INFO  TaskJobAutoConfigBean  - xfg-wrench，任务调度作业初始化完成。刷新间隔: 30000ms, 清理cron: 0 0/5 * * * ?
25-10-18.10:11:59.503 [main            ] INFO  OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
25-10-18.10:11:59.939 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8099"]
25-10-18.10:11:59.947 [main            ] INFO  TomcatWebServer        - Tomcat started on port 8099 (http) with context path '/'
25-10-18.10:11:59.956 [main            ] INFO  Application            - Started Application in 8.306 seconds (process running for 9.083)
25-10-18.10:11:59.958 [test-task-scheduler-1] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.10:11:59.961 [pool-2-thread-1 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_api) [6101]
25-10-18.10:11:59.961 [pool-2-thread-2 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_model) [6101]
25-10-18.10:11:59.961 [pool-2-thread-3 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_prompt) [6101]
25-10-18.10:11:59.962 [pool-2-thread-4 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_advisor) [6101]
25-10-18.10:11:59.962 [pool-2-thread-5 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_tool_mcp) [6101]
25-10-18.10:11:59.962 [pool-2-thread-6 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client) [6101]
25-10-18.10:12:00.165 [test-task-scheduler-1] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.10:12:00.744 [pool-2-thread-5 ] INFO  AgentRepository        - 查询modelId对应的mcpId列表 [5006, 5001]
25-10-18.10:12:00.775 [pool-2-thread-2 ] INFO  AgentRepository        - AiClientModelNode: 获取模型信息成功: 2000
25-10-18.10:12:00.991 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_api_1001
25-10-18.10:12:01.530 [HttpClient-11-Worker-2] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[completions=null, experimental={}, logging=null, prompts=PromptCapabilities[listChanged=false], resources=ResourceCapabilities[subscribe=false, listChanged=false], tools=ToolCapabilities[listChanged=false]], Info: Implementation[name=AIsearch, version=1.4.1] and Instructions null
25-10-18.10:12:01.612 [main            ] INFO  AiClientToolMcpNode    - SSE MCP Initialized: InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[completions=null, experimental={}, logging=null, prompts=PromptCapabilities[listChanged=false], resources=ResourceCapabilities[subscribe=false, listChanged=false], tools=ToolCapabilities[listChanged=false]], serverInfo=Implementation[name=AIsearch, version=1.4.1], instructions=null]
25-10-18.10:12:01.616 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5006
25-10-18.10:12:01.915 [HttpClient-12-Worker-0] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[completions=null, experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-csdn, version=1.0.0] and Instructions null
25-10-18.10:12:01.961 [main            ] INFO  AiClientToolMcpNode    - SSE MCP Initialized: InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[completions=null, experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-csdn, version=1.0.0], instructions=null]
25-10-18.10:12:01.961 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5001
25-10-18.10:12:01.962 [main            ] INFO  AiClientModelNode      - 开始初始化 ai client model
25-10-18.10:12:02.136 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_2000
25-10-18.10:12:02.152 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_advisor_4001
25-10-18.10:12:02.227 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_advisor_4004
25-10-18.10:12:02.283 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_6101
25-10-18.10:12:02.284 [main            ] INFO  AiAgentAutoConfiguration - 【AI-AGENT】启动成功，已加载客户端：null
25-10-18.10:12:10.416 [http-nio-8099-exec-1] INFO  [/]                    - Initializing Spring DispatcherServlet 'dispatcherServlet'
25-10-18.10:12:10.416 [http-nio-8099-exec-1] INFO  DispatcherServlet      - Initializing Servlet 'dispatcherServlet'
25-10-18.10:12:10.418 [http-nio-8099-exec-1] INFO  DispatcherServlet      - Completed initialization in 2 ms
25-10-18.10:12:12.146 [http-nio-8099-exec-2] INFO  AiAgentDrawAdminController - 开始保存画布信息: 流程图配置_2025/10/18 10:12:10
25-10-18.10:12:12.151 [http-nio-8099-exec-2] INFO  AiAgentDrawAdminController - 提取地段:[{"key":"","value":{"content":"test01"}}] ,agentName
25-10-18.10:12:12.156 [http-nio-8099-exec-2] INFO  AiAgentDrawAdminController - 提取地段:[{"key":"","value":{"content":"测试用例"}}] ,description
25-10-18.10:12:12.157 [http-nio-8099-exec-2] INFO  AiAgentDrawAdminController - 提取地段:"agent" ,channel
25-10-18.10:12:12.157 [http-nio-8099-exec-2] INFO  AiAgentDrawAdminController - 提取地段:"flowAgentExecuteStrategy" ,strategy
25-10-18.10:12:12.157 [http-nio-8099-exec-2] INFO  AiAgentDrawAdminController - 解析到agent信息: agentName=test01, description=测试用例, channel=agent, strategy=flowAgentExecuteStrategy
25-10-18.10:12:12.657 [http-nio-8099-exec-2] INFO  AiAgentDrawAdminController - 开始更新Client关联表数据
25-10-18.10:12:20.042 [http-nio-8099-exec-2] INFO  DrawConfigParser       - 开始解析边关系，总共6条边
25-10-18.10:12:20.042 [http-nio-8099-exec-2] WARN  DrawConfigParser       - 找不到节点信息，sourceNodeId: start_0, targetNodeId: agent_QyqMj
25-10-18.10:12:20.042 [http-nio-8099-exec-2] INFO  DrawConfigParser       - 创建配置关系: client(6101) -> tool_mcp(5001), sourcePortId: client_select__8DZjR
25-10-18.10:12:20.042 [http-nio-8099-exec-2] INFO  DrawConfigParser       - 成功创建配置关系[1]: client:6101 -> tool_mcp:5001
25-10-18.10:12:20.042 [http-nio-8099-exec-2] INFO  DrawConfigParser       - 创建配置关系: client(6101) -> prompt(6003), sourcePortId: client_select__8DZjR
25-10-18.10:12:20.042 [http-nio-8099-exec-2] INFO  DrawConfigParser       - 成功创建配置关系[2]: client:6101 -> prompt:6003
25-10-18.10:12:20.042 [http-nio-8099-exec-2] INFO  DrawConfigParser       - 创建配置关系: client(6101) -> model(2000), sourcePortId: client_select__8DZjR
25-10-18.10:12:20.042 [http-nio-8099-exec-2] INFO  DrawConfigParser       - 成功创建配置关系[3]: client:6101 -> model:2000
25-10-18.10:12:20.042 [http-nio-8099-exec-2] INFO  DrawConfigParser       - 创建配置关系: model(2000) -> advisor(4001), sourcePortId: model_select_729ASo
25-10-18.10:12:20.042 [http-nio-8099-exec-2] INFO  DrawConfigParser       - 成功创建配置关系[4]: model:2000 -> advisor:4001
25-10-18.10:12:20.042 [http-nio-8099-exec-2] INFO  DrawConfigParser       - 边关系解析完成，处理0条边，跳过2条，生成4条有效配置关系
25-10-18.10:12:20.042 [http-nio-8099-exec-2] INFO  DrawConfigParser       - 节点类型统计结果
25-10-18.10:12:20.042 [http-nio-8099-exec-2] INFO  DrawConfigParser       - 节点类型: advisor, 数量: 1 1有引用id
25-10-18.10:12:20.042 [http-nio-8099-exec-2] INFO  DrawConfigParser       - 节点类型: agent, 数量: 1 1有引用id
25-10-18.10:12:20.042 [http-nio-8099-exec-2] INFO  DrawConfigParser       - 节点类型: tool_mcp, 数量: 1 1有引用id
25-10-18.10:12:20.043 [http-nio-8099-exec-2] INFO  DrawConfigParser       - 节点类型: client, 数量: 1 1有引用id
25-10-18.10:12:20.043 [http-nio-8099-exec-2] INFO  DrawConfigParser       - 节点类型: model, 数量: 1 1有引用id
25-10-18.10:12:20.043 [http-nio-8099-exec-2] INFO  DrawConfigParser       - 节点类型: prompt, 数量: 1 1有引用id
25-10-18.10:12:20.043 [http-nio-8099-exec-2] INFO  DrawConfigParser       - 节点配置关系统计结果
25-10-18.10:12:20.043 [http-nio-8099-exec-2] INFO  DrawConfigParser       - 关系类型: client -> model, 数量: 1
25-10-18.10:12:20.043 [http-nio-8099-exec-2] INFO  DrawConfigParser       - 关系类型: client -> tool_mcp, 数量: 1
25-10-18.10:12:20.043 [http-nio-8099-exec-2] INFO  DrawConfigParser       - 关系类型: model -> advisor, 数量: 1
25-10-18.10:12:20.043 [http-nio-8099-exec-2] INFO  DrawConfigParser       - 关系类型: client -> prompt, 数量: 1
25-10-18.10:12:20.043 [http-nio-8099-exec-2] INFO  DrawConfigParser       - 总计: 6个节点，6条边，4条有效配置关系
25-10-18.10:12:20.043 [http-nio-8099-exec-2] INFO  DrawConfigParser       - === 统计结束 ===
25-10-18.10:12:20.043 [http-nio-8099-exec-2] INFO  DrawConfigParser       - 解析配置数据完成，生成4条关系
25-10-18.10:12:20.134 [http-nio-8099-exec-2] INFO  AiAgentDrawAdminController - 已存在相同的记录, 不需要重复插入: AiClientConfig(id=null, sourceType=client, sourceId=6101, targetType=tool_mcp, targetId=5001, extParam={"sourcePortId":"client_select__8DZjR","sourceTitle":"Client_1","targetTitle":"ToolMcp_1"}, status=1, createTime=2025-10-18T10:12:20.042465800, updateTime=2025-10-18T10:12:20.042465800)
25-10-18.10:12:20.235 [http-nio-8099-exec-2] INFO  AiAgentDrawAdminController - 已存在相同的记录, 不需要重复插入: AiClientConfig(id=null, sourceType=client, sourceId=6101, targetType=prompt, targetId=6003, extParam={"sourcePortId":"client_select__8DZjR","sourceTitle":"Client_1","targetTitle":"Prompt_1"}, status=1, createTime=2025-10-18T10:12:20.042465800, updateTime=2025-10-18T10:12:20.042465800)
25-10-18.10:12:20.284 [http-nio-8099-exec-2] INFO  AiAgentDrawAdminController - 已存在相同的记录, 不需要重复插入: AiClientConfig(id=null, sourceType=client, sourceId=6101, targetType=model, targetId=2000, extParam={"sourcePortId":"client_select__8DZjR","sourceTitle":"Client_1","targetTitle":"Model_1"}, status=1, createTime=2025-10-18T10:12:20.042465800, updateTime=2025-10-18T10:12:20.042465800)
25-10-18.10:12:20.337 [http-nio-8099-exec-2] INFO  AiAgentDrawAdminController - 已存在相同的记录, 不需要重复插入: AiClientConfig(id=null, sourceType=model, sourceId=2000, targetType=advisor, targetId=4001, extParam={"sourcePortId":"model_select_729ASo","sourceTitle":"Model_1","targetTitle":"Advisor_1"}, status=1, createTime=2025-10-18T10:12:20.042465800, updateTime=2025-10-18T10:12:20.042465800)
25-10-18.10:12:20.337 [http-nio-8099-exec-2] INFO  AiAgentDrawAdminController - 开始更新agent_flow_config表数据
25-10-18.10:12:20.338 [http-nio-8099-exec-2] INFO  AiAgentDrawAdminController - 提取地段:[{"key":"client_type_kOprhJ","value":"DEFAULT"}] ,clientType
25-10-18.10:12:20.338 [http-nio-8099-exec-2] INFO  AiAgentDrawAdminController - 提取地段:"6101" ,clientId
25-10-18.10:12:20.338 [http-nio-8099-exec-2] INFO  AiAgentDrawAdminController - 提取地段:"6101-CSDN发帖&通知" ,clientName
25-10-18.10:12:20.338 [http-nio-8099-exec-2] INFO  AiAgentDrawAdminController - 提取字段:[{"key":"sequence_CagJ4V","value":1}] ,sequence
25-10-18.10:12:20.338 [http-nio-8099-exec-2] INFO  AiAgentDrawAdminController - 提取地段:[{"key":"step_prompt_-0aB4W","value":""}] ,stepPrompt
25-10-18.10:12:20.647 [http-nio-8099-exec-2] ERROR AiAgentDrawAdminController - 解析和保存agent-client关系数据失败，agentId: 53532146
org.springframework.dao.DataIntegrityViolationException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'sequence' cannot be null
### The error may exist in file [D:\java\ideapublic\ywz-ai-agent-station-study\ywz-ai-agent-station-study-app\target\classes\mybatis\mapper\ai_agent_flow_config_mapper.xml]
### The error may involve com.ywzai.infrastructure.dao.IAiAgentFlowConfigDao.insert-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO ai_agent_flow_config(agent_id, client_id, client_name, client_type, step_prompt, sequence, status,                                          create_time)         VALUES (?, ?, ?, ?, ?, ?, ?, NOW())
### Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'sequence' cannot be null
; Column 'sequence' cannot be null
	at org.springframework.jdbc.support.SQLExceptionSubclassTranslator.doTranslate(SQLExceptionSubclassTranslator.java:97)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:107)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:116)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:93)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:347)
	at jdk.proxy2/jdk.proxy2.$Proxy78.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:224)
	at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:62)
	at org.apache.ibatis.binding.MapperProxy$PlainMethodInvoker.invoke(MapperProxy.java:141)
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:86)
	at jdk.proxy2/jdk.proxy2.$Proxy88.insert(Unknown Source)
	at com.ywzai.trigger.http.admin.AiAgentDrawAdminController.saveDrawConfig(AiAgentDrawAdminController.java:171)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727)
	at com.ywzai.trigger.http.admin.AiAgentDrawAdminController$$SpringCGLIB$$0.saveDrawConfig(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:257)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1088)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Column 'sequence' cannot be null
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:371)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:48)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:75)
	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:50)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:76)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:333)
	... 69 common frames omitted
25-10-18.10:12:29.969 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.10:12:30.151 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.10:12:59.965 [test-task-scheduler-3] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.10:13:00.171 [test-task-scheduler-3] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.10:13:29.956 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.10:13:30.016 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.10:13:59.962 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.10:14:00.103 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.10:14:29.965 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.10:14:30.101 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.10:14:30.380 [http-nio-8099-exec-5] INFO  AiClientAdminController - 查询所有AI客户端配置
25-10-18.10:14:34.995 [http-nio-8099-exec-7] INFO  AiClientAdminController - 查询所有AI客户端配置
25-10-18.10:14:59.963 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.10:15:00.010 [test-task-scheduler-4] INFO  TaskJobService         - 开始清理无效的任务
25-10-18.10:15:00.180 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.10:15:00.181 [test-task-scheduler-4] INFO  TaskJobService         - 发现1个无效任务需要清理
25-10-18.10:15:00.181 [test-task-scheduler-4] INFO  TaskJobService         - 无效任务清理完成，当前活跃任务数: 0
25-10-18.10:15:29.962 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.10:15:30.175 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.10:15:59.962 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.10:16:00.187 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.10:16:29.970 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.10:16:30.192 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.10:16:59.971 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.10:17:00.131 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.10:17:29.966 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.10:17:30.092 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.10:17:52.410 [http-nio-8099-exec-6] INFO  AiClientAdminController - 查询所有AI客户端配置
25-10-18.10:17:59.964 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.10:18:00.145 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.10:18:29.964 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.10:18:31.123 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.10:18:59.963 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.10:19:00.202 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.10:19:29.965 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.10:19:32.663 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.10:19:59.959 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.10:20:00.006 [test-task-scheduler-5] INFO  TaskJobService         - 开始清理无效的任务
25-10-18.10:20:00.515 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.10:20:00.515 [test-task-scheduler-5] INFO  TaskJobService         - 发现1个无效任务需要清理
25-10-18.10:20:00.515 [test-task-scheduler-5] INFO  TaskJobService         - 无效任务清理完成，当前活跃任务数: 0
25-10-18.10:20:24.837 [SpringApplicationShutdownHook] INFO  GracefulShutdown       - Commencing graceful shutdown. Waiting for active requests to complete
25-10-18.10:20:54.451 [main            ] INFO  Application            - Starting Application using Java 17.0.14 with PID 29200 (D:\java\ideapublic\ywz-ai-agent-station-study\ywz-ai-agent-station-study-app\target\classes started by ywz in D:\java\ideapublic\ywz-ai-agent-station-study)
25-10-18.10:20:54.452 [main            ] INFO  Application            - The following 1 profile is active: "dev"
25-10-18.10:20:55.941 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port 8099 (http)
25-10-18.10:20:55.955 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8099"]
25-10-18.10:20:55.956 [main            ] INFO  StandardService        - Starting service [Tomcat]
25-10-18.10:20:55.956 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/10.1.36]
25-10-18.10:20:56.049 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
25-10-18.10:20:56.049 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1565 ms
25-10-18.10:20:56.474 [main            ] INFO  PgVectorStore          - Using the vector table name: vector_store_openai. Is empty: false
25-10-18.10:20:56.479 [main            ] INFO  PgVectorStore          - Initializing PGVectorStore schema for table: vector_store_openai in schema: public
25-10-18.10:20:56.479 [main            ] INFO  PgVectorStore          - vectorTableValidationsEnabled false
25-10-18.10:20:56.950 [main            ] INFO  TaskJobAutoConfigBean  - xfg-wrench，任务调度器初始化完成。线程池大小: 5, 线程名前缀: test-task-scheduler-
25-10-18.10:20:56.953 [main            ] INFO  TaskJobService         - 开始初始化任务调度配置
25-10-18.10:20:56.967 [main            ] INFO  HikariDataSource       - MainHikariPool - Starting...
25-10-18.10:20:58.165 [main            ] INFO  HikariPool             - MainHikariPool - Added connection com.mysql.cj.jdbc.ConnectionImpl@16c0f05c
25-10-18.10:20:58.167 [main            ] INFO  HikariDataSource       - MainHikariPool - Start completed.
25-10-18.10:20:58.386 [main            ] INFO  TaskJobService         - 任务调度配置初始化完成，已加载任务数: 0
25-10-18.10:20:58.388 [main            ] INFO  TaskJobAutoConfigBean  - xfg-wrench，任务调度作业初始化完成。刷新间隔: 30000ms, 清理cron: 0 0/5 * * * ?
25-10-18.10:20:58.462 [main            ] INFO  OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
25-10-18.10:20:58.881 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8099"]
25-10-18.10:20:58.889 [main            ] INFO  TomcatWebServer        - Tomcat started on port 8099 (http) with context path '/'
25-10-18.10:20:58.898 [main            ] INFO  Application            - Started Application in 4.92 seconds (process running for 5.675)
25-10-18.10:20:58.900 [test-task-scheduler-1] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.10:20:58.903 [pool-2-thread-1 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_api) [6101]
25-10-18.10:20:58.903 [pool-2-thread-2 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_model) [6101]
25-10-18.10:20:58.903 [pool-2-thread-3 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_prompt) [6101]
25-10-18.10:20:58.903 [pool-2-thread-4 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_advisor) [6101]
25-10-18.10:20:58.903 [pool-2-thread-5 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_tool_mcp) [6101]
25-10-18.10:20:58.903 [pool-2-thread-6 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client) [6101]
25-10-18.10:21:02.399 [test-task-scheduler-1] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.10:21:03.182 [pool-2-thread-2 ] INFO  AgentRepository        - AiClientModelNode: 获取模型信息成功: 2000
25-10-18.10:21:03.184 [pool-2-thread-5 ] INFO  AgentRepository        - 查询modelId对应的mcpId列表 [5006, 5001]
25-10-18.10:21:03.560 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_api_1001
25-10-18.10:21:04.015 [HttpClient-11-Worker-2] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[completions=null, experimental={}, logging=null, prompts=PromptCapabilities[listChanged=false], resources=ResourceCapabilities[subscribe=false, listChanged=false], tools=ToolCapabilities[listChanged=false]], Info: Implementation[name=AIsearch, version=1.4.1] and Instructions null
25-10-18.10:21:04.104 [main            ] INFO  AiClientToolMcpNode    - SSE MCP Initialized: InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[completions=null, experimental={}, logging=null, prompts=PromptCapabilities[listChanged=false], resources=ResourceCapabilities[subscribe=false, listChanged=false], tools=ToolCapabilities[listChanged=false]], serverInfo=Implementation[name=AIsearch, version=1.4.1], instructions=null]
25-10-18.10:21:04.107 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5006
25-10-18.10:21:04.249 [HttpClient-12-Worker-1] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[completions=null, experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-csdn, version=1.0.0] and Instructions null
25-10-18.10:21:04.283 [main            ] INFO  AiClientToolMcpNode    - SSE MCP Initialized: InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[completions=null, experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-csdn, version=1.0.0], instructions=null]
25-10-18.10:21:04.284 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5001
25-10-18.10:21:04.284 [main            ] INFO  AiClientModelNode      - 开始初始化 ai client model
25-10-18.10:21:04.397 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_2000
25-10-18.10:21:04.410 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_advisor_4001
25-10-18.10:21:04.487 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_advisor_4004
25-10-18.10:21:04.531 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_6101
25-10-18.10:21:04.531 [main            ] INFO  AiAgentAutoConfiguration - 【AI-AGENT】启动成功，已加载客户端：null
25-10-18.10:21:07.703 [http-nio-8099-exec-1] INFO  [/]                    - Initializing Spring DispatcherServlet 'dispatcherServlet'
25-10-18.10:21:07.703 [http-nio-8099-exec-1] INFO  DispatcherServlet      - Initializing Servlet 'dispatcherServlet'
25-10-18.10:21:07.704 [http-nio-8099-exec-1] INFO  DispatcherServlet      - Completed initialization in 1 ms
25-10-18.10:21:07.820 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 开始保存画布信息: 流程图配置_2025/10/18 10:21:07
25-10-18.10:21:07.825 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 提取字段:[{"key":"","value":{"content":"test01"}}] ,agentName
25-10-18.10:21:07.830 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 提取字段:[{"key":"","value":{"content":"测试用例"}}] ,description
25-10-18.10:21:07.830 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 提取字段:"agent" ,channel
25-10-18.10:21:07.830 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 提取字段:"flowAgentExecuteStrategy" ,strategy
25-10-18.10:21:07.831 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 解析到agent信息: agentName=test01, description=测试用例, channel=agent, strategy=flowAgentExecuteStrategy
25-10-18.10:21:08.015 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 开始更新Client关联表数据
25-10-18.10:21:08.025 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 开始解析边关系，总共6条边
25-10-18.10:21:08.025 [http-nio-8099-exec-1] WARN  DrawConfigParser       - 找不到节点信息，sourceNodeId: start_0, targetNodeId: agent_QyqMj
25-10-18.10:21:08.025 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 创建配置关系: client(6101) -> tool_mcp(5001), sourcePortId: client_select__8DZjR
25-10-18.10:21:08.026 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 成功创建配置关系[1]: client:6101 -> tool_mcp:5001
25-10-18.10:21:08.026 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 创建配置关系: client(6101) -> prompt(6003), sourcePortId: client_select__8DZjR
25-10-18.10:21:08.026 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 成功创建配置关系[2]: client:6101 -> prompt:6003
25-10-18.10:21:08.026 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 创建配置关系: client(6101) -> model(2000), sourcePortId: client_select__8DZjR
25-10-18.10:21:08.026 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 成功创建配置关系[3]: client:6101 -> model:2000
25-10-18.10:21:08.026 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 创建配置关系: model(2000) -> advisor(4001), sourcePortId: model_select_729ASo
25-10-18.10:21:08.026 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 成功创建配置关系[4]: model:2000 -> advisor:4001
25-10-18.10:21:08.026 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 边关系解析完成，处理0条边，跳过2条，生成4条有效配置关系
25-10-18.10:21:08.026 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 节点类型统计结果
25-10-18.10:21:08.026 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 节点类型: advisor, 数量: 1 1有引用id
25-10-18.10:21:08.026 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 节点类型: agent, 数量: 1 1有引用id
25-10-18.10:21:08.026 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 节点类型: tool_mcp, 数量: 1 1有引用id
25-10-18.10:21:08.026 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 节点类型: client, 数量: 1 1有引用id
25-10-18.10:21:08.026 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 节点类型: model, 数量: 1 1有引用id
25-10-18.10:21:08.026 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 节点类型: prompt, 数量: 1 1有引用id
25-10-18.10:21:08.026 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 节点配置关系统计结果
25-10-18.10:21:08.026 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 关系类型: client -> model, 数量: 1
25-10-18.10:21:08.026 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 关系类型: client -> tool_mcp, 数量: 1
25-10-18.10:21:08.026 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 关系类型: model -> advisor, 数量: 1
25-10-18.10:21:08.026 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 关系类型: client -> prompt, 数量: 1
25-10-18.10:21:08.026 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 总计: 6个节点，6条边，4条有效配置关系
25-10-18.10:21:08.026 [http-nio-8099-exec-1] INFO  DrawConfigParser       - === 统计结束 ===
25-10-18.10:21:08.026 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 解析配置数据完成，生成4条关系
25-10-18.10:21:08.060 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 已存在相同的记录, 不需要重复插入: AiClientConfig(id=null, sourceType=client, sourceId=6101, targetType=tool_mcp, targetId=5001, extParam={"sourcePortId":"client_select__8DZjR","sourceTitle":"Client_1","targetTitle":"ToolMcp_1"}, status=1, createTime=2025-10-18T10:21:08.025340700, updateTime=2025-10-18T10:21:08.025340700)
25-10-18.10:21:08.100 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 已存在相同的记录, 不需要重复插入: AiClientConfig(id=null, sourceType=client, sourceId=6101, targetType=prompt, targetId=6003, extParam={"sourcePortId":"client_select__8DZjR","sourceTitle":"Client_1","targetTitle":"Prompt_1"}, status=1, createTime=2025-10-18T10:21:08.026342500, updateTime=2025-10-18T10:21:08.026342500)
25-10-18.10:21:08.135 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 已存在相同的记录, 不需要重复插入: AiClientConfig(id=null, sourceType=client, sourceId=6101, targetType=model, targetId=2000, extParam={"sourcePortId":"client_select__8DZjR","sourceTitle":"Client_1","targetTitle":"Model_1"}, status=1, createTime=2025-10-18T10:21:08.026342500, updateTime=2025-10-18T10:21:08.026342500)
25-10-18.10:21:08.172 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 已存在相同的记录, 不需要重复插入: AiClientConfig(id=null, sourceType=model, sourceId=2000, targetType=advisor, targetId=4001, extParam={"sourcePortId":"model_select_729ASo","sourceTitle":"Model_1","targetTitle":"Advisor_1"}, status=1, createTime=2025-10-18T10:21:08.026342500, updateTime=2025-10-18T10:21:08.026342500)
25-10-18.10:21:08.172 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 开始更新agent_flow_config表数据
25-10-18.10:21:08.173 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 提取字段:[{"key":"client_type_kOprhJ","value":"DEFAULT"}] ,clientType
25-10-18.10:21:08.173 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 提取字段:"6101" ,clientId
25-10-18.10:21:08.173 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 提取字段:"6101-CSDN发帖&通知" ,clientName
25-10-18.10:21:08.173 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 提取字段:[{"key":"sequence_CagJ4V","value":1}] ,sequence
25-10-18.10:21:08.173 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 提取字段:[{"key":"step_prompt_-0aB4W","value":""}] ,stepPrompt
25-10-18.10:21:08.240 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 插入agent_flow_config表数据: AiAgentFlowConfig(id=null, agentId=54067820, clientId=6101, clientName=6101-CSDN发帖&通知, clientType=DEFAULT, stepPrompt=, sequence=1, status=1, createTime=2025-10-18T10:21:08.175263200)
25-10-18.10:21:28.909 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.10:21:29.089 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.10:21:58.902 [test-task-scheduler-3] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.10:21:58.969 [test-task-scheduler-3] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.10:22:28.902 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.10:22:29.095 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.10:22:58.906 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.10:22:59.097 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.10:23:03.084 [SpringApplicationShutdownHook] INFO  GracefulShutdown       - Commencing graceful shutdown. Waiting for active requests to complete
25-10-18.10:23:03.320 [tomcat-shutdown ] INFO  GracefulShutdown       - Graceful shutdown complete
25-10-18.10:23:03.324 [SpringApplicationShutdownHook] INFO  TaskJobService         - 开始停止所有任务
25-10-18.10:23:03.324 [SpringApplicationShutdownHook] INFO  TaskJobService         - 所有任务已停止
25-10-18.10:23:03.326 [SpringApplicationShutdownHook] INFO  HikariDataSource       - MainHikariPool - Shutdown initiated...
25-10-18.10:23:07.069 [main            ] INFO  Application            - Starting Application using Java 17.0.14 with PID 25116 (D:\java\ideapublic\ywz-ai-agent-station-study\ywz-ai-agent-station-study-app\target\classes started by ywz in D:\java\ideapublic\ywz-ai-agent-station-study)
25-10-18.10:23:07.070 [main            ] INFO  Application            - The following 1 profile is active: "dev"
25-10-18.10:23:08.612 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port 8099 (http)
25-10-18.10:23:08.627 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8099"]
25-10-18.10:23:08.628 [main            ] INFO  StandardService        - Starting service [Tomcat]
25-10-18.10:23:08.629 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/10.1.36]
25-10-18.10:23:08.726 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
25-10-18.10:23:08.727 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1625 ms
25-10-18.10:23:09.139 [main            ] INFO  PgVectorStore          - Using the vector table name: vector_store_openai. Is empty: false
25-10-18.10:23:09.155 [main            ] INFO  PgVectorStore          - Initializing PGVectorStore schema for table: vector_store_openai in schema: public
25-10-18.10:23:09.155 [main            ] INFO  PgVectorStore          - vectorTableValidationsEnabled false
25-10-18.10:23:09.595 [main            ] INFO  TaskJobAutoConfigBean  - xfg-wrench，任务调度器初始化完成。线程池大小: 5, 线程名前缀: test-task-scheduler-
25-10-18.10:23:09.599 [main            ] INFO  TaskJobService         - 开始初始化任务调度配置
25-10-18.10:23:09.613 [main            ] INFO  HikariDataSource       - MainHikariPool - Starting...
25-10-18.10:23:10.121 [main            ] INFO  HikariPool             - MainHikariPool - Added connection com.mysql.cj.jdbc.ConnectionImpl@77667947
25-10-18.10:23:10.122 [main            ] INFO  HikariDataSource       - MainHikariPool - Start completed.
25-10-18.10:23:10.202 [main            ] INFO  TaskJobService         - 任务调度配置初始化完成，已加载任务数: 0
25-10-18.10:23:10.204 [main            ] INFO  TaskJobAutoConfigBean  - xfg-wrench，任务调度作业初始化完成。刷新间隔: 30000ms, 清理cron: 0 0/5 * * * ?
25-10-18.10:23:10.281 [main            ] INFO  OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
25-10-18.10:23:10.736 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8099"]
25-10-18.10:23:10.743 [main            ] INFO  TomcatWebServer        - Tomcat started on port 8099 (http) with context path '/'
25-10-18.10:23:10.753 [main            ] INFO  Application            - Started Application in 4.176 seconds (process running for 4.993)
25-10-18.10:23:10.754 [test-task-scheduler-1] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.10:23:10.758 [pool-2-thread-1 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_api) [6101]
25-10-18.10:23:10.758 [pool-2-thread-2 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_model) [6101]
25-10-18.10:23:10.758 [pool-2-thread-3 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_prompt) [6101]
25-10-18.10:23:10.758 [pool-2-thread-4 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_advisor) [6101]
25-10-18.10:23:10.759 [pool-2-thread-5 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_tool_mcp) [6101]
25-10-18.10:23:10.759 [pool-2-thread-6 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client) [6101]
25-10-18.10:23:10.824 [test-task-scheduler-1] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.10:23:10.980 [pool-2-thread-2 ] INFO  AgentRepository        - AiClientModelNode: 获取模型信息成功: 2000
25-10-18.10:23:11.016 [pool-2-thread-5 ] INFO  AgentRepository        - 查询modelId对应的mcpId列表 [5006, 5001]
25-10-18.10:23:11.152 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_api_1001
25-10-18.10:23:11.516 [HttpClient-11-Worker-2] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[completions=null, experimental={}, logging=null, prompts=PromptCapabilities[listChanged=false], resources=ResourceCapabilities[subscribe=false, listChanged=false], tools=ToolCapabilities[listChanged=false]], Info: Implementation[name=AIsearch, version=1.4.1] and Instructions null
25-10-18.10:23:11.604 [main            ] INFO  AiClientToolMcpNode    - SSE MCP Initialized: InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[completions=null, experimental={}, logging=null, prompts=PromptCapabilities[listChanged=false], resources=ResourceCapabilities[subscribe=false, listChanged=false], tools=ToolCapabilities[listChanged=false]], serverInfo=Implementation[name=AIsearch, version=1.4.1], instructions=null]
25-10-18.10:23:11.607 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5006
25-10-18.10:23:18.045 [HttpClient-12-Worker-2] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[completions=null, experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-csdn, version=1.0.0] and Instructions null
25-10-18.10:23:18.103 [main            ] INFO  AiClientToolMcpNode    - SSE MCP Initialized: InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[completions=null, experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-csdn, version=1.0.0], instructions=null]
25-10-18.10:23:18.103 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5001
25-10-18.10:23:18.103 [main            ] INFO  AiClientModelNode      - 开始初始化 ai client model
25-10-18.10:23:18.264 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_2000
25-10-18.10:23:18.280 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_advisor_4001
25-10-18.10:23:18.362 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_advisor_4004
25-10-18.10:23:18.456 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_6101
25-10-18.10:23:18.456 [main            ] INFO  AiAgentAutoConfiguration - 【AI-AGENT】启动成功，已加载客户端：null
25-10-18.10:23:27.109 [http-nio-8099-exec-1] INFO  [/]                    - Initializing Spring DispatcherServlet 'dispatcherServlet'
25-10-18.10:23:27.109 [http-nio-8099-exec-1] INFO  DispatcherServlet      - Initializing Servlet 'dispatcherServlet'
25-10-18.10:23:27.110 [http-nio-8099-exec-1] INFO  DispatcherServlet      - Completed initialization in 1 ms
25-10-18.10:23:29.612 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 开始保存画布信息: 流程图配置_2025/10/18 10:23:27
25-10-18.10:23:29.617 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 提取字段:[{"key":"","value":{"content":"test01"}}] ,agentName
25-10-18.10:23:29.620 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 提取字段:[{"key":"","value":{"content":"测试用例"}}] ,description
25-10-18.10:23:29.620 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 提取字段:"agent" ,channel
25-10-18.10:24:18.655 [MainHikariPool housekeeper] WARN  HikariPool             - MainHikariPool - Thread starvation or clock leap detected (housekeeper delta=1m8s418ms762µs600ns).
25-10-18.10:24:18.655 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.10:24:18.658 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 提取字段:"flowAgentExecuteStrategy" ,strategy
25-10-18.10:24:34.196 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.10:24:34.197 [test-task-scheduler-3] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.10:24:55.085 [test-task-scheduler-3] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.10:24:55.086 [test-task-scheduler-1] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.10:24:55.088 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 解析到agent信息: agentName=test01, description=测试用例, channel=agent, strategy=flowAgentExecuteStrategy
25-10-18.10:24:55.956 [test-task-scheduler-1] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.10:25:04.964 [test-task-scheduler-3] INFO  TaskJobService         - 开始清理无效的任务
25-10-18.10:25:14.103 [test-task-scheduler-4] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.10:25:19.625 [test-task-scheduler-3] INFO  TaskJobService         - 发现1个无效任务需要清理
25-10-18.10:25:20.692 [test-task-scheduler-3] INFO  TaskJobService         - 无效任务清理完成，当前活跃任务数: 0
25-10-18.10:25:20.693 [test-task-scheduler-4] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.10:26:12.513 [test-task-scheduler-4] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.10:26:12.539 [SpringApplicationShutdownHook] INFO  GracefulShutdown       - Commencing graceful shutdown. Waiting for active requests to complete
25-10-18.12:03:06.771 [main            ] INFO  Application            - Starting Application using Java 17.0.14 with PID 23972 (D:\java\ideapublic\ywz-ai-agent-station-study\ywz-ai-agent-station-study-app\target\classes started by ywz in D:\java\ideapublic\ywz-ai-agent-station-study)
25-10-18.12:03:06.773 [main            ] INFO  Application            - The following 1 profile is active: "dev"
25-10-18.12:03:08.304 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port 8099 (http)
25-10-18.12:03:08.318 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8099"]
25-10-18.12:03:08.320 [main            ] INFO  StandardService        - Starting service [Tomcat]
25-10-18.12:03:08.320 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/10.1.36]
25-10-18.12:03:08.413 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
25-10-18.12:03:08.413 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1604 ms
25-10-18.12:03:08.796 [main            ] INFO  PgVectorStore          - Using the vector table name: vector_store_openai. Is empty: false
25-10-18.12:03:08.801 [main            ] INFO  PgVectorStore          - Initializing PGVectorStore schema for table: vector_store_openai in schema: public
25-10-18.12:03:08.802 [main            ] INFO  PgVectorStore          - vectorTableValidationsEnabled false
25-10-18.12:03:09.281 [main            ] INFO  TaskJobAutoConfigBean  - xfg-wrench，任务调度器初始化完成。线程池大小: 5, 线程名前缀: test-task-scheduler-
25-10-18.12:03:09.292 [main            ] INFO  TaskJobService         - 开始初始化任务调度配置
25-10-18.12:03:09.305 [main            ] INFO  HikariDataSource       - MainHikariPool - Starting...
25-10-18.12:03:10.485 [main            ] INFO  HikariPool             - MainHikariPool - Added connection com.mysql.cj.jdbc.ConnectionImpl@57f557
25-10-18.12:03:10.487 [main            ] INFO  HikariDataSource       - MainHikariPool - Start completed.
25-10-18.12:03:10.599 [main            ] INFO  TaskJobService         - 任务调度配置初始化完成，已加载任务数: 0
25-10-18.12:03:10.600 [main            ] INFO  TaskJobAutoConfigBean  - xfg-wrench，任务调度作业初始化完成。刷新间隔: 30000ms, 清理cron: 0 0/5 * * * ?
25-10-18.12:03:10.674 [main            ] INFO  OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
25-10-18.12:03:11.112 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8099"]
25-10-18.12:03:11.119 [main            ] INFO  TomcatWebServer        - Tomcat started on port 8099 (http) with context path '/'
25-10-18.12:03:11.128 [main            ] INFO  Application            - Started Application in 4.82 seconds (process running for 5.766)
25-10-18.12:03:11.129 [test-task-scheduler-1] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.12:03:11.130 [main            ] INFO  AiAgentAutoConfiguration - AI Agent 自动装配开始，配置: AiAgentAutoConfigProperties(enabled=true, clientIds=[6101])
25-10-18.12:03:11.306 [test-task-scheduler-1] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.12:03:11.459 [pool-2-thread-1 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_api) [48376249]
25-10-18.12:03:11.459 [pool-2-thread-2 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_model) [48376249]
25-10-18.12:03:11.459 [pool-2-thread-3 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_prompt) [48376249]
25-10-18.12:03:11.459 [pool-2-thread-4 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_advisor) [48376249]
25-10-18.12:03:11.460 [pool-2-thread-5 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_tool_mcp) [48376249]
25-10-18.12:03:11.460 [pool-2-thread-6 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client) [48376249]
25-10-18.12:03:12.022 [pool-2-thread-2 ] INFO  AgentRepository        - AiClientModelNode: 获取模型信息成功: 1000
25-10-18.12:03:17.244 [pool-2-thread-5 ] INFO  AgentRepository        - 查询modelId对应的mcpId列表 [5006]
25-10-18.12:03:17.344 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_api_1001
25-10-18.12:03:17.578 [SpringApplicationShutdownHook] INFO  GracefulShutdown       - Commencing graceful shutdown. Waiting for active requests to complete
25-10-18.12:03:17.816 [tomcat-shutdown ] INFO  GracefulShutdown       - Graceful shutdown complete
25-10-18.12:03:17.818 [SpringApplicationShutdownHook] INFO  TaskJobService         - 开始停止所有任务
25-10-18.12:03:17.818 [SpringApplicationShutdownHook] INFO  TaskJobService         - 所有任务已停止
25-10-18.12:03:17.820 [SpringApplicationShutdownHook] INFO  HikariDataSource       - MainHikariPool - Shutdown initiated...
25-10-18.12:27:44.972 [main            ] INFO  Application            - Starting Application using Java 17.0.14 with PID 17496 (D:\java\ideapublic\ywz-ai-agent-station-study\ywz-ai-agent-station-study-app\target\classes started by ywz in D:\java\ideapublic\ywz-ai-agent-station-study)
25-10-18.12:27:44.973 [main            ] INFO  Application            - The following 1 profile is active: "dev"
25-10-18.12:27:46.510 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port 8099 (http)
25-10-18.12:27:46.522 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8099"]
25-10-18.12:27:46.525 [main            ] INFO  StandardService        - Starting service [Tomcat]
25-10-18.12:27:46.525 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/10.1.36]
25-10-18.12:27:46.622 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
25-10-18.12:27:46.622 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1613 ms
25-10-18.12:27:47.004 [main            ] INFO  PgVectorStore          - Using the vector table name: vector_store_openai. Is empty: false
25-10-18.12:27:47.010 [main            ] INFO  PgVectorStore          - Initializing PGVectorStore schema for table: vector_store_openai in schema: public
25-10-18.12:27:47.010 [main            ] INFO  PgVectorStore          - vectorTableValidationsEnabled false
25-10-18.12:27:47.507 [main            ] INFO  TaskJobAutoConfigBean  - xfg-wrench，任务调度器初始化完成。线程池大小: 5, 线程名前缀: test-task-scheduler-
25-10-18.12:27:47.512 [main            ] INFO  TaskJobService         - 开始初始化任务调度配置
25-10-18.12:27:47.524 [main            ] INFO  HikariDataSource       - MainHikariPool - Starting...
25-10-18.12:27:48.604 [main            ] INFO  HikariPool             - MainHikariPool - Added connection com.mysql.cj.jdbc.ConnectionImpl@1ede3675
25-10-18.12:27:48.606 [main            ] INFO  HikariDataSource       - MainHikariPool - Start completed.
25-10-18.12:27:48.719 [main            ] INFO  TaskJobService         - 任务调度配置初始化完成，已加载任务数: 0
25-10-18.12:27:48.722 [main            ] INFO  TaskJobAutoConfigBean  - xfg-wrench，任务调度作业初始化完成。刷新间隔: 30000ms, 清理cron: 0 0/5 * * * ?
25-10-18.12:27:48.796 [main            ] INFO  OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
25-10-18.12:27:49.230 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8099"]
25-10-18.12:27:49.237 [main            ] INFO  TomcatWebServer        - Tomcat started on port 8099 (http) with context path '/'
25-10-18.12:27:49.245 [main            ] INFO  Application            - Started Application in 4.781 seconds (process running for 5.504)
25-10-18.12:27:49.247 [test-task-scheduler-1] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.12:27:49.247 [main            ] INFO  AiAgentAutoConfiguration - AI Agent 自动装配开始，配置: AiAgentAutoConfigProperties(enabled=true, clientIds=[6101])
25-10-18.12:27:49.377 [test-task-scheduler-1] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.12:27:49.420 [pool-2-thread-1 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_api) [48376249]
25-10-18.12:27:49.421 [pool-2-thread-2 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_model) [48376249]
25-10-18.12:27:49.421 [pool-2-thread-3 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_prompt) [48376249]
25-10-18.12:27:49.421 [pool-2-thread-4 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_advisor) [48376249]
25-10-18.12:27:49.421 [pool-2-thread-5 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_tool_mcp) [48376249]
25-10-18.12:27:49.421 [pool-2-thread-6 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client) [48376249]
25-10-18.12:27:49.580 [pool-2-thread-2 ] INFO  AgentRepository        - AiClientModelNode: 获取模型信息成功: 1000
25-10-18.12:27:49.641 [pool-2-thread-5 ] INFO  AgentRepository        - 查询modelId对应的mcpId列表 [5006]
25-10-18.12:27:49.753 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_api_1001
25-10-18.12:27:50.498 [HttpClient-11-Worker-0] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[completions=null, experimental={}, logging=null, prompts=PromptCapabilities[listChanged=false], resources=ResourceCapabilities[subscribe=false, listChanged=false], tools=ToolCapabilities[listChanged=false]], Info: Implementation[name=AIsearch, version=1.4.1] and Instructions null
25-10-18.12:27:50.576 [main            ] INFO  AiClientToolMcpNode    - SSE MCP Initialized: InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[completions=null, experimental={}, logging=null, prompts=PromptCapabilities[listChanged=false], resources=ResourceCapabilities[subscribe=false, listChanged=false], tools=ToolCapabilities[listChanged=false]], serverInfo=Implementation[name=AIsearch, version=1.4.1], instructions=null]
25-10-18.12:27:50.578 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5006
25-10-18.12:27:50.578 [main            ] INFO  AiClientModelNode      - 开始初始化 ai client model
25-10-18.12:27:50.682 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_1000
25-10-18.12:27:50.682 [main            ] WARN  AiClientAdvisorNode    - 没有需要被初始化的顾问角色
25-10-18.12:27:50.691 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_48376249
25-10-18.12:27:50.757 [pool-2-thread-12] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client) [48376249]
25-10-18.12:27:50.757 [pool-2-thread-7 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_api) [48376249]
25-10-18.12:27:50.758 [pool-2-thread-10] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_advisor) [48376249]
25-10-18.12:27:50.758 [pool-2-thread-9 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_prompt) [48376249]
25-10-18.12:27:50.758 [pool-2-thread-11] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_tool_mcp) [48376249]
25-10-18.12:27:50.758 [pool-2-thread-8 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_model) [48376249]
25-10-18.12:27:50.851 [pool-2-thread-11] INFO  AgentRepository        - 查询modelId对应的mcpId列表 [5006]
25-10-18.12:27:50.887 [pool-2-thread-8 ] INFO  AgentRepository        - AiClientModelNode: 获取模型信息成功: 1000
25-10-18.12:27:50.891 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_api_1001
25-10-18.12:27:51.119 [HttpClient-14-Worker-0] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[completions=null, experimental={}, logging=null, prompts=PromptCapabilities[listChanged=false], resources=ResourceCapabilities[subscribe=false, listChanged=false], tools=ToolCapabilities[listChanged=false]], Info: Implementation[name=AIsearch, version=1.4.1] and Instructions null
25-10-18.12:27:51.187 [main            ] INFO  AiClientToolMcpNode    - SSE MCP Initialized: InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[completions=null, experimental={}, logging=null, prompts=PromptCapabilities[listChanged=false], resources=ResourceCapabilities[subscribe=false, listChanged=false], tools=ToolCapabilities[listChanged=false]], serverInfo=Implementation[name=AIsearch, version=1.4.1], instructions=null]
25-10-18.12:27:51.191 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5006
25-10-18.12:27:51.191 [main            ] INFO  AiClientModelNode      - 开始初始化 ai client model
25-10-18.12:27:51.264 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_1000
25-10-18.12:27:51.264 [main            ] WARN  AiClientAdvisorNode    - 没有需要被初始化的顾问角色
25-10-18.12:27:51.265 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_48376249
25-10-18.12:27:51.409 [main            ] INFO  AiAgentAutoConfiguration - AI Agent 自动装配完成 [{"agentId":"85374287","agentName":"测试Agent","channel":"agent","description":"测试Agent","status":1},{"agentId":"20099179","agentName":"111-测试model","channel":"agent","description":"111","status":1}]
25-10-18.12:28:19.255 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.12:28:19.326 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.12:28:49.249 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.12:28:49.314 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.12:29:19.259 [test-task-scheduler-3] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.12:29:19.337 [test-task-scheduler-3] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.12:29:49.249 [test-task-scheduler-3] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.12:29:49.330 [test-task-scheduler-3] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.12:30:00.003 [test-task-scheduler-2] INFO  TaskJobService         - 开始清理无效的任务
25-10-18.12:30:01.311 [test-task-scheduler-2] INFO  TaskJobService         - 发现1个无效任务需要清理
25-10-18.12:30:01.311 [test-task-scheduler-2] INFO  TaskJobService         - 无效任务清理完成，当前活跃任务数: 0
25-10-18.12:30:19.255 [test-task-scheduler-4] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.12:30:19.434 [test-task-scheduler-4] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.12:30:44.324 [http-nio-8099-exec-1] INFO  [/]                    - Initializing Spring DispatcherServlet 'dispatcherServlet'
25-10-18.12:30:44.324 [http-nio-8099-exec-1] INFO  DispatcherServlet      - Initializing Servlet 'dispatcherServlet'
25-10-18.12:30:44.325 [http-nio-8099-exec-1] INFO  DispatcherServlet      - Completed initialization in 1 ms
25-10-18.12:30:44.392 [http-nio-8099-exec-3] INFO  AiAgentDataStatisticsAdminController - 开始获取系统数据统计
25-10-18.12:30:45.140 [http-nio-8099-exec-3] INFO  AiAgentDataStatisticsAdminController - 系统数据统计获取成功：智能体数量=8, 客户端数量=18, MCP工具数量=9, 系统提示数量=15, 知识库数量=1, 顾问数量=5, 模型数量=7
25-10-18.12:30:49.258 [test-task-scheduler-4] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.12:30:49.746 [test-task-scheduler-4] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.12:31:19.250 [test-task-scheduler-4] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.12:31:19.286 [http-nio-8099-exec-2] INFO  AiAgentDataStatisticsAdminController - 开始获取系统数据统计
25-10-18.12:31:19.345 [test-task-scheduler-4] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.12:31:19.951 [http-nio-8099-exec-2] INFO  AiAgentDataStatisticsAdminController - 系统数据统计获取成功：智能体数量=8, 客户端数量=18, MCP工具数量=9, 系统提示数量=15, 知识库数量=1, 顾问数量=5, 模型数量=7
25-10-18.12:31:19.955 [http-nio-8099-exec-5] INFO  AiAgentDataStatisticsAdminController - 开始获取系统数据统计
25-10-18.12:31:20.321 [http-nio-8099-exec-5] INFO  AiAgentDataStatisticsAdminController - 系统数据统计获取成功：智能体数量=8, 客户端数量=18, MCP工具数量=9, 系统提示数量=15, 知识库数量=1, 顾问数量=5, 模型数量=7
25-10-18.12:31:32.969 [http-nio-8099-exec-4] INFO  AiAgentDrawAdminController - 查询拖拉拽流程图配置列表请求：AiAgentDrawConfigQueryRequestDTO(configId=null, configName=null, agentId=null, status=null, pageNum=1, pageSize=10)
25-10-18.12:31:40.335 [http-nio-8099-exec-8] INFO  AiClientAdminController - 根据条件查询AI客户端配置列表请求：AiClientQueryRequestDTO(clientId=null, clientName=null, status=null, pageNum=1, pageSize=10)
25-10-18.12:31:49.252 [test-task-scheduler-4] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.12:31:50.850 [test-task-scheduler-4] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.12:31:52.619 [http-nio-8099-exec-10] INFO  AiClientSystemPromptAdminController - 根据条件查询系统提示词配置列表：AiClientSystemPromptQueryRequestDTO(promptId=null, promptName=null, status=null, pageNum=1, pageSize=10)
25-10-18.12:31:55.602 [http-nio-8099-exec-3] INFO  AiClientToolMcpAdminController - 根据查询条件查询MCP客户端配置列表：AiClientToolMcpQueryRequestDTO(mcpId=null, mcpName=null, transportType=null, status=null, pageNum=1, pageSize=10)
25-10-18.12:31:59.187 [http-nio-8099-exec-2] INFO  AiAgentDataStatisticsAdminController - 开始获取系统数据统计
25-10-18.12:32:03.061 [http-nio-8099-exec-2] INFO  AiAgentDataStatisticsAdminController - 系统数据统计获取成功：智能体数量=8, 客户端数量=18, MCP工具数量=9, 系统提示数量=15, 知识库数量=1, 顾问数量=5, 模型数量=7
25-10-18.12:32:03.063 [http-nio-8099-exec-5] INFO  AiAgentDataStatisticsAdminController - 开始获取系统数据统计
25-10-18.12:32:04.086 [http-nio-8099-exec-5] INFO  AiAgentDataStatisticsAdminController - 系统数据统计获取成功：智能体数量=8, 客户端数量=18, MCP工具数量=9, 系统提示数量=15, 知识库数量=1, 顾问数量=5, 模型数量=7
25-10-18.12:32:04.088 [http-nio-8099-exec-6] INFO  AiAgentDataStatisticsAdminController - 开始获取系统数据统计
25-10-18.12:32:04.454 [http-nio-8099-exec-6] INFO  AiAgentDataStatisticsAdminController - 系统数据统计获取成功：智能体数量=8, 客户端数量=18, MCP工具数量=9, 系统提示数量=15, 知识库数量=1, 顾问数量=5, 模型数量=7
25-10-18.12:32:04.457 [http-nio-8099-exec-4] INFO  AiAgentDataStatisticsAdminController - 开始获取系统数据统计
25-10-18.12:32:04.700 [http-nio-8099-exec-4] INFO  AiAgentDataStatisticsAdminController - 系统数据统计获取成功：智能体数量=8, 客户端数量=18, MCP工具数量=9, 系统提示数量=15, 知识库数量=1, 顾问数量=5, 模型数量=7
25-10-18.12:32:05.094 [http-nio-8099-exec-7] INFO  AiAgentDataStatisticsAdminController - 开始获取系统数据统计
25-10-18.12:32:05.358 [http-nio-8099-exec-7] INFO  AiAgentDataStatisticsAdminController - 系统数据统计获取成功：智能体数量=8, 客户端数量=18, MCP工具数量=9, 系统提示数量=15, 知识库数量=1, 顾问数量=5, 模型数量=7
25-10-18.12:32:06.585 [http-nio-8099-exec-8] INFO  AiAgentDataStatisticsAdminController - 开始获取系统数据统计
25-10-18.12:32:06.957 [http-nio-8099-exec-8] INFO  AiAgentDataStatisticsAdminController - 系统数据统计获取成功：智能体数量=8, 客户端数量=18, MCP工具数量=9, 系统提示数量=15, 知识库数量=1, 顾问数量=5, 模型数量=7
25-10-18.12:32:19.248 [test-task-scheduler-4] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.12:32:19.377 [test-task-scheduler-4] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.12:32:25.660 [http-nio-8099-exec-10] INFO  AdminUserAdminController - 管理员用户登录校验请求：admin
25-10-18.12:32:25.661 [http-nio-8099-exec-10] ERROR AdminUserAdminController - 管理员用户登录校验失败
org.apache.ibatis.binding.BindingException: Invalid bound statement (not found): com.ywzai.infrastructure.dao.IAdminUserDao.queryByUsernameAndPassword
	at org.apache.ibatis.binding.MapperMethod$SqlCommand.<init>(MapperMethod.java:229)
	at org.apache.ibatis.binding.MapperMethod.<init>(MapperMethod.java:53)
	at org.apache.ibatis.binding.MapperProxy.lambda$cachedInvoker$0(MapperProxy.java:96)
	at java.base/java.util.concurrent.ConcurrentHashMap.computeIfAbsent(ConcurrentHashMap.java:1708)
	at org.apache.ibatis.util.MapUtil.computeIfAbsent(MapUtil.java:36)
	at org.apache.ibatis.binding.MapperProxy.cachedInvoker(MapperProxy.java:94)
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:86)
	at jdk.proxy2/jdk.proxy2.$Proxy97.queryByUsernameAndPassword(Unknown Source)
	at com.ywzai.trigger.http.admin.AdminUserAdminController.validateAdminUserLogin(AdminUserAdminController.java:473)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:257)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1088)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:842)
25-10-18.12:32:27.116 [http-nio-8099-exec-1] INFO  AdminUserAdminController - 管理员用户登录校验请求：admin
25-10-18.12:32:27.117 [http-nio-8099-exec-1] ERROR AdminUserAdminController - 管理员用户登录校验失败
org.apache.ibatis.binding.BindingException: Invalid bound statement (not found): com.ywzai.infrastructure.dao.IAdminUserDao.queryByUsernameAndPassword
	at org.apache.ibatis.binding.MapperMethod$SqlCommand.<init>(MapperMethod.java:229)
	at org.apache.ibatis.binding.MapperMethod.<init>(MapperMethod.java:53)
	at org.apache.ibatis.binding.MapperProxy.lambda$cachedInvoker$0(MapperProxy.java:96)
	at java.base/java.util.concurrent.ConcurrentHashMap.computeIfAbsent(ConcurrentHashMap.java:1708)
	at org.apache.ibatis.util.MapUtil.computeIfAbsent(MapUtil.java:36)
	at org.apache.ibatis.binding.MapperProxy.cachedInvoker(MapperProxy.java:94)
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:86)
	at jdk.proxy2/jdk.proxy2.$Proxy97.queryByUsernameAndPassword(Unknown Source)
	at com.ywzai.trigger.http.admin.AdminUserAdminController.validateAdminUserLogin(AdminUserAdminController.java:473)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:257)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1088)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:842)
25-10-18.12:32:49.246 [test-task-scheduler-4] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.12:32:49.447 [test-task-scheduler-4] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.12:33:19.257 [test-task-scheduler-4] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.12:33:22.886 [test-task-scheduler-4] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.12:33:49.254 [test-task-scheduler-4] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.12:33:49.453 [test-task-scheduler-4] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.12:34:19.253 [test-task-scheduler-4] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.12:34:19.455 [test-task-scheduler-4] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.12:34:49.252 [test-task-scheduler-4] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.12:34:49.458 [test-task-scheduler-4] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.12:35:00.002 [test-task-scheduler-5] INFO  TaskJobService         - 开始清理无效的任务
25-10-18.12:35:00.151 [test-task-scheduler-5] INFO  TaskJobService         - 发现1个无效任务需要清理
25-10-18.12:35:00.151 [test-task-scheduler-5] INFO  TaskJobService         - 无效任务清理完成，当前活跃任务数: 0
25-10-18.12:35:19.248 [test-task-scheduler-1] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.12:35:20.075 [test-task-scheduler-1] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.12:35:49.252 [test-task-scheduler-1] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.12:35:49.339 [test-task-scheduler-1] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.12:36:07.029 [SpringApplicationShutdownHook] INFO  GracefulShutdown       - Commencing graceful shutdown. Waiting for active requests to complete
25-10-18.12:36:07.272 [tomcat-shutdown ] INFO  GracefulShutdown       - Graceful shutdown complete
25-10-18.12:36:07.275 [SpringApplicationShutdownHook] INFO  TaskJobService         - 开始停止所有任务
25-10-18.12:36:07.275 [SpringApplicationShutdownHook] INFO  TaskJobService         - 所有任务已停止
25-10-18.12:36:07.277 [SpringApplicationShutdownHook] INFO  HikariDataSource       - MainHikariPool - Shutdown initiated...
25-10-18.12:36:08.816 [SpringApplicationShutdownHook] INFO  HikariDataSource       - MainHikariPool - Shutdown completed.
25-10-18.12:36:11.285 [main            ] INFO  Application            - Starting Application using Java 17.0.14 with PID 25192 (D:\java\ideapublic\ywz-ai-agent-station-study\ywz-ai-agent-station-study-app\target\classes started by ywz in D:\java\ideapublic\ywz-ai-agent-station-study)
25-10-18.12:36:11.286 [main            ] INFO  Application            - The following 1 profile is active: "dev"
25-10-18.12:36:12.758 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port 8099 (http)
25-10-18.12:36:12.772 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8099"]
25-10-18.12:36:12.775 [main            ] INFO  StandardService        - Starting service [Tomcat]
25-10-18.12:36:12.775 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/10.1.36]
25-10-18.12:36:12.883 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
25-10-18.12:36:12.883 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1564 ms
25-10-18.12:36:13.300 [main            ] INFO  PgVectorStore          - Using the vector table name: vector_store_openai. Is empty: false
25-10-18.12:36:13.316 [main            ] INFO  PgVectorStore          - Initializing PGVectorStore schema for table: vector_store_openai in schema: public
25-10-18.12:36:13.316 [main            ] INFO  PgVectorStore          - vectorTableValidationsEnabled false
25-10-18.12:36:13.807 [main            ] INFO  TaskJobAutoConfigBean  - xfg-wrench，任务调度器初始化完成。线程池大小: 5, 线程名前缀: test-task-scheduler-
25-10-18.12:36:13.812 [main            ] INFO  TaskJobService         - 开始初始化任务调度配置
25-10-18.12:36:13.824 [main            ] INFO  HikariDataSource       - MainHikariPool - Starting...
25-10-18.12:36:14.757 [main            ] INFO  HikariPool             - MainHikariPool - Added connection com.mysql.cj.jdbc.ConnectionImpl@7be59669
25-10-18.12:36:14.758 [main            ] INFO  HikariDataSource       - MainHikariPool - Start completed.
25-10-18.12:36:14.872 [main            ] INFO  TaskJobService         - 任务调度配置初始化完成，已加载任务数: 0
25-10-18.12:36:14.873 [main            ] INFO  TaskJobAutoConfigBean  - xfg-wrench，任务调度作业初始化完成。刷新间隔: 30000ms, 清理cron: 0 0/5 * * * ?
25-10-18.12:36:14.962 [main            ] INFO  OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
25-10-18.12:36:15.386 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8099"]
25-10-18.12:36:15.394 [main            ] INFO  TomcatWebServer        - Tomcat started on port 8099 (http) with context path '/'
25-10-18.12:36:15.402 [main            ] INFO  Application            - Started Application in 4.589 seconds (process running for 5.311)
25-10-18.12:36:15.403 [test-task-scheduler-1] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.12:36:15.404 [main            ] INFO  AiAgentAutoConfiguration - AI Agent 自动装配开始，配置: AiAgentAutoConfigProperties(enabled=true, clientIds=[6101])
25-10-18.12:36:15.575 [test-task-scheduler-1] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.12:36:15.681 [pool-2-thread-1 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_api) [48376249]
25-10-18.12:36:15.682 [pool-2-thread-2 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_model) [48376249]
25-10-18.12:36:15.682 [pool-2-thread-3 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_prompt) [48376249]
25-10-18.12:36:15.682 [pool-2-thread-4 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_advisor) [48376249]
25-10-18.12:36:15.682 [pool-2-thread-5 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_tool_mcp) [48376249]
25-10-18.12:36:15.682 [pool-2-thread-6 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client) [48376249]
25-10-18.12:36:16.113 [pool-2-thread-2 ] INFO  AgentRepository        - AiClientModelNode: 获取模型信息成功: 1000
25-10-18.12:36:16.114 [pool-2-thread-5 ] INFO  AgentRepository        - 查询modelId对应的mcpId列表 [5006]
25-10-18.12:36:16.184 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_api_1001
25-10-18.12:36:16.595 [HttpClient-11-Worker-0] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[completions=null, experimental={}, logging=null, prompts=PromptCapabilities[listChanged=false], resources=ResourceCapabilities[subscribe=false, listChanged=false], tools=ToolCapabilities[listChanged=false]], Info: Implementation[name=AIsearch, version=1.4.1] and Instructions null
25-10-18.12:36:16.678 [main            ] INFO  AiClientToolMcpNode    - SSE MCP Initialized: InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[completions=null, experimental={}, logging=null, prompts=PromptCapabilities[listChanged=false], resources=ResourceCapabilities[subscribe=false, listChanged=false], tools=ToolCapabilities[listChanged=false]], serverInfo=Implementation[name=AIsearch, version=1.4.1], instructions=null]
25-10-18.12:36:16.680 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5006
25-10-18.12:36:16.680 [main            ] INFO  AiClientModelNode      - 开始初始化 ai client model
25-10-18.12:36:16.790 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_1000
25-10-18.12:36:16.790 [main            ] WARN  AiClientAdvisorNode    - 没有需要被初始化的顾问角色
25-10-18.12:36:16.799 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_48376249
25-10-18.12:36:16.861 [pool-2-thread-7 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_api) [48376249]
25-10-18.12:36:16.861 [pool-2-thread-8 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_model) [48376249]
25-10-18.12:36:16.861 [pool-2-thread-9 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_prompt) [48376249]
25-10-18.12:36:16.861 [pool-2-thread-12] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client) [48376249]
25-10-18.12:36:16.861 [pool-2-thread-10] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_advisor) [48376249]
25-10-18.12:36:16.861 [pool-2-thread-11] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_tool_mcp) [48376249]
25-10-18.12:36:16.988 [pool-2-thread-11] INFO  AgentRepository        - 查询modelId对应的mcpId列表 [5006]
25-10-18.12:36:16.999 [pool-2-thread-8 ] INFO  AgentRepository        - AiClientModelNode: 获取模型信息成功: 1000
25-10-18.12:36:17.024 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_api_1001
25-10-18.12:36:17.292 [HttpClient-14-Worker-0] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[completions=null, experimental={}, logging=null, prompts=PromptCapabilities[listChanged=false], resources=ResourceCapabilities[subscribe=false, listChanged=false], tools=ToolCapabilities[listChanged=false]], Info: Implementation[name=AIsearch, version=1.4.1] and Instructions null
25-10-18.12:36:17.358 [main            ] INFO  AiClientToolMcpNode    - SSE MCP Initialized: InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[completions=null, experimental={}, logging=null, prompts=PromptCapabilities[listChanged=false], resources=ResourceCapabilities[subscribe=false, listChanged=false], tools=ToolCapabilities[listChanged=false]], serverInfo=Implementation[name=AIsearch, version=1.4.1], instructions=null]
25-10-18.12:36:17.360 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5006
25-10-18.12:36:17.360 [main            ] INFO  AiClientModelNode      - 开始初始化 ai client model
25-10-18.12:36:17.449 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_1000
25-10-18.12:36:17.449 [main            ] WARN  AiClientAdvisorNode    - 没有需要被初始化的顾问角色
25-10-18.12:36:17.449 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_48376249
25-10-18.12:36:17.565 [main            ] INFO  AiAgentAutoConfiguration - AI Agent 自动装配完成 [{"agentId":"85374287","agentName":"测试Agent","channel":"agent","description":"测试Agent","status":1},{"agentId":"20099179","agentName":"111-测试model","channel":"agent","description":"111","status":1}]
25-10-18.12:36:29.915 [http-nio-8099-exec-1] INFO  [/]                    - Initializing Spring DispatcherServlet 'dispatcherServlet'
25-10-18.12:36:29.915 [http-nio-8099-exec-1] INFO  DispatcherServlet      - Initializing Servlet 'dispatcherServlet'
25-10-18.12:36:29.916 [http-nio-8099-exec-1] INFO  DispatcherServlet      - Completed initialization in 1 ms
25-10-18.12:36:29.955 [http-nio-8099-exec-1] INFO  AdminUserAdminController - 管理员用户登录校验请求：admin
25-10-18.12:36:30.180 [http-nio-8099-exec-4] INFO  AiAgentDataStatisticsAdminController - 开始获取系统数据统计
25-10-18.12:36:30.912 [http-nio-8099-exec-4] INFO  AiAgentDataStatisticsAdminController - 系统数据统计获取成功：智能体数量=8, 客户端数量=18, MCP工具数量=9, 系统提示数量=15, 知识库数量=1, 顾问数量=5, 模型数量=7
25-10-18.12:36:45.408 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.12:36:45.745 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.12:36:53.824 [http-nio-8099-exec-6] INFO  AiClientModelAdminController - 根据条件查询AI客户端模型配置列表请求：AiClientModelQueryRequestDTO(modelId=null, apiId=null, modelType=null, status=null)
25-10-18.12:36:57.488 [http-nio-8099-exec-7] INFO  AiClientRagOrderAdminController - 分页查询知识库配置列表：AiClientRagOrderQueryRequestDTO(ragId=null, ragName=null, knowledgeTag=null, status=null, pageNum=1, pageSize=10)
25-10-18.12:37:11.779 [http-nio-8099-exec-8] INFO  AiAgentDrawAdminController - 查询拖拉拽流程图配置列表请求：AiAgentDrawConfigQueryRequestDTO(configId=null, configName=null, agentId=null, status=null, pageNum=1, pageSize=10)
25-10-18.12:37:15.403 [test-task-scheduler-3] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.12:37:15.528 [test-task-scheduler-3] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.12:37:29.762 [http-nio-8099-exec-2] INFO  AiAgentDrawAdminController - 获取流程图配置请求，configId: 10f0c0e99732426e9e0ba6f2abfd1d5c
25-10-18.12:37:40.828 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 开始保存画布信息: 111
25-10-18.12:37:40.831 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 提取字段:[{"key":"","value":{"content":"111"}}] ,agentName
25-10-18.12:37:40.832 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 提取字段:[{"key":"","value":{"content":"1111"}}] ,description
25-10-18.12:37:40.832 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 提取字段:"agent" ,channel
25-10-18.12:37:40.833 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 提取字段:"flowAgentExecuteStrategy" ,strategy
25-10-18.12:37:40.833 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 解析到agent信息: agentName=111, description=1111, channel=agent, strategy=flowAgentExecuteStrategy
25-10-18.12:37:41.178 [http-nio-8099-exec-1] ERROR AiAgentDrawAdminController - 保存流程图配置失败
org.springframework.dao.DuplicateKeyException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '1' for key 'ai_agent.uk_agent_id'
### The error may exist in file [D:\java\ideapublic\ywz-ai-agent-station-study\ywz-ai-agent-station-study-app\target\classes\mybatis\mapper\ai_agent_mapper.xml]
### The error may involve com.ywzai.infrastructure.dao.IAiAgentDao.insert-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO ai_agent(agent_id, agent_name, description, channel, strategy,status, create_time, update_time)         VALUES(?, ?, ?, ?,?, ?, NOW(), NOW())
### Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '1' for key 'ai_agent.uk_agent_id'
; Duplicate entry '1' for key 'ai_agent.uk_agent_id'
	at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.doTranslate(SQLErrorCodeSQLExceptionTranslator.java:254)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:107)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:93)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:347)
	at jdk.proxy2/jdk.proxy2.$Proxy78.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:224)
	at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:62)
	at org.apache.ibatis.binding.MapperProxy$PlainMethodInvoker.invoke(MapperProxy.java:141)
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:86)
	at jdk.proxy2/jdk.proxy2.$Proxy89.insert(Unknown Source)
	at com.ywzai.trigger.http.admin.AiAgentDrawAdminController.saveDrawConfig(AiAgentDrawAdminController.java:177)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727)
	at com.ywzai.trigger.http.admin.AiAgentDrawAdminController$$SpringCGLIB$$0.saveDrawConfig(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:257)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1088)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '1' for key 'ai_agent.uk_agent_id'
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:371)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:48)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:75)
	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:50)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:76)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:333)
	... 69 common frames omitted
25-10-18.12:37:45.413 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.12:37:45.556 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.12:38:15.410 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.12:38:17.838 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.12:38:45.410 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.12:38:45.476 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.12:38:49.965 [http-nio-8099-exec-5] INFO  AiAgentDrawAdminController - 开始保存画布信息: 111
25-10-18.12:38:49.966 [http-nio-8099-exec-5] INFO  AiAgentDrawAdminController - 提取字段:[{"key":"","value":{"content":"111"}}] ,agentName
25-10-18.12:38:49.966 [http-nio-8099-exec-5] INFO  AiAgentDrawAdminController - 提取字段:[{"key":"","value":{"content":"1111"}}] ,description
25-10-18.12:38:49.966 [http-nio-8099-exec-5] INFO  AiAgentDrawAdminController - 提取字段:"agent" ,channel
25-10-18.12:38:49.966 [http-nio-8099-exec-5] INFO  AiAgentDrawAdminController - 提取字段:"flowAgentExecuteStrategy" ,strategy
25-10-18.12:38:49.966 [http-nio-8099-exec-5] INFO  AiAgentDrawAdminController - 解析到agent信息: agentName=111, description=1111, channel=agent, strategy=flowAgentExecuteStrategy
25-10-18.12:38:50.191 [http-nio-8099-exec-5] ERROR AiAgentDrawAdminController - 保存流程图配置失败
org.springframework.dao.DuplicateKeyException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '1' for key 'ai_agent.uk_agent_id'
### The error may exist in file [D:\java\ideapublic\ywz-ai-agent-station-study\ywz-ai-agent-station-study-app\target\classes\mybatis\mapper\ai_agent_mapper.xml]
### The error may involve com.ywzai.infrastructure.dao.IAiAgentDao.insert-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO ai_agent(agent_id, agent_name, description, channel, strategy,status, create_time, update_time)         VALUES(?, ?, ?, ?,?, ?, NOW(), NOW())
### Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '1' for key 'ai_agent.uk_agent_id'
; Duplicate entry '1' for key 'ai_agent.uk_agent_id'
	at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.doTranslate(SQLErrorCodeSQLExceptionTranslator.java:254)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:107)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:93)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:347)
	at jdk.proxy2/jdk.proxy2.$Proxy78.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:224)
	at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:62)
	at org.apache.ibatis.binding.MapperProxy$PlainMethodInvoker.invoke(MapperProxy.java:141)
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:86)
	at jdk.proxy2/jdk.proxy2.$Proxy89.insert(Unknown Source)
	at com.ywzai.trigger.http.admin.AiAgentDrawAdminController.saveDrawConfig(AiAgentDrawAdminController.java:177)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727)
	at com.ywzai.trigger.http.admin.AiAgentDrawAdminController$$SpringCGLIB$$0.saveDrawConfig(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:257)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1088)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '1' for key 'ai_agent.uk_agent_id'
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:371)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:48)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:75)
	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:50)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:76)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:333)
	... 69 common frames omitted
25-10-18.12:39:15.413 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.12:39:15.591 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.12:39:45.409 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.12:39:45.567 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.12:39:54.300 [http-nio-8099-exec-3] INFO  AiAgentDrawAdminController - 查询拖拉拽流程图配置列表请求：AiAgentDrawConfigQueryRequestDTO(configId=null, configName=null, agentId=null, status=null, pageNum=1, pageSize=10)
25-10-18.12:40:00.010 [test-task-scheduler-3] INFO  TaskJobService         - 开始清理无效的任务
25-10-18.12:40:00.134 [test-task-scheduler-3] INFO  TaskJobService         - 发现1个无效任务需要清理
25-10-18.12:40:00.134 [test-task-scheduler-3] INFO  TaskJobService         - 无效任务清理完成，当前活跃任务数: 0
25-10-18.12:40:13.557 [http-nio-8099-exec-8] INFO  AiAgentDrawAdminController - 获取流程图配置请求，configId: 1388a9e67e7b4c8fa322279b9d04aa4b
25-10-18.12:40:13.833 [http-nio-8099-exec-1] INFO  AiClientModelAdminController - 查询所有启用的AI客户端模型配置请求
25-10-18.12:40:13.833 [http-nio-8099-exec-10] INFO  AiClientAdminController - 查询所有AI客户端配置
25-10-18.12:40:15.403 [test-task-scheduler-4] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.12:40:15.596 [test-task-scheduler-4] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.12:40:22.657 [http-nio-8099-exec-4] INFO  AiAgentDrawAdminController - 查询拖拉拽流程图配置列表请求：AiAgentDrawConfigQueryRequestDTO(configId=null, configName=null, agentId=null, status=null, pageNum=1, pageSize=10)
25-10-18.12:40:24.002 [http-nio-8099-exec-5] INFO  AiAgentDrawAdminController - 查询拖拉拽流程图配置列表请求：AiAgentDrawConfigQueryRequestDTO(configId=null, configName=null, agentId=null, status=null, pageNum=1, pageSize=10)
25-10-18.12:40:40.155 [http-nio-8099-exec-6] INFO  AiAgentDrawAdminController - 获取流程图配置请求，configId: 1388a9e67e7b4c8fa322279b9d04aa4b
25-10-18.12:40:40.440 [http-nio-8099-exec-3] INFO  AiClientAdminController - 查询所有AI客户端配置
25-10-18.12:40:40.442 [http-nio-8099-exec-7] INFO  AiClientModelAdminController - 查询所有启用的AI客户端模型配置请求
25-10-18.12:40:45.406 [test-task-scheduler-4] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.12:40:46.829 [test-task-scheduler-4] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.12:41:15.401 [test-task-scheduler-4] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.12:41:15.601 [test-task-scheduler-4] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.12:41:45.414 [test-task-scheduler-4] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.12:41:48.369 [test-task-scheduler-4] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.12:42:15.403 [test-task-scheduler-4] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.12:42:15.569 [test-task-scheduler-4] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.12:42:45.414 [test-task-scheduler-4] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.12:42:45.609 [test-task-scheduler-4] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.12:42:56.686 [http-nio-8099-exec-2] INFO  AiAgentDrawAdminController - 查询拖拉拽流程图配置列表请求：AiAgentDrawConfigQueryRequestDTO(configId=null, configName=null, agentId=null, status=null, pageNum=1, pageSize=10)
25-10-18.12:42:57.839 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 查询拖拉拽流程图配置列表请求：AiAgentDrawConfigQueryRequestDTO(configId=null, configName=null, agentId=null, status=null, pageNum=1, pageSize=10)
25-10-18.12:43:00.892 [http-nio-8099-exec-10] INFO  AiAgentDrawAdminController - 查询拖拉拽流程图配置列表请求：AiAgentDrawConfigQueryRequestDTO(configId=null, configName=null, agentId=null, status=null, pageNum=1, pageSize=10)
25-10-18.12:43:15.411 [test-task-scheduler-4] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.12:43:15.613 [test-task-scheduler-4] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.12:43:26.053 [http-nio-8099-exec-5] INFO  AiAgentDrawAdminController - 获取流程图配置请求，configId: 16a6e20a0da7445bba258b25e572f99b
25-10-18.12:43:26.338 [http-nio-8099-exec-6] INFO  AiClientAdminController - 查询所有AI客户端配置
25-10-18.12:43:26.339 [http-nio-8099-exec-3] INFO  AiClientModelAdminController - 查询所有启用的AI客户端模型配置请求
25-10-18.12:43:26.348 [http-nio-8099-exec-9] INFO  AiClientToolMcpAdminController - 查询所有MCP客户端配置
25-10-18.12:43:45.412 [test-task-scheduler-4] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.12:43:45.615 [test-task-scheduler-4] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.12:44:15.405 [test-task-scheduler-4] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.12:44:15.618 [test-task-scheduler-4] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.12:44:45.412 [test-task-scheduler-4] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.12:44:45.480 [test-task-scheduler-4] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.12:45:00.011 [test-task-scheduler-1] INFO  TaskJobService         - 开始清理无效的任务
25-10-18.12:45:00.162 [test-task-scheduler-1] INFO  TaskJobService         - 发现1个无效任务需要清理
25-10-18.12:45:00.162 [test-task-scheduler-1] INFO  TaskJobService         - 无效任务清理完成，当前活跃任务数: 0
25-10-18.12:45:15.415 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.12:45:15.624 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.12:45:45.409 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.12:45:51.270 [test-task-scheduler-2] WARN  PoolBase               - MainHikariPool - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@7be59669 (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
25-10-18.12:45:51.463 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.12:46:14.682 [http-nio-8099-exec-10] INFO  AiAgentDrawAdminController - 开始保存画布信息: 测试Agent
25-10-18.12:46:14.684 [http-nio-8099-exec-10] INFO  AiAgentDrawAdminController - 提取字段:[{"key":"","value":{"content":"测试Agent"}}] ,agentName
25-10-18.12:46:14.684 [http-nio-8099-exec-10] INFO  AiAgentDrawAdminController - 提取字段:[{"key":"","value":{"content":"测试Agent"}}] ,description
25-10-18.12:46:14.684 [http-nio-8099-exec-10] INFO  AiAgentDrawAdminController - 提取字段:"agent" ,channel
25-10-18.12:46:14.684 [http-nio-8099-exec-10] INFO  AiAgentDrawAdminController - 提取字段:"fixedAgentExecuteStrategy" ,strategy
25-10-18.12:46:14.684 [http-nio-8099-exec-10] INFO  AiAgentDrawAdminController - 解析到agent信息: agentName=测试Agent, description=测试Agent, channel=agent, strategy=fixedAgentExecuteStrategy
25-10-18.12:46:14.886 [http-nio-8099-exec-10] ERROR AiAgentDrawAdminController - 保存流程图配置失败
org.springframework.dao.DuplicateKeyException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '1' for key 'ai_agent.uk_agent_id'
### The error may exist in file [D:\java\ideapublic\ywz-ai-agent-station-study\ywz-ai-agent-station-study-app\target\classes\mybatis\mapper\ai_agent_mapper.xml]
### The error may involve com.ywzai.infrastructure.dao.IAiAgentDao.insert-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO ai_agent(agent_id, agent_name, description, channel, strategy,status, create_time, update_time)         VALUES(?, ?, ?, ?,?, ?, NOW(), NOW())
### Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '1' for key 'ai_agent.uk_agent_id'
; Duplicate entry '1' for key 'ai_agent.uk_agent_id'
	at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.doTranslate(SQLErrorCodeSQLExceptionTranslator.java:254)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:107)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:93)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:347)
	at jdk.proxy2/jdk.proxy2.$Proxy78.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:224)
	at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:62)
	at org.apache.ibatis.binding.MapperProxy$PlainMethodInvoker.invoke(MapperProxy.java:141)
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:86)
	at jdk.proxy2/jdk.proxy2.$Proxy89.insert(Unknown Source)
	at com.ywzai.trigger.http.admin.AiAgentDrawAdminController.saveDrawConfig(AiAgentDrawAdminController.java:177)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727)
	at com.ywzai.trigger.http.admin.AiAgentDrawAdminController$$SpringCGLIB$$0.saveDrawConfig(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:257)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1088)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '1' for key 'ai_agent.uk_agent_id'
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:371)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:48)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:75)
	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:50)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:76)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:333)
	... 69 common frames omitted
25-10-18.12:46:15.408 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.12:46:15.511 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.12:46:45.416 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.12:46:45.631 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.12:47:15.415 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.12:47:15.634 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.12:47:45.407 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.12:47:45.637 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.12:48:15.404 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.12:48:15.640 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.12:48:45.408 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.12:48:45.786 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.12:49:15.409 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.12:49:15.469 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.12:49:45.414 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.12:49:45.477 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.12:50:00.005 [test-task-scheduler-3] INFO  TaskJobService         - 开始清理无效的任务
25-10-18.12:50:00.071 [test-task-scheduler-3] INFO  TaskJobService         - 发现1个无效任务需要清理
25-10-18.12:50:00.071 [test-task-scheduler-3] INFO  TaskJobService         - 无效任务清理完成，当前活跃任务数: 0
25-10-18.12:50:15.412 [test-task-scheduler-4] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.12:50:15.649 [test-task-scheduler-4] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.12:50:45.402 [test-task-scheduler-4] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.12:50:46.638 [test-task-scheduler-4] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.12:50:48.400 [http-nio-8099-exec-5] INFO  AiAgentDataStatisticsAdminController - 开始获取系统数据统计
25-10-18.12:50:48.887 [http-nio-8099-exec-7] INFO  AiAgentDrawAdminController - 获取流程图配置请求，configId: 16a6e20a0da7445bba258b25e572f99b
25-10-18.12:50:49.031 [http-nio-8099-exec-5] INFO  AiAgentDataStatisticsAdminController - 系统数据统计获取成功：智能体数量=8, 客户端数量=18, MCP工具数量=9, 系统提示数量=15, 知识库数量=1, 顾问数量=5, 模型数量=7
25-10-18.12:50:49.654 [http-nio-8099-exec-6] INFO  AiClientAdminController - 查询所有AI客户端配置
25-10-18.12:50:49.656 [http-nio-8099-exec-3] INFO  AiClientModelAdminController - 查询所有启用的AI客户端模型配置请求
25-10-18.12:50:49.657 [http-nio-8099-exec-9] INFO  AiClientToolMcpAdminController - 查询所有MCP客户端配置
25-10-18.12:50:52.880 [http-nio-8099-exec-8] INFO  AiAgentDrawAdminController - 查询拖拉拽流程图配置列表请求：AiAgentDrawConfigQueryRequestDTO(configId=null, configName=null, agentId=null, status=null, pageNum=1, pageSize=10)
25-10-18.12:50:54.722 [http-nio-8099-exec-2] INFO  AiAgentDrawAdminController - 获取流程图配置请求，configId: 16a6e20a0da7445bba258b25e572f99b
25-10-18.12:50:54.841 [http-nio-8099-exec-1] INFO  AiClientAdminController - 查询所有AI客户端配置
25-10-18.12:50:54.841 [http-nio-8099-exec-10] INFO  AiClientModelAdminController - 查询所有启用的AI客户端模型配置请求
25-10-18.12:50:54.841 [http-nio-8099-exec-4] INFO  AiClientToolMcpAdminController - 查询所有MCP客户端配置
25-10-18.12:50:57.458 [http-nio-8099-exec-5] INFO  AiAgentDrawAdminController - 开始保存画布信息: 测试Agent
25-10-18.12:50:57.459 [http-nio-8099-exec-5] INFO  AiAgentDrawAdminController - 提取字段:[{"key":"","value":{"content":"测试Agent"}}] ,agentName
25-10-18.12:50:57.459 [http-nio-8099-exec-5] INFO  AiAgentDrawAdminController - 提取字段:[{"key":"","value":{"content":"测试Agent"}}] ,description
25-10-18.12:50:57.459 [http-nio-8099-exec-5] INFO  AiAgentDrawAdminController - 提取字段:"agent" ,channel
25-10-18.12:50:57.459 [http-nio-8099-exec-5] INFO  AiAgentDrawAdminController - 提取字段:"fixedAgentExecuteStrategy" ,strategy
25-10-18.12:50:57.459 [http-nio-8099-exec-5] INFO  AiAgentDrawAdminController - 解析到agent信息: agentName=测试Agent, description=测试Agent, channel=agent, strategy=fixedAgentExecuteStrategy
25-10-18.12:50:57.630 [http-nio-8099-exec-5] INFO  AiAgentDrawAdminController - 开始更新Client关联表数据
25-10-18.12:50:57.640 [http-nio-8099-exec-5] INFO  DrawConfigParser       - 开始解析边关系，总共4条边
25-10-18.12:50:57.640 [http-nio-8099-exec-5] WARN  DrawConfigParser       - 找不到节点信息，sourceNodeId: start_0, targetNodeId: agent_QyqMj
25-10-18.12:50:57.640 [http-nio-8099-exec-5] INFO  DrawConfigParser       - 创建配置关系: client(48376249) -> model(1000), sourcePortId: client-output
25-10-18.12:50:57.642 [http-nio-8099-exec-5] INFO  DrawConfigParser       - 成功创建配置关系[1]: client:48376249 -> model:1000
25-10-18.12:50:57.642 [http-nio-8099-exec-5] INFO  DrawConfigParser       - 创建配置关系: model(1000) -> tool_mcp(5006), sourcePortId: model_select_330YCd
25-10-18.12:50:57.642 [http-nio-8099-exec-5] INFO  DrawConfigParser       - 成功创建配置关系[2]: model:1000 -> tool_mcp:5006
25-10-18.12:50:57.642 [http-nio-8099-exec-5] INFO  DrawConfigParser       - 边关系解析完成，处理0条边，跳过2条，生成2条有效配置关系
25-10-18.12:50:57.642 [http-nio-8099-exec-5] INFO  DrawConfigParser       - 节点类型统计结果
25-10-18.12:50:57.642 [http-nio-8099-exec-5] INFO  DrawConfigParser       - 节点类型: agent, 数量: 1 1有引用id
25-10-18.12:50:57.642 [http-nio-8099-exec-5] INFO  DrawConfigParser       - 节点类型: tool_mcp, 数量: 1 1有引用id
25-10-18.12:50:57.642 [http-nio-8099-exec-5] INFO  DrawConfigParser       - 节点类型: client, 数量: 1 1有引用id
25-10-18.12:50:57.642 [http-nio-8099-exec-5] INFO  DrawConfigParser       - 节点类型: model, 数量: 1 1有引用id
25-10-18.12:50:57.642 [http-nio-8099-exec-5] INFO  DrawConfigParser       - 节点配置关系统计结果
25-10-18.12:50:57.642 [http-nio-8099-exec-5] INFO  DrawConfigParser       - 关系类型: client -> model, 数量: 1
25-10-18.12:50:57.642 [http-nio-8099-exec-5] INFO  DrawConfigParser       - 关系类型: model -> tool_mcp, 数量: 1
25-10-18.12:50:57.642 [http-nio-8099-exec-5] INFO  DrawConfigParser       - 总计: 4个节点，4条边，2条有效配置关系
25-10-18.12:50:57.642 [http-nio-8099-exec-5] INFO  DrawConfigParser       - === 统计结束 ===
25-10-18.12:50:57.642 [http-nio-8099-exec-5] INFO  DrawConfigParser       - 解析配置数据完成，生成2条关系
25-10-18.12:50:57.675 [http-nio-8099-exec-5] INFO  AiAgentDrawAdminController - 已存在相同的记录, 不需要重复插入: AiClientConfig(id=null, sourceType=client, sourceId=48376249, targetType=model, targetId=1000, extParam={"sourcePortId":"client-output","sourceTitle":"Client_2","targetTitle":"Model_1"}, status=1, createTime=2025-10-18T12:50:57.641985100, updateTime=2025-10-18T12:50:57.641985100)
25-10-18.12:50:57.711 [http-nio-8099-exec-5] INFO  AiAgentDrawAdminController - 已存在相同的记录, 不需要重复插入: AiClientConfig(id=null, sourceType=model, sourceId=1000, targetType=tool_mcp, targetId=5006, extParam={"sourcePortId":"model_select_330YCd","sourceTitle":"Model_1","targetTitle":"ToolMcp_2"}, status=1, createTime=2025-10-18T12:50:57.642992200, updateTime=2025-10-18T12:50:57.642992200)
25-10-18.12:50:57.711 [http-nio-8099-exec-5] INFO  AiAgentDrawAdminController - 开始更新agent_flow_config表数据
25-10-18.12:50:57.712 [http-nio-8099-exec-5] INFO  AiAgentDrawAdminController - 提取字段:[{"key":"client_type_diuEHK","value":"DEFAULT"}] ,clientType
25-10-18.12:50:57.712 [http-nio-8099-exec-5] INFO  AiAgentDrawAdminController - 提取字段:"48376249" ,clientId
25-10-18.12:50:57.712 [http-nio-8099-exec-5] INFO  AiAgentDrawAdminController - 提取字段:"测试客户端" ,clientName
25-10-18.12:50:57.712 [http-nio-8099-exec-5] INFO  AiAgentDrawAdminController - 提取字段:[{"key":"sequence_JB6vrX","value":1}] ,sequence
25-10-18.12:50:57.712 [http-nio-8099-exec-5] INFO  AiAgentDrawAdminController - 提取字段:[{"key":"step_prompt_D3X9MV","value":""}] ,stepPrompt
25-10-18.12:50:57.772 [http-nio-8099-exec-5] INFO  AiAgentDrawAdminController - 插入agent_flow_config表数据: AiAgentFlowConfig(id=null, agentId=73447253, clientId=48376249, clientName=测试客户端, clientType=DEFAULT, stepPrompt=, sequence=1, status=1, createTime=2025-10-18T12:50:57.712165200)
25-10-18.12:51:15.402 [test-task-scheduler-4] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.12:51:15.552 [test-task-scheduler-4] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.12:51:45.413 [test-task-scheduler-4] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.12:51:45.555 [test-task-scheduler-4] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.12:52:15.414 [test-task-scheduler-4] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.12:52:18.835 [test-task-scheduler-4] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.12:52:45.415 [test-task-scheduler-4] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.12:52:45.663 [test-task-scheduler-4] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.12:53:15.411 [test-task-scheduler-4] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.12:53:15.665 [test-task-scheduler-4] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.12:53:45.402 [test-task-scheduler-4] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.12:53:45.463 [test-task-scheduler-4] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.12:54:15.411 [test-task-scheduler-4] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.12:54:15.570 [test-task-scheduler-4] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.12:54:45.407 [test-task-scheduler-4] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.12:54:45.673 [test-task-scheduler-4] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.12:55:00.005 [test-task-scheduler-2] INFO  TaskJobService         - 开始清理无效的任务
25-10-18.12:55:00.188 [test-task-scheduler-2] INFO  TaskJobService         - 发现1个无效任务需要清理
25-10-18.12:55:00.188 [test-task-scheduler-2] INFO  TaskJobService         - 无效任务清理完成，当前活跃任务数: 0
25-10-18.12:55:15.416 [test-task-scheduler-1] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.12:55:15.573 [test-task-scheduler-1] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.12:55:42.096 [http-nio-8099-exec-9] INFO  AiAgentDrawAdminController - 开始保存画布信息: 测试Agent
25-10-18.12:55:42.097 [http-nio-8099-exec-9] INFO  AiAgentDrawAdminController - 提取字段:[{"key":"","value":{"content":"测试Agent"}}] ,agentName
25-10-18.12:55:42.097 [http-nio-8099-exec-9] INFO  AiAgentDrawAdminController - 提取字段:[{"key":"","value":{"content":"测试Agent"}}] ,description
25-10-18.12:55:42.097 [http-nio-8099-exec-9] INFO  AiAgentDrawAdminController - 提取字段:"agent" ,channel
25-10-18.12:55:42.097 [http-nio-8099-exec-9] INFO  AiAgentDrawAdminController - 提取字段:"fixedAgentExecuteStrategy" ,strategy
25-10-18.12:55:42.097 [http-nio-8099-exec-9] INFO  AiAgentDrawAdminController - 解析到agent信息: agentName=测试Agent, description=测试Agent, channel=agent, strategy=fixedAgentExecuteStrategy
25-10-18.12:55:42.505 [http-nio-8099-exec-9] INFO  AiAgentDrawAdminController - 开始更新Client关联表数据
25-10-18.12:55:42.506 [http-nio-8099-exec-9] INFO  DrawConfigParser       - 开始解析边关系，总共4条边
25-10-18.12:55:42.506 [http-nio-8099-exec-9] WARN  DrawConfigParser       - 找不到节点信息，sourceNodeId: start_0, targetNodeId: agent_QyqMj
25-10-18.12:55:42.506 [http-nio-8099-exec-9] INFO  DrawConfigParser       - 创建配置关系: client(48376249) -> model(1000), sourcePortId: client-output
25-10-18.12:55:42.506 [http-nio-8099-exec-9] INFO  DrawConfigParser       - 成功创建配置关系[1]: client:48376249 -> model:1000
25-10-18.12:55:42.506 [http-nio-8099-exec-9] INFO  DrawConfigParser       - 创建配置关系: model(1000) -> tool_mcp(5006), sourcePortId: model_select_330YCd
25-10-18.12:55:42.506 [http-nio-8099-exec-9] INFO  DrawConfigParser       - 成功创建配置关系[2]: model:1000 -> tool_mcp:5006
25-10-18.12:55:42.507 [http-nio-8099-exec-9] INFO  DrawConfigParser       - 边关系解析完成，处理0条边，跳过2条，生成2条有效配置关系
25-10-18.12:55:42.507 [http-nio-8099-exec-9] INFO  DrawConfigParser       - 节点类型统计结果
25-10-18.12:55:42.507 [http-nio-8099-exec-9] INFO  DrawConfigParser       - 节点类型: agent, 数量: 1 1有引用id
25-10-18.12:55:42.507 [http-nio-8099-exec-9] INFO  DrawConfigParser       - 节点类型: tool_mcp, 数量: 1 1有引用id
25-10-18.12:55:42.507 [http-nio-8099-exec-9] INFO  DrawConfigParser       - 节点类型: client, 数量: 1 1有引用id
25-10-18.12:55:42.507 [http-nio-8099-exec-9] INFO  DrawConfigParser       - 节点类型: model, 数量: 1 1有引用id
25-10-18.12:55:42.507 [http-nio-8099-exec-9] INFO  DrawConfigParser       - 节点配置关系统计结果
25-10-18.12:55:42.507 [http-nio-8099-exec-9] INFO  DrawConfigParser       - 关系类型: client -> model, 数量: 1
25-10-18.12:55:42.507 [http-nio-8099-exec-9] INFO  DrawConfigParser       - 关系类型: model -> tool_mcp, 数量: 1
25-10-18.12:55:42.507 [http-nio-8099-exec-9] INFO  DrawConfigParser       - 总计: 4个节点，4条边，2条有效配置关系
25-10-18.12:55:42.507 [http-nio-8099-exec-9] INFO  DrawConfigParser       - === 统计结束 ===
25-10-18.12:55:42.507 [http-nio-8099-exec-9] INFO  DrawConfigParser       - 解析配置数据完成，生成2条关系
25-10-18.12:55:42.547 [http-nio-8099-exec-9] INFO  AiAgentDrawAdminController - 已存在相同的记录, 不需要重复插入: AiClientConfig(id=null, sourceType=client, sourceId=48376249, targetType=model, targetId=1000, extParam={"sourcePortId":"client-output","sourceTitle":"Client_2","targetTitle":"Model_1"}, status=1, createTime=2025-10-18T12:55:42.506655300, updateTime=2025-10-18T12:55:42.506655300)
25-10-18.12:55:42.610 [http-nio-8099-exec-9] INFO  AiAgentDrawAdminController - 已存在相同的记录, 不需要重复插入: AiClientConfig(id=null, sourceType=model, sourceId=1000, targetType=tool_mcp, targetId=5006, extParam={"sourcePortId":"model_select_330YCd","sourceTitle":"Model_1","targetTitle":"ToolMcp_2"}, status=1, createTime=2025-10-18T12:55:42.506655300, updateTime=2025-10-18T12:55:42.506655300)
25-10-18.12:55:42.610 [http-nio-8099-exec-9] INFO  AiAgentDrawAdminController - 开始更新agent_flow_config表数据
25-10-18.12:55:42.611 [http-nio-8099-exec-9] INFO  AiAgentDrawAdminController - 提取字段:[{"key":"client_type_diuEHK","value":"DEFAULT"}] ,clientType
25-10-18.12:55:42.611 [http-nio-8099-exec-9] INFO  AiAgentDrawAdminController - 提取字段:"48376249" ,clientId
25-10-18.12:55:42.611 [http-nio-8099-exec-9] INFO  AiAgentDrawAdminController - 提取字段:"测试客户端" ,clientName
25-10-18.12:55:42.611 [http-nio-8099-exec-9] INFO  AiAgentDrawAdminController - 提取字段:[{"key":"sequence_JB6vrX","value":1}] ,sequence
25-10-18.12:55:42.611 [http-nio-8099-exec-9] INFO  AiAgentDrawAdminController - 提取字段:[{"key":"step_prompt_D3X9MV","value":""}] ,stepPrompt
25-10-18.12:55:42.761 [http-nio-8099-exec-9] INFO  AiAgentDrawAdminController - 插入agent_flow_config表数据: AiAgentFlowConfig(id=null, agentId=97565741, clientId=48376249, clientName=测试客户端, clientType=DEFAULT, stepPrompt=, sequence=1, status=1, createTime=2025-10-18T12:55:42.611774600)
25-10-18.12:55:45.408 [test-task-scheduler-1] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.12:55:45.784 [test-task-scheduler-1] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.12:56:15.415 [test-task-scheduler-1] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.12:56:15.580 [test-task-scheduler-1] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.12:56:45.416 [test-task-scheduler-1] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.12:56:45.582 [test-task-scheduler-1] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.12:56:53.307 [http-nio-8099-exec-2] INFO  AiAgentDrawAdminController - 查询拖拉拽流程图配置列表请求：AiAgentDrawConfigQueryRequestDTO(configId=null, configName=null, agentId=null, status=null, pageNum=1, pageSize=10)
25-10-18.12:57:01.198 [http-nio-8099-exec-10] INFO  AiAgentDrawAdminController - 查询拖拉拽流程图配置列表请求：AiAgentDrawConfigQueryRequestDTO(configId=null, configName=null, agentId=null, status=null, pageNum=2, pageSize=10)
25-10-18.12:57:03.701 [http-nio-8099-exec-4] INFO  AiAgentDrawAdminController - 查询拖拉拽流程图配置列表请求：AiAgentDrawConfigQueryRequestDTO(configId=null, configName=null, agentId=null, status=null, pageNum=1, pageSize=10)
25-10-18.12:57:06.739 [http-nio-8099-exec-5] INFO  AiAgentDrawAdminController - 获取流程图配置请求，configId: 652f73b71c054faf94fb549c5dc41438
25-10-18.12:57:09.201 [http-nio-8099-exec-6] INFO  AiClientAdminController - 查询所有AI客户端配置
25-10-18.12:57:09.204 [http-nio-8099-exec-7] INFO  AiClientModelAdminController - 查询所有启用的AI客户端模型配置请求
25-10-18.12:57:09.204 [http-nio-8099-exec-3] INFO  AiClientToolMcpAdminController - 查询所有MCP客户端配置
25-10-18.12:57:15.408 [test-task-scheduler-1] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.12:57:15.541 [test-task-scheduler-1] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.12:57:37.907 [http-nio-8099-exec-9] INFO  AiAgentDrawAdminController - 开始保存画布信息: 测试Agent
25-10-18.12:57:37.907 [http-nio-8099-exec-9] INFO  AiAgentDrawAdminController - 提取字段:[{"key":"","value":{"content":"测试Agent"}}] ,agentName
25-10-18.12:57:37.907 [http-nio-8099-exec-9] INFO  AiAgentDrawAdminController - 提取字段:[{"key":"","value":{"content":"测试Agent"}}] ,description
25-10-18.12:57:37.907 [http-nio-8099-exec-9] INFO  AiAgentDrawAdminController - 提取字段:"agent" ,channel
25-10-18.12:57:37.907 [http-nio-8099-exec-9] INFO  AiAgentDrawAdminController - 提取字段:"fixedAgentExecuteStrategy" ,strategy
25-10-18.12:57:37.907 [http-nio-8099-exec-9] INFO  AiAgentDrawAdminController - 解析到agent信息: agentName=测试Agent, description=测试Agent, channel=agent, strategy=fixedAgentExecuteStrategy
25-10-18.12:57:38.398 [http-nio-8099-exec-9] INFO  AiAgentDrawAdminController - 开始更新Client关联表数据
25-10-18.12:57:38.399 [http-nio-8099-exec-9] INFO  DrawConfigParser       - 开始解析边关系，总共4条边
25-10-18.12:57:38.399 [http-nio-8099-exec-9] WARN  DrawConfigParser       - 找不到节点信息，sourceNodeId: start_0, targetNodeId: agent_QyqMj
25-10-18.12:57:38.399 [http-nio-8099-exec-9] INFO  DrawConfigParser       - 创建配置关系: client(48376249) -> model(1000), sourcePortId: client-output
25-10-18.12:57:38.399 [http-nio-8099-exec-9] INFO  DrawConfigParser       - 成功创建配置关系[1]: client:48376249 -> model:1000
25-10-18.12:57:38.399 [http-nio-8099-exec-9] INFO  DrawConfigParser       - 创建配置关系: model(1000) -> tool_mcp(5006), sourcePortId: model_select_330YCd
25-10-18.12:57:38.399 [http-nio-8099-exec-9] INFO  DrawConfigParser       - 成功创建配置关系[2]: model:1000 -> tool_mcp:5006
25-10-18.12:57:38.399 [http-nio-8099-exec-9] INFO  DrawConfigParser       - 边关系解析完成，处理0条边，跳过2条，生成2条有效配置关系
25-10-18.12:57:38.399 [http-nio-8099-exec-9] INFO  DrawConfigParser       - 节点类型统计结果
25-10-18.12:57:38.399 [http-nio-8099-exec-9] INFO  DrawConfigParser       - 节点类型: agent, 数量: 1 1有引用id
25-10-18.12:57:38.399 [http-nio-8099-exec-9] INFO  DrawConfigParser       - 节点类型: tool_mcp, 数量: 1 1有引用id
25-10-18.12:57:38.399 [http-nio-8099-exec-9] INFO  DrawConfigParser       - 节点类型: client, 数量: 1 1有引用id
25-10-18.12:57:38.399 [http-nio-8099-exec-9] INFO  DrawConfigParser       - 节点类型: model, 数量: 1 1有引用id
25-10-18.12:57:38.399 [http-nio-8099-exec-9] INFO  DrawConfigParser       - 节点配置关系统计结果
25-10-18.12:57:38.399 [http-nio-8099-exec-9] INFO  DrawConfigParser       - 关系类型: client -> model, 数量: 1
25-10-18.12:57:38.399 [http-nio-8099-exec-9] INFO  DrawConfigParser       - 关系类型: model -> tool_mcp, 数量: 1
25-10-18.12:57:38.399 [http-nio-8099-exec-9] INFO  DrawConfigParser       - 总计: 4个节点，4条边，2条有效配置关系
25-10-18.12:57:38.399 [http-nio-8099-exec-9] INFO  DrawConfigParser       - === 统计结束 ===
25-10-18.12:57:38.399 [http-nio-8099-exec-9] INFO  DrawConfigParser       - 解析配置数据完成，生成2条关系
25-10-18.12:57:38.521 [http-nio-8099-exec-9] INFO  AiAgentDrawAdminController - 已存在相同的记录, 不需要重复插入: AiClientConfig(id=null, sourceType=client, sourceId=48376249, targetType=model, targetId=1000, extParam={"sourcePortId":"client-output","sourceTitle":"Client_2","targetTitle":"Model_1"}, status=1, createTime=2025-10-18T12:57:38.399927400, updateTime=2025-10-18T12:57:38.399927400)
25-10-18.12:57:38.552 [http-nio-8099-exec-9] INFO  AiAgentDrawAdminController - 已存在相同的记录, 不需要重复插入: AiClientConfig(id=null, sourceType=model, sourceId=1000, targetType=tool_mcp, targetId=5006, extParam={"sourcePortId":"model_select_330YCd","sourceTitle":"Model_1","targetTitle":"ToolMcp_2"}, status=1, createTime=2025-10-18T12:57:38.399927400, updateTime=2025-10-18T12:57:38.399927400)
25-10-18.12:57:38.552 [http-nio-8099-exec-9] INFO  AiAgentDrawAdminController - 开始更新agent_flow_config表数据
25-10-18.12:57:38.552 [http-nio-8099-exec-9] INFO  AiAgentDrawAdminController - 提取字段:[{"key":"client_type_diuEHK","value":"DEFAULT"}] ,clientType
25-10-18.12:57:38.553 [http-nio-8099-exec-9] INFO  AiAgentDrawAdminController - 提取字段:"48376249" ,clientId
25-10-18.12:57:38.553 [http-nio-8099-exec-9] INFO  AiAgentDrawAdminController - 提取字段:"测试客户端" ,clientName
25-10-18.12:57:38.553 [http-nio-8099-exec-9] INFO  AiAgentDrawAdminController - 提取字段:[{"key":"sequence_JB6vrX","value":1}] ,sequence
25-10-18.12:57:38.553 [http-nio-8099-exec-9] INFO  AiAgentDrawAdminController - 提取字段:[{"key":"step_prompt_D3X9MV","value":""}] ,stepPrompt
25-10-18.12:57:38.726 [http-nio-8099-exec-9] INFO  AiAgentDrawAdminController - 插入agent_flow_config表数据: AiAgentFlowConfig(id=null, agentId=58555085, clientId=48376249, clientName=测试客户端, clientType=DEFAULT, stepPrompt=, sequence=1, status=1, createTime=2025-10-18T12:57:38.553786100)
25-10-18.12:57:45.405 [test-task-scheduler-1] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.12:57:45.580 [test-task-scheduler-1] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.12:58:15.404 [test-task-scheduler-1] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.12:58:15.564 [test-task-scheduler-1] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.12:58:45.406 [test-task-scheduler-1] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.12:58:45.592 [test-task-scheduler-1] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.12:59:15.416 [test-task-scheduler-1] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.12:59:15.575 [test-task-scheduler-1] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.12:59:45.408 [test-task-scheduler-1] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.12:59:45.597 [test-task-scheduler-1] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.13:00:00.014 [test-task-scheduler-3] INFO  TaskJobService         - 开始清理无效的任务
25-10-18.13:00:00.214 [test-task-scheduler-3] INFO  TaskJobService         - 发现1个无效任务需要清理
25-10-18.13:00:00.214 [test-task-scheduler-3] INFO  TaskJobService         - 无效任务清理完成，当前活跃任务数: 0
25-10-18.13:00:15.403 [test-task-scheduler-5] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.13:00:18.058 [test-task-scheduler-5] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.13:00:45.405 [test-task-scheduler-5] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.13:00:45.577 [test-task-scheduler-5] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.13:01:15.416 [test-task-scheduler-5] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.13:01:15.605 [test-task-scheduler-5] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.13:01:45.415 [test-task-scheduler-1] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.13:01:45.505 [test-task-scheduler-1] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.13:02:15.409 [test-task-scheduler-1] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.13:02:15.472 [test-task-scheduler-1] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.13:02:44.269 [http-nio-8099-exec-4] INFO  AiAgentDrawAdminController - 获取流程图配置请求，configId: 652f73b71c054faf94fb549c5dc41438
25-10-18.13:02:45.412 [test-task-scheduler-1] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.13:02:45.539 [test-task-scheduler-1] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.13:03:14.111 [http-nio-8099-exec-5] INFO  AiAgentDataStatisticsAdminController - 开始获取系统数据统计
25-10-18.13:03:14.170 [http-nio-8099-exec-6] INFO  AiAgentDrawAdminController - 获取流程图配置请求，configId: 652f73b71c054faf94fb549c5dc41438
25-10-18.13:03:14.418 [http-nio-8099-exec-5] INFO  AiAgentDataStatisticsAdminController - 系统数据统计获取成功：智能体数量=8, 客户端数量=18, MCP工具数量=9, 系统提示数量=15, 知识库数量=1, 顾问数量=5, 模型数量=7
25-10-18.13:03:15.404 [test-task-scheduler-1] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.13:03:15.463 [test-task-scheduler-1] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.13:03:45.404 [test-task-scheduler-1] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.13:03:45.512 [test-task-scheduler-1] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.13:03:59.323 [http-nio-8099-exec-7] INFO  AiAgentDrawAdminController - 查询拖拉拽流程图配置列表请求：AiAgentDrawConfigQueryRequestDTO(configId=null, configName=null, agentId=null, status=null, pageNum=1, pageSize=10)
25-10-18.13:04:08.104 [http-nio-8099-exec-9] INFO  AiAgentDrawAdminController - 获取流程图配置请求，configId: 16a6e20a0da7445bba258b25e572f99b
25-10-18.13:04:10.791 [http-nio-8099-exec-2] INFO  AiClientModelAdminController - 查询所有启用的AI客户端模型配置请求
25-10-18.13:04:10.791 [http-nio-8099-exec-8] INFO  AiClientAdminController - 查询所有AI客户端配置
25-10-18.13:04:10.792 [http-nio-8099-exec-10] INFO  AiClientToolMcpAdminController - 查询所有MCP客户端配置
25-10-18.13:04:15.410 [test-task-scheduler-1] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.13:04:15.520 [test-task-scheduler-1] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.13:04:45.412 [test-task-scheduler-1] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.13:04:45.624 [test-task-scheduler-1] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.13:05:00.001 [test-task-scheduler-2] INFO  TaskJobService         - 开始清理无效的任务
25-10-18.13:05:00.088 [test-task-scheduler-2] INFO  TaskJobService         - 发现1个无效任务需要清理
25-10-18.13:05:00.088 [test-task-scheduler-2] INFO  TaskJobService         - 无效任务清理完成，当前活跃任务数: 0
25-10-18.13:05:09.434 [http-nio-8099-exec-4] INFO  AiAgentDrawAdminController - 开始保存画布信息: 测试Agent
25-10-18.13:05:09.434 [http-nio-8099-exec-4] INFO  AiAgentDrawAdminController - 提取字段:[{"key":"","value":{"content":"测试Agent"}}] ,agentName
25-10-18.13:05:09.434 [http-nio-8099-exec-4] INFO  AiAgentDrawAdminController - 提取字段:[{"key":"","value":{"content":"测试Agent"}}] ,description
25-10-18.13:05:09.434 [http-nio-8099-exec-4] INFO  AiAgentDrawAdminController - 提取字段:"agent" ,channel
25-10-18.13:05:09.434 [http-nio-8099-exec-4] INFO  AiAgentDrawAdminController - 提取字段:"fixedAgentExecuteStrategy" ,strategy
25-10-18.13:05:09.434 [http-nio-8099-exec-4] INFO  AiAgentDrawAdminController - 解析到agent信息: agentName=测试Agent, description=测试Agent, channel=agent, strategy=fixedAgentExecuteStrategy
25-10-18.13:05:09.584 [http-nio-8099-exec-4] ERROR AiAgentDrawAdminController - 保存流程图配置失败
org.springframework.dao.DuplicateKeyException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '85374287' for key 'ai_agent.uk_agent_id'
### The error may exist in file [D:\java\ideapublic\ywz-ai-agent-station-study\ywz-ai-agent-station-study-app\target\classes\mybatis\mapper\ai_agent_mapper.xml]
### The error may involve com.ywzai.infrastructure.dao.IAiAgentDao.insert-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO ai_agent(agent_id, agent_name, description, channel, strategy,status, create_time, update_time)         VALUES(?, ?, ?, ?,?, ?, NOW(), NOW())
### Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '85374287' for key 'ai_agent.uk_agent_id'
; Duplicate entry '85374287' for key 'ai_agent.uk_agent_id'
	at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.doTranslate(SQLErrorCodeSQLExceptionTranslator.java:254)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:107)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:93)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:347)
	at jdk.proxy2/jdk.proxy2.$Proxy78.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:224)
	at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:62)
	at org.apache.ibatis.binding.MapperProxy$PlainMethodInvoker.invoke(MapperProxy.java:141)
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:86)
	at jdk.proxy2/jdk.proxy2.$Proxy89.insert(Unknown Source)
	at com.ywzai.trigger.http.admin.AiAgentDrawAdminController.saveDrawConfig(AiAgentDrawAdminController.java:177)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727)
	at com.ywzai.trigger.http.admin.AiAgentDrawAdminController$$SpringCGLIB$$0.saveDrawConfig(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:257)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1088)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '85374287' for key 'ai_agent.uk_agent_id'
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:371)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:48)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:75)
	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:50)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:76)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:333)
	... 69 common frames omitted
25-10-18.13:05:15.411 [test-task-scheduler-4] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.13:05:16.446 [test-task-scheduler-4] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.13:05:45.409 [test-task-scheduler-4] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.13:05:46.689 [test-task-scheduler-4] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.13:06:15.411 [test-task-scheduler-4] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.13:06:15.631 [test-task-scheduler-4] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.13:06:45.405 [test-task-scheduler-4] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.13:06:45.634 [test-task-scheduler-4] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.13:07:15.416 [test-task-scheduler-4] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.13:07:15.611 [test-task-scheduler-4] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.13:07:45.410 [test-task-scheduler-4] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.13:07:45.641 [test-task-scheduler-4] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.13:08:15.404 [test-task-scheduler-4] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.13:08:15.541 [test-task-scheduler-4] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.13:08:45.410 [test-task-scheduler-4] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.13:08:45.578 [test-task-scheduler-4] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.13:09:15.405 [test-task-scheduler-4] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.13:09:15.620 [test-task-scheduler-4] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.13:09:45.414 [test-task-scheduler-4] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.13:09:45.651 [test-task-scheduler-4] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.13:10:00.013 [test-task-scheduler-5] INFO  TaskJobService         - 开始清理无效的任务
25-10-18.13:10:00.079 [test-task-scheduler-5] INFO  TaskJobService         - 发现1个无效任务需要清理
25-10-18.13:10:00.079 [test-task-scheduler-5] INFO  TaskJobService         - 无效任务清理完成，当前活跃任务数: 0
25-10-18.13:10:15.403 [test-task-scheduler-3] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.13:10:15.471 [test-task-scheduler-3] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.13:10:19.261 [http-nio-8099-exec-3] INFO  AiAgentDrawAdminController - 获取流程图配置请求，configId: 16a6e20a0da7445bba258b25e572f99b
25-10-18.13:10:35.058 [http-nio-8099-exec-10] INFO  AiClientToolMcpAdminController - 查询所有MCP客户端配置
25-10-18.13:10:35.060 [http-nio-8099-exec-2] INFO  AiClientAdminController - 查询所有AI客户端配置
25-10-18.13:10:35.060 [http-nio-8099-exec-8] INFO  AiClientModelAdminController - 查询所有启用的AI客户端模型配置请求
25-10-18.13:10:45.408 [test-task-scheduler-1] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.13:10:45.472 [test-task-scheduler-1] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.13:11:15.405 [test-task-scheduler-1] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.13:11:15.487 [test-task-scheduler-1] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.13:11:25.955 [http-nio-8099-exec-4] INFO  AiAgentDataStatisticsAdminController - 开始获取系统数据统计
25-10-18.13:11:26.371 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 获取流程图配置请求，configId: 16a6e20a0da7445bba258b25e572f99b
25-10-18.13:11:26.466 [http-nio-8099-exec-4] INFO  AiAgentDataStatisticsAdminController - 系统数据统计获取成功：智能体数量=8, 客户端数量=18, MCP工具数量=9, 系统提示数量=15, 知识库数量=1, 顾问数量=5, 模型数量=7
25-10-18.13:11:27.083 [http-nio-8099-exec-6] INFO  AiClientAdminController - 查询所有AI客户端配置
25-10-18.13:11:27.084 [http-nio-8099-exec-5] INFO  AiClientModelAdminController - 查询所有启用的AI客户端模型配置请求
25-10-18.13:11:27.085 [http-nio-8099-exec-3] INFO  AiClientToolMcpAdminController - 查询所有MCP客户端配置
25-10-18.13:11:45.402 [test-task-scheduler-1] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.13:11:45.558 [test-task-scheduler-1] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.13:12:08.269 [SpringApplicationShutdownHook] INFO  GracefulShutdown       - Commencing graceful shutdown. Waiting for active requests to complete
25-10-18.13:12:08.536 [tomcat-shutdown ] INFO  GracefulShutdown       - Graceful shutdown complete
25-10-18.13:12:08.550 [SpringApplicationShutdownHook] INFO  TaskJobService         - 开始停止所有任务
25-10-18.13:12:08.551 [SpringApplicationShutdownHook] INFO  TaskJobService         - 所有任务已停止
25-10-18.13:12:08.553 [SpringApplicationShutdownHook] INFO  HikariDataSource       - MainHikariPool - Shutdown initiated...
25-10-18.13:12:10.646 [SpringApplicationShutdownHook] INFO  HikariDataSource       - MainHikariPool - Shutdown completed.
25-10-18.13:12:17.868 [main            ] INFO  Application            - Starting Application using Java 17.0.14 with PID 24992 (D:\java\ideapublic\ywz-ai-agent-station-study\ywz-ai-agent-station-study-app\target\classes started by ywz in D:\java\ideapublic\ywz-ai-agent-station-study)
25-10-18.13:12:17.870 [main            ] INFO  Application            - The following 1 profile is active: "dev"
25-10-18.13:12:19.384 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port 8099 (http)
25-10-18.13:12:19.397 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8099"]
25-10-18.13:12:19.399 [main            ] INFO  StandardService        - Starting service [Tomcat]
25-10-18.13:12:19.399 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/10.1.36]
25-10-18.13:12:19.494 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
25-10-18.13:12:19.494 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1589 ms
25-10-18.13:12:19.896 [main            ] INFO  PgVectorStore          - Using the vector table name: vector_store_openai. Is empty: false
25-10-18.13:12:19.901 [main            ] INFO  PgVectorStore          - Initializing PGVectorStore schema for table: vector_store_openai in schema: public
25-10-18.13:12:19.901 [main            ] INFO  PgVectorStore          - vectorTableValidationsEnabled false
25-10-18.13:12:20.396 [main            ] INFO  TaskJobAutoConfigBean  - xfg-wrench，任务调度器初始化完成。线程池大小: 5, 线程名前缀: test-task-scheduler-
25-10-18.13:12:20.400 [main            ] INFO  TaskJobService         - 开始初始化任务调度配置
25-10-18.13:12:20.413 [main            ] INFO  HikariDataSource       - MainHikariPool - Starting...
25-10-18.13:12:21.680 [main            ] INFO  HikariPool             - MainHikariPool - Added connection com.mysql.cj.jdbc.ConnectionImpl@2058e16f
25-10-18.13:12:21.681 [main            ] INFO  HikariDataSource       - MainHikariPool - Start completed.
25-10-18.13:12:21.811 [main            ] INFO  TaskJobService         - 任务调度配置初始化完成，已加载任务数: 0
25-10-18.13:12:21.812 [main            ] INFO  TaskJobAutoConfigBean  - xfg-wrench，任务调度作业初始化完成。刷新间隔: 30000ms, 清理cron: 0 0/5 * * * ?
25-10-18.13:12:21.884 [main            ] INFO  OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
25-10-18.13:12:22.332 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8099"]
25-10-18.13:12:22.341 [main            ] INFO  TomcatWebServer        - Tomcat started on port 8099 (http) with context path '/'
25-10-18.13:12:22.351 [main            ] INFO  Application            - Started Application in 4.994 seconds (process running for 5.708)
25-10-18.13:12:22.353 [test-task-scheduler-1] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.13:12:22.353 [main            ] INFO  AiAgentAutoConfiguration - AI Agent 自动装配开始，配置: AiAgentAutoConfigProperties(enabled=true, clientIds=[6101])
25-10-18.13:12:22.455 [test-task-scheduler-1] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.13:12:22.632 [pool-2-thread-1 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_api) [48376249]
25-10-18.13:12:22.632 [pool-2-thread-2 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_model) [48376249]
25-10-18.13:12:22.633 [pool-2-thread-5 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_tool_mcp) [48376249]
25-10-18.13:12:22.633 [pool-2-thread-4 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_advisor) [48376249]
25-10-18.13:12:22.633 [pool-2-thread-6 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client) [48376249]
25-10-18.13:12:22.633 [pool-2-thread-3 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_prompt) [48376249]
25-10-18.13:12:22.890 [pool-2-thread-2 ] INFO  AgentRepository        - AiClientModelNode: 获取模型信息成功: 1000
25-10-18.13:12:22.937 [pool-2-thread-5 ] INFO  AgentRepository        - 查询modelId对应的mcpId列表 [5006]
25-10-18.13:12:23.009 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_api_1001
25-10-18.13:12:23.697 [HttpClient-11-Worker-0] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[completions=null, experimental={}, logging=null, prompts=PromptCapabilities[listChanged=false], resources=ResourceCapabilities[subscribe=false, listChanged=false], tools=ToolCapabilities[listChanged=false]], Info: Implementation[name=AIsearch, version=1.4.1] and Instructions null
25-10-18.13:12:23.766 [main            ] INFO  AiClientToolMcpNode    - SSE MCP Initialized: InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[completions=null, experimental={}, logging=null, prompts=PromptCapabilities[listChanged=false], resources=ResourceCapabilities[subscribe=false, listChanged=false], tools=ToolCapabilities[listChanged=false]], serverInfo=Implementation[name=AIsearch, version=1.4.1], instructions=null]
25-10-18.13:12:23.770 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5006
25-10-18.13:12:23.771 [main            ] INFO  AiClientModelNode      - 开始初始化 ai client model
25-10-18.13:12:23.879 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_1000
25-10-18.13:12:23.879 [main            ] WARN  AiClientAdvisorNode    - 没有需要被初始化的顾问角色
25-10-18.13:12:23.886 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_48376249
25-10-18.13:12:24.067 [main            ] INFO  AiAgentAutoConfiguration - AI Agent 自动装配完成 [{"agentId":"85374287","agentName":"测试Agent","channel":"agent","description":"测试Agent","status":1},{"agentId":"20099179","agentName":"111-测试model","channel":"agent","description":"111","status":1}]
25-10-18.13:12:28.397 [http-nio-8099-exec-1] INFO  [/]                    - Initializing Spring DispatcherServlet 'dispatcherServlet'
25-10-18.13:12:28.397 [http-nio-8099-exec-1] INFO  DispatcherServlet      - Initializing Servlet 'dispatcherServlet'
25-10-18.13:12:28.398 [http-nio-8099-exec-1] INFO  DispatcherServlet      - Completed initialization in 1 ms
25-10-18.13:12:28.476 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 查询拖拉拽流程图配置列表请求：AiAgentDrawConfigQueryRequestDTO(configId=null, configName=null, agentId=null, status=null, pageNum=1, pageSize=10)
25-10-18.13:12:30.530 [http-nio-8099-exec-2] INFO  AiAgentDrawAdminController - 获取流程图配置请求，configId: 16a6e20a0da7445bba258b25e572f99b
25-10-18.13:12:33.767 [http-nio-8099-exec-3] INFO  AiClientAdminController - 查询所有AI客户端配置
25-10-18.13:12:33.767 [http-nio-8099-exec-5] INFO  AiClientToolMcpAdminController - 查询所有MCP客户端配置
25-10-18.13:12:33.767 [http-nio-8099-exec-8] INFO  AiClientModelAdminController - 查询所有启用的AI客户端模型配置请求
25-10-18.13:12:49.661 [http-nio-8099-exec-7] INFO  AiAgentDrawAdminController - 开始保存画布信息: 测试Agent
25-10-18.13:12:50.069 [http-nio-8099-exec-7] INFO  AiAgentDrawAdminController - 开始更新Client关联表数据
25-10-18.13:12:50.082 [http-nio-8099-exec-7] INFO  DrawConfigParser       - 开始解析边关系，总共4条边
25-10-18.13:12:50.082 [http-nio-8099-exec-7] WARN  DrawConfigParser       - 找不到节点信息，sourceNodeId: start_0, targetNodeId: agent_QyqMj
25-10-18.13:12:50.082 [http-nio-8099-exec-7] INFO  DrawConfigParser       - 创建配置关系: client(48376249) -> model(1000), sourcePortId: client-output
25-10-18.13:12:50.083 [http-nio-8099-exec-7] INFO  DrawConfigParser       - 成功创建配置关系[1]: client:48376249 -> model:1000
25-10-18.13:12:50.083 [http-nio-8099-exec-7] INFO  DrawConfigParser       - 创建配置关系: model(1000) -> tool_mcp(5006), sourcePortId: model_select_330YCd
25-10-18.13:12:50.083 [http-nio-8099-exec-7] INFO  DrawConfigParser       - 成功创建配置关系[2]: model:1000 -> tool_mcp:5006
25-10-18.13:12:50.083 [http-nio-8099-exec-7] INFO  DrawConfigParser       - 边关系解析完成，处理0条边，跳过2条，生成2条有效配置关系
25-10-18.13:12:50.083 [http-nio-8099-exec-7] INFO  DrawConfigParser       - 节点类型统计结果
25-10-18.13:12:50.083 [http-nio-8099-exec-7] INFO  DrawConfigParser       - 节点类型: agent, 数量: 1 1有引用id
25-10-18.13:12:50.083 [http-nio-8099-exec-7] INFO  DrawConfigParser       - 节点类型: tool_mcp, 数量: 1 1有引用id
25-10-18.13:12:50.083 [http-nio-8099-exec-7] INFO  DrawConfigParser       - 节点类型: client, 数量: 1 1有引用id
25-10-18.13:12:50.083 [http-nio-8099-exec-7] INFO  DrawConfigParser       - 节点类型: model, 数量: 1 1有引用id
25-10-18.13:12:50.083 [http-nio-8099-exec-7] INFO  DrawConfigParser       - 节点配置关系统计结果
25-10-18.13:12:50.083 [http-nio-8099-exec-7] INFO  DrawConfigParser       - 关系类型: client -> model, 数量: 1
25-10-18.13:12:50.083 [http-nio-8099-exec-7] INFO  DrawConfigParser       - 关系类型: model -> tool_mcp, 数量: 1
25-10-18.13:12:50.083 [http-nio-8099-exec-7] INFO  DrawConfigParser       - 总计: 4个节点，4条边，2条有效配置关系
25-10-18.13:12:50.083 [http-nio-8099-exec-7] INFO  DrawConfigParser       - === 统计结束 ===
25-10-18.13:12:50.083 [http-nio-8099-exec-7] INFO  DrawConfigParser       - 解析配置数据完成，生成2条关系
25-10-18.13:12:50.173 [http-nio-8099-exec-7] INFO  AiAgentDrawAdminController - 已存在相同的记录, 不需要重复插入: AiClientConfig(id=null, sourceType=client, sourceId=48376249, targetType=model, targetId=1000, extParam={"sourcePortId":"client-output","sourceTitle":"Client_2","targetTitle":"Model_1"}, status=1, createTime=2025-10-18T13:12:50.082577600, updateTime=2025-10-18T13:12:50.082577600)
25-10-18.13:12:50.274 [http-nio-8099-exec-7] INFO  AiAgentDrawAdminController - 已存在相同的记录, 不需要重复插入: AiClientConfig(id=null, sourceType=model, sourceId=1000, targetType=tool_mcp, targetId=5006, extParam={"sourcePortId":"model_select_330YCd","sourceTitle":"Model_1","targetTitle":"ToolMcp_2"}, status=1, createTime=2025-10-18T13:12:50.083576500, updateTime=2025-10-18T13:12:50.083576500)
25-10-18.13:12:50.274 [http-nio-8099-exec-7] INFO  AiAgentDrawAdminController - 开始更新agent_flow_config表数据
25-10-18.13:12:50.277 [http-nio-8099-exec-7] INFO  AiAgentDrawAdminController - 提取字段:[{"key":"client_type_diuEHK","value":"DEFAULT"}] ,clientType
25-10-18.13:12:50.279 [http-nio-8099-exec-7] INFO  AiAgentDrawAdminController - 提取字段:"48376249" ,clientId
25-10-18.13:12:50.280 [http-nio-8099-exec-7] INFO  AiAgentDrawAdminController - 提取字段:"测试客户端" ,clientName
25-10-18.13:12:50.280 [http-nio-8099-exec-7] INFO  AiAgentDrawAdminController - 提取字段:[{"key":"sequence_JB6vrX","value":1}] ,sequence
25-10-18.13:12:50.280 [http-nio-8099-exec-7] INFO  AiAgentDrawAdminController - 提取字段:[{"key":"step_prompt_D3X9MV","value":""}] ,stepPrompt
25-10-18.13:12:50.601 [http-nio-8099-exec-7] ERROR AiAgentDrawAdminController - 解析和保存agent-client关系数据失败，agentId: 85374287
org.springframework.dao.DuplicateKeyException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '85374287-48376249-1' for key 'ai_agent_flow_config.uk_agent_client_seq'
### The error may exist in file [D:\java\ideapublic\ywz-ai-agent-station-study\ywz-ai-agent-station-study-app\target\classes\mybatis\mapper\ai_agent_flow_config_mapper.xml]
### The error may involve com.ywzai.infrastructure.dao.IAiAgentFlowConfigDao.insert-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO ai_agent_flow_config(agent_id, client_id, client_name, client_type, step_prompt, sequence, status,                                          create_time)         VALUES (?, ?, ?, ?, ?, ?, ?, NOW())
### Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '85374287-48376249-1' for key 'ai_agent_flow_config.uk_agent_client_seq'
; Duplicate entry '85374287-48376249-1' for key 'ai_agent_flow_config.uk_agent_client_seq'
	at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.doTranslate(SQLErrorCodeSQLExceptionTranslator.java:254)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:107)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:93)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:347)
	at jdk.proxy2/jdk.proxy2.$Proxy78.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:224)
	at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:62)
	at org.apache.ibatis.binding.MapperProxy$PlainMethodInvoker.invoke(MapperProxy.java:141)
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:86)
	at jdk.proxy2/jdk.proxy2.$Proxy88.insert(Unknown Source)
	at com.ywzai.trigger.http.admin.AiAgentDrawAdminController.saveDrawConfig(AiAgentDrawAdminController.java:249)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727)
	at com.ywzai.trigger.http.admin.AiAgentDrawAdminController$$SpringCGLIB$$0.saveDrawConfig(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:257)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1088)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '85374287-48376249-1' for key 'ai_agent_flow_config.uk_agent_client_seq'
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:371)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:48)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:75)
	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:50)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:76)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:333)
	... 69 common frames omitted
25-10-18.13:12:52.365 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.13:12:52.527 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.13:13:22.359 [test-task-scheduler-3] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.13:13:22.525 [test-task-scheduler-3] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.13:13:52.353 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.13:13:52.418 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.13:14:22.351 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.13:14:22.421 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.13:14:52.352 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.13:14:56.225 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.13:15:00.012 [test-task-scheduler-3] INFO  TaskJobService         - 开始清理无效的任务
25-10-18.13:15:00.218 [test-task-scheduler-3] INFO  TaskJobService         - 发现1个无效任务需要清理
25-10-18.13:15:00.218 [test-task-scheduler-3] INFO  TaskJobService         - 无效任务清理完成，当前活跃任务数: 0
25-10-18.13:15:22.358 [test-task-scheduler-4] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.13:15:22.438 [test-task-scheduler-4] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.13:15:27.553 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 查询拖拉拽流程图配置列表请求：AiAgentDrawConfigQueryRequestDTO(configId=null, configName=null, agentId=null, status=null, pageNum=1, pageSize=10)
25-10-18.13:15:33.531 [http-nio-8099-exec-5] INFO  AiAgentDrawAdminController - 获取流程图配置请求，configId: 16a6e20a0da7445bba258b25e572f99b
25-10-18.13:15:35.527 [http-nio-8099-exec-8] INFO  AiClientAdminController - 查询所有AI客户端配置
25-10-18.13:15:35.528 [http-nio-8099-exec-3] INFO  AiClientModelAdminController - 查询所有启用的AI客户端模型配置请求
25-10-18.13:15:35.533 [http-nio-8099-exec-7] INFO  AiClientToolMcpAdminController - 查询所有MCP客户端配置
25-10-18.13:15:52.358 [test-task-scheduler-4] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.13:15:52.418 [test-task-scheduler-4] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.13:15:54.796 [http-nio-8099-exec-4] INFO  AiAgentDrawAdminController - 开始保存画布信息: 测试Agent
25-10-18.13:15:55.109 [http-nio-8099-exec-4] INFO  AiAgentDrawAdminController - 开始更新Client关联表数据
25-10-18.13:15:55.109 [http-nio-8099-exec-4] INFO  DrawConfigParser       - 开始解析边关系，总共4条边
25-10-18.13:15:55.109 [http-nio-8099-exec-4] WARN  DrawConfigParser       - 找不到节点信息，sourceNodeId: start_0, targetNodeId: agent_QyqMj
25-10-18.13:15:55.109 [http-nio-8099-exec-4] INFO  DrawConfigParser       - 创建配置关系: client(48376249) -> model(1000), sourcePortId: client-output
25-10-18.13:15:55.110 [http-nio-8099-exec-4] INFO  DrawConfigParser       - 成功创建配置关系[1]: client:48376249 -> model:1000
25-10-18.13:15:55.110 [http-nio-8099-exec-4] INFO  DrawConfigParser       - 创建配置关系: model(1000) -> tool_mcp(5006), sourcePortId: model_select_330YCd
25-10-18.13:15:55.110 [http-nio-8099-exec-4] INFO  DrawConfigParser       - 成功创建配置关系[2]: model:1000 -> tool_mcp:5006
25-10-18.13:15:55.110 [http-nio-8099-exec-4] INFO  DrawConfigParser       - 边关系解析完成，处理0条边，跳过2条，生成2条有效配置关系
25-10-18.13:15:55.110 [http-nio-8099-exec-4] INFO  DrawConfigParser       - 节点类型统计结果
25-10-18.13:15:55.110 [http-nio-8099-exec-4] INFO  DrawConfigParser       - 节点类型: agent, 数量: 1 1有引用id
25-10-18.13:15:55.110 [http-nio-8099-exec-4] INFO  DrawConfigParser       - 节点类型: tool_mcp, 数量: 1 1有引用id
25-10-18.13:15:55.110 [http-nio-8099-exec-4] INFO  DrawConfigParser       - 节点类型: client, 数量: 1 1有引用id
25-10-18.13:15:55.110 [http-nio-8099-exec-4] INFO  DrawConfigParser       - 节点类型: model, 数量: 1 1有引用id
25-10-18.13:15:55.110 [http-nio-8099-exec-4] INFO  DrawConfigParser       - 节点配置关系统计结果
25-10-18.13:15:55.110 [http-nio-8099-exec-4] INFO  DrawConfigParser       - 关系类型: client -> model, 数量: 1
25-10-18.13:15:55.110 [http-nio-8099-exec-4] INFO  DrawConfigParser       - 关系类型: model -> tool_mcp, 数量: 1
25-10-18.13:15:55.110 [http-nio-8099-exec-4] INFO  DrawConfigParser       - 总计: 4个节点，4条边，2条有效配置关系
25-10-18.13:15:55.110 [http-nio-8099-exec-4] INFO  DrawConfigParser       - === 统计结束 ===
25-10-18.13:15:55.110 [http-nio-8099-exec-4] INFO  DrawConfigParser       - 解析配置数据完成，生成2条关系
25-10-18.13:15:55.207 [http-nio-8099-exec-4] INFO  AiAgentDrawAdminController - 已存在相同的记录, 不需要重复插入: AiClientConfig(id=null, sourceType=client, sourceId=48376249, targetType=model, targetId=1000, extParam={"sourcePortId":"client-output","sourceTitle":"Client_2","targetTitle":"Model_1"}, status=1, createTime=2025-10-18T13:15:55.110408700, updateTime=2025-10-18T13:15:55.110408700)
25-10-18.13:15:55.271 [http-nio-8099-exec-4] INFO  AiAgentDrawAdminController - 已存在相同的记录, 不需要重复插入: AiClientConfig(id=null, sourceType=model, sourceId=1000, targetType=tool_mcp, targetId=5006, extParam={"sourcePortId":"model_select_330YCd","sourceTitle":"Model_1","targetTitle":"ToolMcp_2"}, status=1, createTime=2025-10-18T13:15:55.110408700, updateTime=2025-10-18T13:15:55.110408700)
25-10-18.13:15:55.271 [http-nio-8099-exec-4] INFO  AiAgentDrawAdminController - 开始更新agent_flow_config表数据
25-10-18.13:15:55.272 [http-nio-8099-exec-4] INFO  AiAgentDrawAdminController - 提取字段:[{"key":"client_type_diuEHK","value":"DEFAULT"}] ,clientType
25-10-18.13:15:55.272 [http-nio-8099-exec-4] INFO  AiAgentDrawAdminController - 提取字段:"48376249" ,clientId
25-10-18.13:15:55.273 [http-nio-8099-exec-4] INFO  AiAgentDrawAdminController - 提取字段:"测试客户端" ,clientName
25-10-18.13:15:55.273 [http-nio-8099-exec-4] INFO  AiAgentDrawAdminController - 提取字段:[{"key":"sequence_JB6vrX","value":1}] ,sequence
25-10-18.13:15:55.273 [http-nio-8099-exec-4] INFO  AiAgentDrawAdminController - 提取字段:[{"key":"step_prompt_D3X9MV","value":""}] ,stepPrompt
25-10-18.13:15:55.512 [http-nio-8099-exec-4] ERROR AiAgentDrawAdminController - 解析和保存agent-client关系数据失败，agentId: 85374287
org.springframework.dao.DuplicateKeyException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '85374287-48376249-1' for key 'ai_agent_flow_config.uk_agent_client_seq'
### The error may exist in file [D:\java\ideapublic\ywz-ai-agent-station-study\ywz-ai-agent-station-study-app\target\classes\mybatis\mapper\ai_agent_flow_config_mapper.xml]
### The error may involve com.ywzai.infrastructure.dao.IAiAgentFlowConfigDao.insert-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO ai_agent_flow_config(agent_id, client_id, client_name, client_type, step_prompt, sequence, status,                                          create_time)         VALUES (?, ?, ?, ?, ?, ?, ?, NOW())
### Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '85374287-48376249-1' for key 'ai_agent_flow_config.uk_agent_client_seq'
; Duplicate entry '85374287-48376249-1' for key 'ai_agent_flow_config.uk_agent_client_seq'
	at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.doTranslate(SQLErrorCodeSQLExceptionTranslator.java:254)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:107)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:93)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:347)
	at jdk.proxy2/jdk.proxy2.$Proxy78.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:224)
	at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:62)
	at org.apache.ibatis.binding.MapperProxy$PlainMethodInvoker.invoke(MapperProxy.java:141)
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:86)
	at jdk.proxy2/jdk.proxy2.$Proxy88.insert(Unknown Source)
	at com.ywzai.trigger.http.admin.AiAgentDrawAdminController.saveDrawConfig(AiAgentDrawAdminController.java:249)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727)
	at com.ywzai.trigger.http.admin.AiAgentDrawAdminController$$SpringCGLIB$$0.saveDrawConfig(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:257)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1088)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '85374287-48376249-1' for key 'ai_agent_flow_config.uk_agent_client_seq'
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:371)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:48)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:75)
	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:50)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:76)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:333)
	... 69 common frames omitted
25-10-18.13:16:22.358 [test-task-scheduler-4] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.13:16:22.588 [test-task-scheduler-4] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.13:16:52.351 [test-task-scheduler-4] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.13:16:52.553 [test-task-scheduler-4] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.13:17:22.351 [test-task-scheduler-4] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.13:17:23.269 [test-task-scheduler-4] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.13:17:52.355 [test-task-scheduler-4] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.13:17:52.417 [test-task-scheduler-4] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.13:17:56.263 [http-nio-8099-exec-2] INFO  AiAgentDrawAdminController - 获取流程图配置请求，configId: 16a6e20a0da7445bba258b25e572f99b
25-10-18.13:18:22.352 [test-task-scheduler-4] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.13:18:22.557 [test-task-scheduler-4] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.13:18:52.354 [test-task-scheduler-4] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.13:18:52.561 [test-task-scheduler-4] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.13:19:22.354 [test-task-scheduler-4] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.13:19:22.913 [test-task-scheduler-4] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.13:19:52.355 [test-task-scheduler-4] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.13:19:52.506 [test-task-scheduler-4] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.13:20:00.010 [test-task-scheduler-1] INFO  TaskJobService         - 开始清理无效的任务
25-10-18.13:20:00.244 [test-task-scheduler-1] INFO  TaskJobService         - 发现1个无效任务需要清理
25-10-18.13:20:00.244 [test-task-scheduler-1] INFO  TaskJobService         - 无效任务清理完成，当前活跃任务数: 0
25-10-18.13:20:22.359 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.13:20:22.466 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.13:20:48.018 [http-nio-8099-exec-6] INFO  AiClientAdminController - 查询所有AI客户端配置
25-10-18.13:20:48.022 [http-nio-8099-exec-7] INFO  AiClientModelAdminController - 查询所有启用的AI客户端模型配置请求
25-10-18.13:20:48.022 [http-nio-8099-exec-8] INFO  AiClientToolMcpAdminController - 查询所有MCP客户端配置
25-10-18.13:20:49.064 [http-nio-8099-exec-3] INFO  AiAgentDataStatisticsAdminController - 开始获取系统数据统计
25-10-18.13:20:49.526 [http-nio-8099-exec-3] INFO  AiAgentDataStatisticsAdminController - 系统数据统计获取成功：智能体数量=8, 客户端数量=18, MCP工具数量=9, 系统提示数量=15, 知识库数量=1, 顾问数量=5, 模型数量=7
25-10-18.13:20:49.571 [http-nio-8099-exec-4] INFO  AiAgentDrawAdminController - 获取流程图配置请求，configId: 16a6e20a0da7445bba258b25e572f99b
25-10-18.13:20:50.511 [http-nio-8099-exec-10] INFO  AiClientAdminController - 查询所有AI客户端配置
25-10-18.13:20:50.511 [http-nio-8099-exec-9] INFO  AiClientModelAdminController - 查询所有启用的AI客户端模型配置请求
25-10-18.13:20:50.511 [http-nio-8099-exec-1] INFO  AiClientToolMcpAdminController - 查询所有MCP客户端配置
25-10-18.13:20:52.351 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.13:20:52.415 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.13:20:53.357 [http-nio-8099-exec-2] INFO  AiAgentDrawAdminController - 查询拖拉拽流程图配置列表请求：AiAgentDrawConfigQueryRequestDTO(configId=null, configName=null, agentId=null, status=null, pageNum=1, pageSize=10)
25-10-18.13:21:00.864 [http-nio-8099-exec-6] INFO  AiAgentDrawAdminController - 删除流程图配置请求，configId: 01ce0323676b47a5bbb81fb1bf547863
25-10-18.13:21:00.915 [http-nio-8099-exec-6] INFO  AiAgentDrawAdminController - 删除流程图配置，configId: 01ce0323676b47a5bbb81fb1bf547863, agentId: 85374287
25-10-18.13:21:01.067 [http-nio-8099-exec-6] INFO  AiAgentDrawAdminController - 删除拖拉拽配置结果: 1
25-10-18.13:21:01.272 [http-nio-8099-exec-6] INFO  AiAgentDrawAdminController - 删除智能体配置结果: 1
25-10-18.13:21:01.479 [http-nio-8099-exec-6] INFO  AiAgentDrawAdminController - 删除智能体流程配置结果: 1
25-10-18.13:21:01.692 [http-nio-8099-exec-8] INFO  AiAgentDrawAdminController - 查询拖拉拽流程图配置列表请求：AiAgentDrawConfigQueryRequestDTO(configId=null, configName=null, agentId=null, status=null, pageNum=1, pageSize=10)
25-10-18.13:21:12.610 [http-nio-8099-exec-7] INFO  AiAgentDrawAdminController - 获取流程图配置请求，configId: 16a6e20a0da7445bba258b25e572f99b
25-10-18.13:21:13.026 [http-nio-8099-exec-3] INFO  AiClientAdminController - 查询所有AI客户端配置
25-10-18.13:21:13.027 [http-nio-8099-exec-4] INFO  AiClientModelAdminController - 查询所有启用的AI客户端模型配置请求
25-10-18.13:21:13.029 [http-nio-8099-exec-9] INFO  AiClientToolMcpAdminController - 查询所有MCP客户端配置
25-10-18.13:21:22.358 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.13:21:22.523 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.13:21:27.078 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 开始保存画布信息: 测试Agent
25-10-18.13:21:27.114 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 提取字段:[{"key":"","value":{"content":"测试Agent"}}] ,agentName
25-10-18.13:21:27.114 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 提取字段:[{"key":"","value":{"content":"测试Agent"}}] ,description
25-10-18.13:21:27.114 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 提取字段:"agent" ,channel
25-10-18.13:21:27.114 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 提取字段:"fixedAgentExecuteStrategy" ,strategy
25-10-18.13:21:27.114 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 解析到agent信息: agentName=测试Agent, description=测试Agent, channel=agent, strategy=fixedAgentExecuteStrategy
25-10-18.13:21:27.289 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 开始更新Client关联表数据
25-10-18.13:21:27.290 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 开始解析边关系，总共4条边
25-10-18.13:21:27.290 [http-nio-8099-exec-1] WARN  DrawConfigParser       - 找不到节点信息，sourceNodeId: start_0, targetNodeId: agent_QyqMj
25-10-18.13:21:27.290 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 创建配置关系: client(48376249) -> model(1000), sourcePortId: client-output
25-10-18.13:21:27.290 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 成功创建配置关系[1]: client:48376249 -> model:1000
25-10-18.13:21:27.290 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 创建配置关系: model(1000) -> tool_mcp(5006), sourcePortId: model_select_330YCd
25-10-18.13:21:27.290 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 成功创建配置关系[2]: model:1000 -> tool_mcp:5006
25-10-18.13:21:27.290 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 边关系解析完成，处理0条边，跳过2条，生成2条有效配置关系
25-10-18.13:21:27.290 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 节点类型统计结果
25-10-18.13:21:27.290 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 节点类型: agent, 数量: 1 1有引用id
25-10-18.13:21:27.290 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 节点类型: tool_mcp, 数量: 1 1有引用id
25-10-18.13:21:27.290 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 节点类型: client, 数量: 1 1有引用id
25-10-18.13:21:27.290 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 节点类型: model, 数量: 1 1有引用id
25-10-18.13:21:27.290 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 节点配置关系统计结果
25-10-18.13:21:27.290 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 关系类型: client -> model, 数量: 1
25-10-18.13:21:27.290 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 关系类型: model -> tool_mcp, 数量: 1
25-10-18.13:21:27.291 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 总计: 4个节点，4条边，2条有效配置关系
25-10-18.13:21:27.291 [http-nio-8099-exec-1] INFO  DrawConfigParser       - === 统计结束 ===
25-10-18.13:21:27.291 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 解析配置数据完成，生成2条关系
25-10-18.13:21:27.324 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 已存在相同的记录, 不需要重复插入: AiClientConfig(id=null, sourceType=client, sourceId=48376249, targetType=model, targetId=1000, extParam={"sourcePortId":"client-output","sourceTitle":"Client_2","targetTitle":"Model_1"}, status=1, createTime=2025-10-18T13:21:27.290721800, updateTime=2025-10-18T13:21:27.290721800)
25-10-18.13:21:27.359 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 已存在相同的记录, 不需要重复插入: AiClientConfig(id=null, sourceType=model, sourceId=1000, targetType=tool_mcp, targetId=5006, extParam={"sourcePortId":"model_select_330YCd","sourceTitle":"Model_1","targetTitle":"ToolMcp_2"}, status=1, createTime=2025-10-18T13:21:27.290721800, updateTime=2025-10-18T13:21:27.290721800)
25-10-18.13:21:27.359 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 开始更新agent_flow_config表数据
25-10-18.13:21:27.360 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 提取字段:[{"key":"client_type_diuEHK","value":"DEFAULT"}] ,clientType
25-10-18.13:21:27.360 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 提取字段:"48376249" ,clientId
25-10-18.13:21:27.360 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 提取字段:"测试客户端" ,clientName
25-10-18.13:21:27.360 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 提取字段:[{"key":"sequence_JB6vrX","value":1}] ,sequence
25-10-18.13:21:27.361 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 提取字段:[{"key":"step_prompt_D3X9MV","value":""}] ,stepPrompt
25-10-18.13:21:27.426 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 插入agent_flow_config表数据: AiAgentFlowConfig(id=null, agentId=85374287, clientId=48376249, clientName=测试客户端, clientType=DEFAULT, stepPrompt=, sequence=1, status=1, createTime=2025-10-18T13:21:27.361261300)
25-10-18.13:21:52.359 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.13:21:52.576 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.13:22:22.353 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.13:22:22.577 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.13:22:52.356 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.13:22:52.580 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.13:23:22.360 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.13:23:22.482 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.13:23:52.365 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.13:23:52.484 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.13:24:22.357 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.13:24:24.140 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.13:24:52.354 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.13:24:52.607 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.13:25:00.006 [test-task-scheduler-3] INFO  TaskJobService         - 开始清理无效的任务
25-10-18.13:25:00.705 [test-task-scheduler-3] INFO  TaskJobService         - 发现1个无效任务需要清理
25-10-18.13:25:00.705 [test-task-scheduler-3] INFO  TaskJobService         - 无效任务清理完成，当前活跃任务数: 0
25-10-18.13:25:22.353 [test-task-scheduler-4] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.13:25:22.446 [test-task-scheduler-4] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.13:25:52.364 [test-task-scheduler-4] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.13:25:52.597 [test-task-scheduler-4] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.13:26:22.362 [test-task-scheduler-4] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.13:26:22.497 [test-task-scheduler-4] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.13:26:28.257 [http-nio-8099-exec-6] INFO  AiAgentDataStatisticsAdminController - 开始获取系统数据统计
25-10-18.13:26:28.701 [http-nio-8099-exec-8] INFO  AiAgentDrawAdminController - 获取流程图配置请求，configId: 16a6e20a0da7445bba258b25e572f99b
25-10-18.13:26:28.821 [http-nio-8099-exec-6] INFO  AiAgentDataStatisticsAdminController - 系统数据统计获取成功：智能体数量=8, 客户端数量=18, MCP工具数量=9, 系统提示数量=15, 知识库数量=1, 顾问数量=5, 模型数量=7
25-10-18.13:26:52.361 [test-task-scheduler-4] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.13:26:52.602 [test-task-scheduler-4] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.13:27:00.718 [http-nio-8099-exec-7] INFO  AiAgentDrawAdminController - 查询拖拉拽流程图配置列表请求：AiAgentDrawConfigQueryRequestDTO(configId=null, configName=null, agentId=null, status=null, pageNum=1, pageSize=10)
25-10-18.13:27:07.014 [http-nio-8099-exec-3] INFO  AiAgentDrawAdminController - 获取流程图配置请求，configId: 16a6e20a0da7445bba258b25e572f99b
25-10-18.13:27:07.155 [http-nio-8099-exec-9] INFO  AiClientAdminController - 查询所有AI客户端配置
25-10-18.13:27:07.155 [http-nio-8099-exec-4] INFO  AiClientModelAdminController - 查询所有启用的AI客户端模型配置请求
25-10-18.13:27:07.156 [http-nio-8099-exec-1] INFO  AiClientToolMcpAdminController - 查询所有MCP客户端配置
25-10-18.13:27:16.622 [http-nio-8099-exec-10] INFO  AiAgentDrawAdminController - 开始保存画布信息: 测试Agent
25-10-18.13:27:16.972 [http-nio-8099-exec-10] INFO  AiAgentDrawAdminController - 更新流程图配置，configId: 16a6e20a0da7445bba258b25e572f99b, result: 1
25-10-18.13:27:16.972 [http-nio-8099-exec-10] INFO  AiAgentDrawAdminController - 开始更新Client关联表数据
25-10-18.13:27:16.972 [http-nio-8099-exec-10] INFO  DrawConfigParser       - 开始解析边关系，总共4条边
25-10-18.13:27:16.972 [http-nio-8099-exec-10] WARN  DrawConfigParser       - 找不到节点信息，sourceNodeId: start_0, targetNodeId: agent_QyqMj
25-10-18.13:27:16.972 [http-nio-8099-exec-10] INFO  DrawConfigParser       - 创建配置关系: client(48376249) -> model(1000), sourcePortId: client-output
25-10-18.13:27:16.972 [http-nio-8099-exec-10] INFO  DrawConfigParser       - 成功创建配置关系[1]: client:48376249 -> model:1000
25-10-18.13:27:16.972 [http-nio-8099-exec-10] INFO  DrawConfigParser       - 创建配置关系: model(1000) -> tool_mcp(5006), sourcePortId: model_select_330YCd
25-10-18.13:27:16.972 [http-nio-8099-exec-10] INFO  DrawConfigParser       - 成功创建配置关系[2]: model:1000 -> tool_mcp:5006
25-10-18.13:27:16.972 [http-nio-8099-exec-10] INFO  DrawConfigParser       - 边关系解析完成，处理0条边，跳过2条，生成2条有效配置关系
25-10-18.13:27:16.973 [http-nio-8099-exec-10] INFO  DrawConfigParser       - 节点类型统计结果
25-10-18.13:27:16.973 [http-nio-8099-exec-10] INFO  DrawConfigParser       - 节点类型: agent, 数量: 1 1有引用id
25-10-18.13:27:16.973 [http-nio-8099-exec-10] INFO  DrawConfigParser       - 节点类型: tool_mcp, 数量: 1 1有引用id
25-10-18.13:27:16.973 [http-nio-8099-exec-10] INFO  DrawConfigParser       - 节点类型: client, 数量: 1 1有引用id
25-10-18.13:27:16.973 [http-nio-8099-exec-10] INFO  DrawConfigParser       - 节点类型: model, 数量: 1 1有引用id
25-10-18.13:27:16.973 [http-nio-8099-exec-10] INFO  DrawConfigParser       - 节点配置关系统计结果
25-10-18.13:27:16.973 [http-nio-8099-exec-10] INFO  DrawConfigParser       - 关系类型: client -> model, 数量: 1
25-10-18.13:27:16.973 [http-nio-8099-exec-10] INFO  DrawConfigParser       - 关系类型: model -> tool_mcp, 数量: 1
25-10-18.13:27:16.973 [http-nio-8099-exec-10] INFO  DrawConfigParser       - 总计: 4个节点，4条边，2条有效配置关系
25-10-18.13:27:16.973 [http-nio-8099-exec-10] INFO  DrawConfigParser       - === 统计结束 ===
25-10-18.13:27:16.973 [http-nio-8099-exec-10] INFO  DrawConfigParser       - 解析配置数据完成，生成2条关系
25-10-18.13:27:17.075 [http-nio-8099-exec-10] INFO  AiAgentDrawAdminController - 已存在相同的记录, 不需要重复插入: AiClientConfig(id=null, sourceType=client, sourceId=48376249, targetType=model, targetId=1000, extParam={"sourcePortId":"client-output","sourceTitle":"Client_2","targetTitle":"Model_1"}, status=1, createTime=2025-10-18T13:27:16.972633200, updateTime=2025-10-18T13:27:16.972633200)
25-10-18.13:27:17.177 [http-nio-8099-exec-10] INFO  AiAgentDrawAdminController - 已存在相同的记录, 不需要重复插入: AiClientConfig(id=null, sourceType=model, sourceId=1000, targetType=tool_mcp, targetId=5006, extParam={"sourcePortId":"model_select_330YCd","sourceTitle":"Model_1","targetTitle":"ToolMcp_2"}, status=1, createTime=2025-10-18T13:27:16.972633200, updateTime=2025-10-18T13:27:16.972633200)
25-10-18.13:27:17.177 [http-nio-8099-exec-10] INFO  AiAgentDrawAdminController - 开始更新agent_flow_config表数据
25-10-18.13:27:17.178 [http-nio-8099-exec-10] INFO  AiAgentDrawAdminController - 提取字段:[{"key":"client_type_diuEHK","value":"DEFAULT"}] ,clientType
25-10-18.13:27:17.178 [http-nio-8099-exec-10] INFO  AiAgentDrawAdminController - 提取字段:"48376249" ,clientId
25-10-18.13:27:17.178 [http-nio-8099-exec-10] INFO  AiAgentDrawAdminController - 提取字段:"测试客户端" ,clientName
25-10-18.13:27:17.178 [http-nio-8099-exec-10] INFO  AiAgentDrawAdminController - 提取字段:[{"key":"sequence_JB6vrX","value":1}] ,sequence
25-10-18.13:27:17.178 [http-nio-8099-exec-10] INFO  AiAgentDrawAdminController - 提取字段:[{"key":"step_prompt_D3X9MV","value":""}] ,stepPrompt
25-10-18.13:27:17.547 [http-nio-8099-exec-10] INFO  AiAgentDrawAdminController - 插入agent_flow_config表数据: AiAgentFlowConfig(id=null, agentId=85374287, clientId=48376249, clientName=测试客户端, clientType=DEFAULT, stepPrompt=, sequence=1, status=1, createTime=2025-10-18T13:27:17.178450300)
25-10-18.13:27:22.358 [test-task-scheduler-3] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.13:27:22.605 [test-task-scheduler-3] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.13:27:52.357 [test-task-scheduler-3] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.13:27:52.454 [test-task-scheduler-3] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.13:28:22.351 [test-task-scheduler-3] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.13:28:22.443 [test-task-scheduler-3] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.13:28:52.359 [test-task-scheduler-3] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.13:28:52.417 [test-task-scheduler-3] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.13:29:22.351 [test-task-scheduler-4] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.13:29:22.462 [test-task-scheduler-4] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.13:29:52.355 [test-task-scheduler-5] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.13:29:52.488 [test-task-scheduler-5] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.13:30:00.004 [test-task-scheduler-1] INFO  TaskJobService         - 开始清理无效的任务
25-10-18.13:30:00.123 [test-task-scheduler-1] INFO  TaskJobService         - 发现1个无效任务需要清理
25-10-18.13:30:00.123 [test-task-scheduler-1] INFO  TaskJobService         - 无效任务清理完成，当前活跃任务数: 0
25-10-18.13:30:22.354 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.13:30:22.621 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.13:30:40.434 [SpringApplicationShutdownHook] INFO  GracefulShutdown       - Commencing graceful shutdown. Waiting for active requests to complete
25-10-18.13:30:40.673 [tomcat-shutdown ] INFO  GracefulShutdown       - Graceful shutdown complete
25-10-18.13:30:40.677 [SpringApplicationShutdownHook] INFO  TaskJobService         - 开始停止所有任务
25-10-18.13:30:40.677 [SpringApplicationShutdownHook] INFO  TaskJobService         - 所有任务已停止
25-10-18.13:30:40.679 [SpringApplicationShutdownHook] INFO  HikariDataSource       - MainHikariPool - Shutdown initiated...
25-10-18.13:30:45.459 [main            ] INFO  Application            - Starting Application using Java 17.0.14 with PID 31360 (D:\java\ideapublic\ywz-ai-agent-station-study\ywz-ai-agent-station-study-app\target\classes started by ywz in D:\java\ideapublic\ywz-ai-agent-station-study)
25-10-18.13:30:45.460 [main            ] INFO  Application            - The following 1 profile is active: "dev"
25-10-18.13:30:47.006 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port 8099 (http)
25-10-18.13:30:47.021 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8099"]
25-10-18.13:30:47.023 [main            ] INFO  StandardService        - Starting service [Tomcat]
25-10-18.13:30:47.023 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/10.1.36]
25-10-18.13:30:47.122 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
25-10-18.13:30:47.122 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1628 ms
25-10-18.13:30:47.541 [main            ] INFO  PgVectorStore          - Using the vector table name: vector_store_openai. Is empty: false
25-10-18.13:30:47.556 [main            ] INFO  PgVectorStore          - Initializing PGVectorStore schema for table: vector_store_openai in schema: public
25-10-18.13:30:47.556 [main            ] INFO  PgVectorStore          - vectorTableValidationsEnabled false
25-10-18.13:30:48.036 [main            ] INFO  TaskJobAutoConfigBean  - xfg-wrench，任务调度器初始化完成。线程池大小: 5, 线程名前缀: test-task-scheduler-
25-10-18.13:30:48.040 [main            ] INFO  TaskJobService         - 开始初始化任务调度配置
25-10-18.13:30:48.055 [main            ] INFO  HikariDataSource       - MainHikariPool - Starting...
25-10-18.13:30:48.550 [main            ] INFO  HikariPool             - MainHikariPool - Added connection com.mysql.cj.jdbc.ConnectionImpl@2e3ae8b5
25-10-18.13:30:48.552 [main            ] INFO  HikariDataSource       - MainHikariPool - Start completed.
25-10-18.13:30:48.617 [main            ] INFO  TaskJobService         - 任务调度配置初始化完成，已加载任务数: 0
25-10-18.13:30:48.618 [main            ] INFO  TaskJobAutoConfigBean  - xfg-wrench，任务调度作业初始化完成。刷新间隔: 30000ms, 清理cron: 0 0/5 * * * ?
25-10-18.13:30:48.698 [main            ] INFO  OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
25-10-18.13:30:49.166 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8099"]
25-10-18.13:30:49.174 [main            ] INFO  TomcatWebServer        - Tomcat started on port 8099 (http) with context path '/'
25-10-18.13:30:49.183 [main            ] INFO  Application            - Started Application in 4.222 seconds (process running for 5.006)
25-10-18.13:30:49.184 [test-task-scheduler-1] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.13:30:49.184 [main            ] INFO  AiAgentAutoConfiguration - AI Agent 自动装配开始，配置: AiAgentAutoConfigProperties(enabled=true, clientIds=[6101])
25-10-18.13:30:49.249 [test-task-scheduler-1] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.13:30:49.297 [pool-2-thread-1 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_api) [48376249]
25-10-18.13:30:49.297 [pool-2-thread-2 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_model) [48376249]
25-10-18.13:30:49.297 [pool-2-thread-3 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_prompt) [48376249]
25-10-18.13:30:49.297 [pool-2-thread-5 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_tool_mcp) [48376249]
25-10-18.13:30:49.298 [pool-2-thread-4 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_advisor) [48376249]
25-10-18.13:30:49.298 [pool-2-thread-6 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client) [48376249]
25-10-18.13:30:49.462 [pool-2-thread-2 ] INFO  AgentRepository        - AiClientModelNode: 获取模型信息成功: 1000
25-10-18.13:30:49.472 [pool-2-thread-5 ] INFO  AgentRepository        - 查询modelId对应的mcpId列表 [5006]
25-10-18.13:30:49.570 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_api_1001
25-10-18.13:30:50.271 [HttpClient-11-Worker-1] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[completions=null, experimental={}, logging=null, prompts=PromptCapabilities[listChanged=false], resources=ResourceCapabilities[subscribe=false, listChanged=false], tools=ToolCapabilities[listChanged=false]], Info: Implementation[name=AIsearch, version=1.4.1] and Instructions null
25-10-18.13:30:50.372 [main            ] INFO  AiClientToolMcpNode    - SSE MCP Initialized: InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[completions=null, experimental={}, logging=null, prompts=PromptCapabilities[listChanged=false], resources=ResourceCapabilities[subscribe=false, listChanged=false], tools=ToolCapabilities[listChanged=false]], serverInfo=Implementation[name=AIsearch, version=1.4.1], instructions=null]
25-10-18.13:30:50.374 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5006
25-10-18.13:30:50.374 [main            ] INFO  AiClientModelNode      - 开始初始化 ai client model
25-10-18.13:30:50.488 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_1000
25-10-18.13:30:50.488 [main            ] WARN  AiClientAdvisorNode    - 没有需要被初始化的顾问角色
25-10-18.13:30:50.498 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_48376249
25-10-18.13:30:50.626 [main            ] INFO  AiAgentAutoConfiguration - AI Agent 自动装配完成 [{"agentId":"20099179","agentName":"111-测试model","channel":"agent","description":"111","status":1},{"agentId":"85374287","agentName":"测试Agent","channel":"agent","description":"测试Agent","status":1}]
25-10-18.13:31:08.795 [http-nio-8099-exec-1] INFO  [/]                    - Initializing Spring DispatcherServlet 'dispatcherServlet'
25-10-18.13:31:08.796 [http-nio-8099-exec-1] INFO  DispatcherServlet      - Initializing Servlet 'dispatcherServlet'
25-10-18.13:31:08.796 [http-nio-8099-exec-1] INFO  DispatcherServlet      - Completed initialization in 0 ms
25-10-18.13:31:11.362 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 开始保存画布信息: 测试Agent
25-10-18.13:31:11.976 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 更新流程图配置，configId: 16a6e20a0da7445bba258b25e572f99b, result: 1
25-10-18.13:31:11.977 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 开始更新Client关联表数据
25-10-18.13:31:11.991 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 开始解析边关系，总共4条边
25-10-18.13:31:11.991 [http-nio-8099-exec-1] WARN  DrawConfigParser       - 找不到节点信息，sourceNodeId: start_0, targetNodeId: agent_QyqMj
25-10-18.13:31:11.991 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 创建配置关系: client(48376249) -> model(1000), sourcePortId: client-output
25-10-18.13:31:11.991 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 成功创建配置关系[1]: client:48376249 -> model:1000
25-10-18.13:31:11.991 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 创建配置关系: model(1000) -> tool_mcp(5006), sourcePortId: model_select_330YCd
25-10-18.13:31:11.991 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 成功创建配置关系[2]: model:1000 -> tool_mcp:5006
25-10-18.13:31:11.991 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 边关系解析完成，处理0条边，跳过2条，生成2条有效配置关系
25-10-18.13:31:11.993 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 节点类型统计结果
25-10-18.13:31:11.993 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 节点类型: agent, 数量: 1 1有引用id
25-10-18.13:31:11.993 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 节点类型: tool_mcp, 数量: 1 1有引用id
25-10-18.13:31:11.993 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 节点类型: client, 数量: 1 1有引用id
25-10-18.13:31:11.993 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 节点类型: model, 数量: 1 1有引用id
25-10-18.13:31:11.993 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 节点配置关系统计结果
25-10-18.13:31:11.993 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 关系类型: client -> model, 数量: 1
25-10-18.13:31:11.993 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 关系类型: model -> tool_mcp, 数量: 1
25-10-18.13:31:11.993 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 总计: 4个节点，4条边，2条有效配置关系
25-10-18.13:31:11.993 [http-nio-8099-exec-1] INFO  DrawConfigParser       - === 统计结束 ===
25-10-18.13:31:11.994 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 解析配置数据完成，生成2条关系
25-10-18.13:31:12.079 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 已存在相同的记录, 不需要重复插入: AiClientConfig(id=null, sourceType=client, sourceId=48376249, targetType=model, targetId=1000, extParam={"sourcePortId":"client-output","sourceTitle":"Client_2","targetTitle":"Model_1"}, status=1, createTime=2025-10-18T13:31:11.991679200, updateTime=2025-10-18T13:31:11.991679200)
25-10-18.13:31:12.156 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 已存在相同的记录, 不需要重复插入: AiClientConfig(id=null, sourceType=model, sourceId=1000, targetType=tool_mcp, targetId=5006, extParam={"sourcePortId":"model_select_330YCd","sourceTitle":"Model_1","targetTitle":"ToolMcp_2"}, status=1, createTime=2025-10-18T13:31:11.991679200, updateTime=2025-10-18T13:31:11.991679200)
25-10-18.13:31:12.156 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 开始更新agent_flow_config表数据
25-10-18.13:31:12.157 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 提取字段:[{"key":"client_type_diuEHK","value":"DEFAULT"}] ,clientType
25-10-18.13:31:12.161 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 提取字段:"48376249" ,clientId
25-10-18.13:31:12.161 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 提取字段:"测试客户端" ,clientName
25-10-18.13:31:12.161 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 提取字段:[{"key":"sequence_JB6vrX","value":1}] ,sequence
25-10-18.13:31:12.161 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 提取字段:[{"key":"step_prompt_D3X9MV","value":""}] ,stepPrompt
25-10-18.13:31:24.766 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.13:31:26.491 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.13:32:01.751 [test-task-scheduler-3] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.13:32:05.032 [test-task-scheduler-3] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.13:32:06.466 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 插入agent_flow_config表数据: AiAgentFlowConfig(id=null, agentId=85374287, clientId=48376249, clientName=测试客户端, clientType=DEFAULT, stepPrompt=, sequence=1, status=1, createTime=2025-10-18T13:31:12.162917300)
25-10-18.13:32:29.512 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.13:32:29.800 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.13:32:49.184 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.13:32:49.460 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.13:33:19.191 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.13:33:19.360 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.13:33:47.497 [SpringApplicationShutdownHook] INFO  GracefulShutdown       - Commencing graceful shutdown. Waiting for active requests to complete
25-10-18.13:33:51.108 [main            ] INFO  Application            - Starting Application using Java 17.0.14 with PID 28780 (D:\java\ideapublic\ywz-ai-agent-station-study\ywz-ai-agent-station-study-app\target\classes started by ywz in D:\java\ideapublic\ywz-ai-agent-station-study)
25-10-18.13:33:51.110 [main            ] INFO  Application            - The following 1 profile is active: "dev"
25-10-18.13:33:52.571 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port 8099 (http)
25-10-18.13:33:52.585 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8099"]
25-10-18.13:33:52.587 [main            ] INFO  StandardService        - Starting service [Tomcat]
25-10-18.13:33:52.587 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/10.1.36]
25-10-18.13:33:52.682 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
25-10-18.13:33:52.682 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1538 ms
25-10-18.13:33:53.049 [main            ] INFO  PgVectorStore          - Using the vector table name: vector_store_openai. Is empty: false
25-10-18.13:33:53.055 [main            ] INFO  PgVectorStore          - Initializing PGVectorStore schema for table: vector_store_openai in schema: public
25-10-18.13:33:53.055 [main            ] INFO  PgVectorStore          - vectorTableValidationsEnabled false
25-10-18.13:33:53.501 [main            ] INFO  TaskJobAutoConfigBean  - xfg-wrench，任务调度器初始化完成。线程池大小: 5, 线程名前缀: test-task-scheduler-
25-10-18.13:33:53.505 [main            ] INFO  TaskJobService         - 开始初始化任务调度配置
25-10-18.13:33:53.516 [main            ] INFO  HikariDataSource       - MainHikariPool - Starting...
25-10-18.13:33:54.484 [main            ] INFO  HikariPool             - MainHikariPool - Added connection com.mysql.cj.jdbc.ConnectionImpl@2761d7fd
25-10-18.13:33:54.486 [main            ] INFO  HikariDataSource       - MainHikariPool - Start completed.
25-10-18.13:33:54.606 [main            ] INFO  TaskJobService         - 任务调度配置初始化完成，已加载任务数: 0
25-10-18.13:33:54.607 [main            ] INFO  TaskJobAutoConfigBean  - xfg-wrench，任务调度作业初始化完成。刷新间隔: 30000ms, 清理cron: 0 0/5 * * * ?
25-10-18.13:33:54.679 [main            ] INFO  OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
25-10-18.13:33:55.111 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8099"]
25-10-18.13:33:55.118 [main            ] INFO  TomcatWebServer        - Tomcat started on port 8099 (http) with context path '/'
25-10-18.13:33:55.128 [main            ] INFO  Application            - Started Application in 4.507 seconds (process running for 5.173)
25-10-18.13:33:55.130 [test-task-scheduler-1] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.13:33:55.130 [main            ] INFO  AiAgentAutoConfiguration - AI Agent 自动装配开始，配置: AiAgentAutoConfigProperties(enabled=true, clientIds=[6101])
25-10-18.13:33:55.269 [test-task-scheduler-1] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.13:33:55.511 [pool-2-thread-1 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_api) [48376249]
25-10-18.13:33:55.511 [pool-2-thread-2 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_model) [48376249]
25-10-18.13:33:55.512 [pool-2-thread-4 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_advisor) [48376249]
25-10-18.13:33:55.512 [pool-2-thread-3 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_prompt) [48376249]
25-10-18.13:33:55.512 [pool-2-thread-5 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_tool_mcp) [48376249]
25-10-18.13:33:55.512 [pool-2-thread-6 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client) [48376249]
25-10-18.13:33:56.121 [pool-2-thread-2 ] INFO  AgentRepository        - AiClientModelNode: 获取模型信息成功: 1000
25-10-18.13:33:56.121 [pool-2-thread-5 ] INFO  AgentRepository        - 查询modelId对应的mcpId列表 [5006]
25-10-18.13:33:56.215 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_api_1001
25-10-18.13:33:56.703 [HttpClient-11-Worker-1] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[completions=null, experimental={}, logging=null, prompts=PromptCapabilities[listChanged=false], resources=ResourceCapabilities[subscribe=false, listChanged=false], tools=ToolCapabilities[listChanged=false]], Info: Implementation[name=AIsearch, version=1.4.1] and Instructions null
25-10-18.13:33:56.779 [main            ] INFO  AiClientToolMcpNode    - SSE MCP Initialized: InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[completions=null, experimental={}, logging=null, prompts=PromptCapabilities[listChanged=false], resources=ResourceCapabilities[subscribe=false, listChanged=false], tools=ToolCapabilities[listChanged=false]], serverInfo=Implementation[name=AIsearch, version=1.4.1], instructions=null]
25-10-18.13:33:56.781 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5006
25-10-18.13:33:56.781 [main            ] INFO  AiClientModelNode      - 开始初始化 ai client model
25-10-18.13:33:56.877 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_1000
25-10-18.13:33:56.877 [main            ] WARN  AiClientAdvisorNode    - 没有需要被初始化的顾问角色
25-10-18.13:33:56.885 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_48376249
25-10-18.13:33:57.009 [main            ] INFO  AiAgentAutoConfiguration - AI Agent 自动装配完成 [{"agentId":"20099179","agentName":"111-测试model","channel":"agent","description":"111","status":1},{"agentId":"85374287","agentName":"测试Agent","channel":"agent","description":"测试Agent","status":1}]
25-10-18.13:34:02.058 [http-nio-8099-exec-1] INFO  [/]                    - Initializing Spring DispatcherServlet 'dispatcherServlet'
25-10-18.13:34:02.058 [http-nio-8099-exec-1] INFO  DispatcherServlet      - Initializing Servlet 'dispatcherServlet'
25-10-18.13:34:02.059 [http-nio-8099-exec-1] INFO  DispatcherServlet      - Completed initialization in 1 ms
25-10-18.13:34:03.187 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 开始保存画布信息: 测试Agent
25-10-18.13:34:03.542 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 更新流程图配置，configId: 16a6e20a0da7445bba258b25e572f99b, result: 1
25-10-18.13:34:03.543 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 开始更新Client关联表数据
25-10-18.13:34:03.551 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 开始解析边关系，总共4条边
25-10-18.13:34:03.551 [http-nio-8099-exec-1] WARN  DrawConfigParser       - 找不到节点信息，sourceNodeId: start_0, targetNodeId: agent_QyqMj
25-10-18.13:34:03.551 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 创建配置关系: client(48376249) -> model(1000), sourcePortId: client-output
25-10-18.13:34:03.551 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 成功创建配置关系[1]: client:48376249 -> model:1000
25-10-18.13:34:03.551 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 创建配置关系: model(1000) -> tool_mcp(5006), sourcePortId: model_select_330YCd
25-10-18.13:34:03.551 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 成功创建配置关系[2]: model:1000 -> tool_mcp:5006
25-10-18.13:34:03.551 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 边关系解析完成，处理0条边，跳过2条，生成2条有效配置关系
25-10-18.13:34:03.551 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 节点类型统计结果
25-10-18.13:34:03.551 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 节点类型: agent, 数量: 1 1有引用id
25-10-18.13:34:03.551 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 节点类型: tool_mcp, 数量: 1 1有引用id
25-10-18.13:34:03.551 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 节点类型: client, 数量: 1 1有引用id
25-10-18.13:34:03.551 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 节点类型: model, 数量: 1 1有引用id
25-10-18.13:34:03.551 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 节点配置关系统计结果
25-10-18.13:34:03.551 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 关系类型: client -> model, 数量: 1
25-10-18.13:34:03.551 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 关系类型: model -> tool_mcp, 数量: 1
25-10-18.13:34:03.551 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 总计: 4个节点，4条边，2条有效配置关系
25-10-18.13:34:03.552 [http-nio-8099-exec-1] INFO  DrawConfigParser       - === 统计结束 ===
25-10-18.13:34:03.552 [http-nio-8099-exec-1] INFO  DrawConfigParser       - 解析配置数据完成，生成2条关系
25-10-18.13:34:03.597 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 已存在相同的记录, 不需要重复插入: AiClientConfig(id=null, sourceType=client, sourceId=48376249, targetType=model, targetId=1000, extParam={"sourcePortId":"client-output","sourceTitle":"Client_2","targetTitle":"Model_1"}, status=1, createTime=2025-10-18T13:34:03.551526400, updateTime=2025-10-18T13:34:03.551526400)
25-10-18.13:34:03.698 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 已存在相同的记录, 不需要重复插入: AiClientConfig(id=null, sourceType=model, sourceId=1000, targetType=tool_mcp, targetId=5006, extParam={"sourcePortId":"model_select_330YCd","sourceTitle":"Model_1","targetTitle":"ToolMcp_2"}, status=1, createTime=2025-10-18T13:34:03.551526400, updateTime=2025-10-18T13:34:03.551526400)
25-10-18.13:34:03.699 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 开始更新agent_flow_config表数据
25-10-18.13:34:03.699 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 提取字段:[{"key":"client_type_diuEHK","value":"DEFAULT"}] ,clientType
25-10-18.13:34:03.703 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 提取字段:"48376249" ,clientId
25-10-18.13:34:03.703 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 提取字段:"测试客户端" ,clientName
25-10-18.13:34:03.703 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 提取字段:[{"key":"sequence_JB6vrX","value":1}] ,sequence
25-10-18.13:34:03.703 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 提取字段:[{"key":"step_prompt_D3X9MV","value":""}] ,stepPrompt
25-10-18.13:34:04.109 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 插入agent_flow_config表数据: AiAgentFlowConfig(id=null, agentId=85374287, clientId=48376249, clientName=测试客户端, clientType=DEFAULT, stepPrompt=, sequence=1, status=1, createTime=2025-10-18T13:34:03.703263300)
25-10-18.13:34:23.704 [http-nio-8099-exec-4] INFO  AiAgentDrawAdminController - 查询拖拉拽流程图配置列表请求：AiAgentDrawConfigQueryRequestDTO(configId=null, configName=null, agentId=null, status=null, pageNum=1, pageSize=10)
25-10-18.13:34:25.142 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.13:34:26.323 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.13:34:51.061 [http-nio-8099-exec-2] INFO  AiClientAdvisorAdminController - 查询所有顾问配置
25-10-18.13:34:53.091 [http-nio-8099-exec-7] INFO  AiClientAdvisorAdminController - 查询所有顾问配置
25-10-18.13:34:55.136 [test-task-scheduler-3] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.13:34:55.307 [test-task-scheduler-3] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.13:35:00.000 [test-task-scheduler-1] INFO  TaskJobService         - 开始清理无效的任务
25-10-18.13:35:01.797 [test-task-scheduler-1] INFO  TaskJobService         - 发现1个无效任务需要清理
25-10-18.13:35:01.797 [test-task-scheduler-1] INFO  TaskJobService         - 无效任务清理完成，当前活跃任务数: 0
25-10-18.13:35:13.214 [http-nio-8099-exec-6] INFO  AiClientAdminController - 查询所有AI客户端配置
25-10-18.13:35:20.661 [http-nio-8099-exec-8] INFO  AiClientAdminController - 查询所有AI客户端配置
25-10-18.13:35:25.131 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.13:35:25.205 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.13:35:32.587 [http-nio-8099-exec-9] INFO  AiClientModelAdminController - 查询所有启用的AI客户端模型配置请求
25-10-18.13:35:33.287 [http-nio-8099-exec-10] INFO  AiClientModelAdminController - 查询所有启用的AI客户端模型配置请求
25-10-18.13:35:55.136 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.13:35:55.313 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.13:36:25.139 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.13:36:25.316 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.13:36:33.801 [http-nio-8099-exec-3] INFO  AiClientSystemPromptAdminController - 查询所有系统提示词配置
25-10-18.13:36:34.646 [http-nio-8099-exec-4] INFO  AiClientSystemPromptAdminController - 查询所有系统提示词配置
25-10-18.13:36:44.366 [http-nio-8099-exec-5] INFO  AiClientSystemPromptAdminController - 查询所有系统提示词配置
25-10-18.13:36:55.133 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.13:36:55.317 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.13:37:25.141 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.13:37:25.320 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.13:37:29.660 [http-nio-8099-exec-2] INFO  AiClientModelAdminController - 查询所有启用的AI客户端模型配置请求
25-10-18.13:37:55.141 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.13:37:55.296 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.13:38:25.141 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.13:38:25.325 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.13:38:49.303 [http-nio-8099-exec-6] INFO  AiClientAdvisorAdminController - 查询所有顾问配置
25-10-18.13:38:50.994 [http-nio-8099-exec-8] INFO  AiClientAdvisorAdminController - 查询所有顾问配置
25-10-18.13:38:55.137 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.13:38:55.328 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.13:39:25.129 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.13:39:25.306 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.13:39:40.814 [http-nio-8099-exec-9] INFO  AiClientAdvisorAdminController - 查询所有顾问配置
25-10-18.13:39:55.134 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.13:39:55.289 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.13:40:00.014 [test-task-scheduler-4] INFO  TaskJobService         - 开始清理无效的任务
25-10-18.13:40:00.221 [http-nio-8099-exec-10] INFO  AiAgentDrawAdminController - 开始保存画布信息: testCsdn
25-10-18.13:40:00.221 [test-task-scheduler-4] INFO  TaskJobService         - 发现1个无效任务需要清理
25-10-18.13:40:00.222 [test-task-scheduler-4] INFO  TaskJobService         - 无效任务清理完成，当前活跃任务数: 0
25-10-18.13:40:00.276 [http-nio-8099-exec-10] INFO  AiAgentDrawAdminController - 提取字段:[{"key":"","value":{"content":"testCsdn"}}] ,agentName
25-10-18.13:40:00.277 [http-nio-8099-exec-10] INFO  AiAgentDrawAdminController - 提取字段:[{"key":"","value":{"content":"测试Csdn自动发帖"}}] ,description
25-10-18.13:40:00.277 [http-nio-8099-exec-10] INFO  AiAgentDrawAdminController - 提取字段:"agent" ,channel
25-10-18.13:40:00.277 [http-nio-8099-exec-10] INFO  AiAgentDrawAdminController - 提取字段:"fixedAgentExecuteStrategy" ,strategy
25-10-18.13:40:00.277 [http-nio-8099-exec-10] INFO  AiAgentDrawAdminController - 解析到agent信息: agentName=testCsdn, description=测试Csdn自动发帖, channel=agent, strategy=fixedAgentExecuteStrategy
25-10-18.13:40:00.735 [http-nio-8099-exec-10] INFO  AiAgentDrawAdminController - 开始更新Client关联表数据
25-10-18.13:40:00.736 [http-nio-8099-exec-10] INFO  DrawConfigParser       - 开始解析边关系，总共5条边
25-10-18.13:40:00.736 [http-nio-8099-exec-10] WARN  DrawConfigParser       - 找不到节点信息，sourceNodeId: start_0, targetNodeId: agent_QyqMj
25-10-18.13:40:00.737 [http-nio-8099-exec-10] INFO  DrawConfigParser       - 创建配置关系: client(6101) -> model(6001), sourcePortId: client-output
25-10-18.13:40:00.737 [http-nio-8099-exec-10] INFO  DrawConfigParser       - 成功创建配置关系[1]: client:6101 -> model:6001
25-10-18.13:40:00.737 [http-nio-8099-exec-10] INFO  DrawConfigParser       - 创建配置关系: client(6101) -> prompt(6003), sourcePortId: client-output
25-10-18.13:40:00.737 [http-nio-8099-exec-10] INFO  DrawConfigParser       - 成功创建配置关系[2]: client:6101 -> prompt:6003
25-10-18.13:40:00.737 [http-nio-8099-exec-10] INFO  DrawConfigParser       - 创建配置关系: client(6101) -> advisor(4004), sourcePortId: client-output
25-10-18.13:40:00.737 [http-nio-8099-exec-10] INFO  DrawConfigParser       - 成功创建配置关系[3]: client:6101 -> advisor:4004
25-10-18.13:40:00.737 [http-nio-8099-exec-10] INFO  DrawConfigParser       - 边关系解析完成，处理0条边，跳过2条，生成3条有效配置关系
25-10-18.13:40:00.737 [http-nio-8099-exec-10] INFO  DrawConfigParser       - 节点类型统计结果
25-10-18.13:40:00.737 [http-nio-8099-exec-10] INFO  DrawConfigParser       - 节点类型: advisor, 数量: 1 1有引用id
25-10-18.13:40:00.737 [http-nio-8099-exec-10] INFO  DrawConfigParser       - 节点类型: agent, 数量: 1 1有引用id
25-10-18.13:40:00.737 [http-nio-8099-exec-10] INFO  DrawConfigParser       - 节点类型: client, 数量: 1 1有引用id
25-10-18.13:40:00.737 [http-nio-8099-exec-10] INFO  DrawConfigParser       - 节点类型: model, 数量: 1 1有引用id
25-10-18.13:40:00.737 [http-nio-8099-exec-10] INFO  DrawConfigParser       - 节点类型: prompt, 数量: 1 1有引用id
25-10-18.13:40:00.737 [http-nio-8099-exec-10] INFO  DrawConfigParser       - 节点配置关系统计结果
25-10-18.13:40:00.737 [http-nio-8099-exec-10] INFO  DrawConfigParser       - 关系类型: client -> model, 数量: 1
25-10-18.13:40:00.737 [http-nio-8099-exec-10] INFO  DrawConfigParser       - 关系类型: client -> prompt, 数量: 1
25-10-18.13:40:00.737 [http-nio-8099-exec-10] INFO  DrawConfigParser       - 关系类型: client -> advisor, 数量: 1
25-10-18.13:40:00.737 [http-nio-8099-exec-10] INFO  DrawConfigParser       - 总计: 5个节点，5条边，3条有效配置关系
25-10-18.13:40:00.737 [http-nio-8099-exec-10] INFO  DrawConfigParser       - === 统计结束 ===
25-10-18.13:40:00.737 [http-nio-8099-exec-10] INFO  DrawConfigParser       - 解析配置数据完成，生成3条关系
25-10-18.13:40:00.830 [http-nio-8099-exec-10] INFO  AiAgentDrawAdminController - 已存在相同的记录, 不需要重复插入: AiClientConfig(id=null, sourceType=client, sourceId=6101, targetType=model, targetId=6001, extParam={"sourcePortId":"client-output","sourceTitle":"Client_1","targetTitle":"Model_1"}, status=1, createTime=2025-10-18T13:40:00.737167500, updateTime=2025-10-18T13:40:00.737167500)
25-10-18.13:40:01.170 [http-nio-8099-exec-10] INFO  AiAgentDrawAdminController - 已存在相同的记录, 不需要重复插入: AiClientConfig(id=null, sourceType=client, sourceId=6101, targetType=advisor, targetId=4004, extParam={"sourcePortId":"client-output","sourceTitle":"Client_1","targetTitle":"Advisor_2"}, status=1, createTime=2025-10-18T13:40:00.737167500, updateTime=2025-10-18T13:40:00.737167500)
25-10-18.13:40:01.170 [http-nio-8099-exec-10] INFO  AiAgentDrawAdminController - 开始更新agent_flow_config表数据
25-10-18.13:40:01.171 [http-nio-8099-exec-10] INFO  AiAgentDrawAdminController - 提取字段:[{"key":"client_type_1rPb6Y","value":"DEFAULT"}] ,clientType
25-10-18.13:40:01.171 [http-nio-8099-exec-10] INFO  AiAgentDrawAdminController - 提取字段:"6101" ,clientId
25-10-18.13:40:01.171 [http-nio-8099-exec-10] INFO  AiAgentDrawAdminController - 提取字段:"6101-CSDN发帖&通知" ,clientName
25-10-18.13:40:01.171 [http-nio-8099-exec-10] INFO  AiAgentDrawAdminController - 提取字段:[{"key":"sequence_NHhNxF","value":1}] ,sequence
25-10-18.13:40:01.171 [http-nio-8099-exec-10] INFO  AiAgentDrawAdminController - 提取字段:[{"key":"step_prompt_C73fd1","value":""}] ,stepPrompt
25-10-18.13:40:01.337 [http-nio-8099-exec-10] INFO  AiAgentDrawAdminController - 插入agent_flow_config表数据: AiAgentFlowConfig(id=null, agentId=68240838, clientId=6101, clientName=6101-CSDN发帖&通知, clientType=DEFAULT, stepPrompt=, sequence=1, status=1, createTime=2025-10-18T13:40:01.171546900)
25-10-18.13:40:10.470 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 查询拖拉拽流程图配置列表请求：AiAgentDrawConfigQueryRequestDTO(configId=null, configName=null, agentId=null, status=null, pageNum=1, pageSize=10)
25-10-18.13:40:13.831 [http-nio-8099-exec-4] INFO  AiAgentController      - 装配智能体请求开始，请求信息：{"agentId":"68240838"}
25-10-18.13:40:14.073 [pool-2-thread-7 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_api) [6101]
25-10-18.13:40:14.073 [pool-2-thread-8 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_model) [6101]
25-10-18.13:40:14.074 [pool-2-thread-9 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_prompt) [6101]
25-10-18.13:40:14.074 [pool-2-thread-10] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_advisor) [6101]
25-10-18.13:40:14.074 [pool-2-thread-11] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_tool_mcp) [6101]
25-10-18.13:40:14.074 [pool-2-thread-12] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client) [6101]
25-10-18.13:40:14.379 [pool-2-thread-8 ] INFO  AgentRepository        - AiClientModelNode: 获取模型信息成功: 6001
25-10-18.13:40:14.411 [pool-2-thread-11] INFO  AgentRepository        - 查询modelId对应的mcpId列表 [5001, 5002, 5004]
25-10-18.13:40:14.601 [http-nio-8099-exec-4] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_api_1001
25-10-18.13:40:14.870 [HttpClient-14-Worker-0] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[completions=null, experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-csdn, version=1.0.0] and Instructions null
25-10-18.13:40:14.927 [http-nio-8099-exec-4] INFO  AiClientToolMcpNode    - SSE MCP Initialized: InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[completions=null, experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-csdn, version=1.0.0], instructions=null]
25-10-18.13:40:14.927 [http-nio-8099-exec-4] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5001
25-10-18.13:40:15.306 [HttpClient-15-Worker-2] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[completions=null, experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-weixin, version=1.0.0] and Instructions null
25-10-18.13:40:15.365 [http-nio-8099-exec-4] INFO  AiClientToolMcpNode    - SSE MCP Initialized: InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[completions=null, experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-weixin, version=1.0.0], instructions=null]
25-10-18.13:40:15.365 [http-nio-8099-exec-4] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5002
25-10-18.13:40:25.134 [test-task-scheduler-5] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.13:40:25.193 [test-task-scheduler-5] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.13:40:35.866 [pool-4-thread-1 ] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[completions=null, experimental=null, logging=null, prompts=null, resources=null, tools=ToolCapabilities[listChanged=null]], Info: Implementation[name=g-search-mcp, version=0.1.0] and Instructions null
25-10-18.13:40:35.867 [http-nio-8099-exec-4] INFO  AiClientToolMcpNode    - Stdio Mcp Initialized: InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[completions=null, experimental=null, logging=null, prompts=null, resources=null, tools=ToolCapabilities[listChanged=null]], serverInfo=Implementation[name=g-search-mcp, version=0.1.0], instructions=null]
25-10-18.13:40:35.867 [http-nio-8099-exec-4] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5004
25-10-18.13:40:35.867 [http-nio-8099-exec-4] INFO  AiClientModelNode      - 开始初始化 ai client model
25-10-18.13:40:35.976 [http-nio-8099-exec-4] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_6001
25-10-18.13:40:35.986 [http-nio-8099-exec-4] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_advisor_4001
25-10-18.13:40:35.990 [http-nio-8099-exec-4] ERROR AiAgentController      - 装配智能体失败，agentId：68240838，错误信息：装配智能体失败
java.lang.RuntimeException: 装配智能体失败
	at com.ywzai.domain.agent.service.armory.ArmoryService.acceptArmoryAgent(ArmoryService.java:64)
	at com.ywzai.trigger.http.AiAgentController.armoryAgent(AiAgentController.java:118)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:257)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1088)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'ai_client_advisor_4004' available
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeanDefinition(DefaultListableBeanFactory.java:951)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getMergedLocalBeanDefinition(AbstractBeanFactory.java:1382)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:302)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1272)
	at com.ywzai.domain.agent.service.armory.node.AbstractArmorySupport.getBean(AbstractArmorySupport.java:47)
	at com.ywzai.domain.agent.service.armory.node.AiClientNode.doApply(AiClientNode.java:70)
	at com.ywzai.domain.agent.service.armory.node.AiClientNode.doApply(AiClientNode.java:27)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.apply(AbstractMultiThreadStrategyRouter.java:31)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.router(AbstractMultiThreadStrategyRouter.java:22)
	at com.ywzai.domain.agent.service.armory.node.AiClientAdvisorNode.doApply(AiClientAdvisorNode.java:43)
	at com.ywzai.domain.agent.service.armory.node.AiClientAdvisorNode.doApply(AiClientAdvisorNode.java:23)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.apply(AbstractMultiThreadStrategyRouter.java:31)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.router(AbstractMultiThreadStrategyRouter.java:22)
	at com.ywzai.domain.agent.service.armory.node.AiClientModelNode.doApply(AiClientModelNode.java:66)
	at com.ywzai.domain.agent.service.armory.node.AiClientModelNode.doApply(AiClientModelNode.java:26)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.apply(AbstractMultiThreadStrategyRouter.java:31)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.router(AbstractMultiThreadStrategyRouter.java:22)
	at com.ywzai.domain.agent.service.armory.node.AiClientToolMcpNode.doApply(AiClientToolMcpNode.java:47)
	at com.ywzai.domain.agent.service.armory.node.AiClientToolMcpNode.doApply(AiClientToolMcpNode.java:28)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.apply(AbstractMultiThreadStrategyRouter.java:31)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.router(AbstractMultiThreadStrategyRouter.java:22)
	at com.ywzai.domain.agent.service.armory.node.AiClientApiNode.doApply(AiClientApiNode.java:43)
	at com.ywzai.domain.agent.service.armory.node.AiClientApiNode.doApply(AiClientApiNode.java:21)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.apply(AbstractMultiThreadStrategyRouter.java:31)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.router(AbstractMultiThreadStrategyRouter.java:22)
	at com.ywzai.domain.agent.service.armory.node.RootNode.doApply(RootNode.java:37)
	at com.ywzai.domain.agent.service.armory.node.RootNode.doApply(RootNode.java:20)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.apply(AbstractMultiThreadStrategyRouter.java:31)
	at com.ywzai.domain.agent.service.armory.ArmoryService.acceptArmoryAgent(ArmoryService.java:57)
	... 51 common frames omitted
25-10-18.13:40:55.131 [test-task-scheduler-5] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.13:40:55.193 [test-task-scheduler-5] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.13:41:19.083 [http-nio-8099-exec-2] INFO  AiAgentDrawAdminController - 获取流程图配置请求，configId: 7ba2712599024a07939427f362a0dbef
25-10-18.13:41:19.223 [http-nio-8099-exec-9] INFO  AiClientAdvisorAdminController - 查询所有顾问配置
25-10-18.13:41:19.223 [http-nio-8099-exec-6] INFO  AiClientSystemPromptAdminController - 查询所有系统提示词配置
25-10-18.13:41:19.227 [http-nio-8099-exec-10] INFO  AiClientAdminController - 查询所有AI客户端配置
25-10-18.13:41:19.230 [http-nio-8099-exec-1] INFO  AiClientModelAdminController - 查询所有启用的AI客户端模型配置请求
25-10-18.13:41:25.139 [test-task-scheduler-4] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.13:41:25.201 [test-task-scheduler-4] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.13:41:55.134 [test-task-scheduler-4] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.13:41:55.271 [test-task-scheduler-4] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.13:41:59.975 [http-nio-8099-exec-4] INFO  AiClientAdminController - 根据条件查询AI客户端配置列表请求：AiClientQueryRequestDTO(clientId=null, clientName=null, status=null, pageNum=1, pageSize=10)
25-10-18.13:42:03.904 [http-nio-8099-exec-5] INFO  AiAgentDrawAdminController - 查询拖拉拽流程图配置列表请求：AiAgentDrawConfigQueryRequestDTO(configId=null, configName=null, agentId=null, status=null, pageNum=1, pageSize=10)
25-10-18.13:42:10.236 [http-nio-8099-exec-2] INFO  AiAgentController      - 装配智能体请求开始，请求信息：{"agentId":"68240838"}
25-10-18.13:42:10.396 [pool-2-thread-13] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_api) [6101]
25-10-18.13:42:10.396 [pool-2-thread-14] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_model) [6101]
25-10-18.13:42:10.396 [pool-2-thread-16] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_advisor) [6101]
25-10-18.13:42:10.396 [pool-2-thread-15] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_prompt) [6101]
25-10-18.13:42:10.396 [pool-2-thread-17] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_tool_mcp) [6101]
25-10-18.13:42:10.396 [pool-2-thread-18] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client) [6101]
25-10-18.13:42:10.704 [pool-2-thread-14] INFO  AgentRepository        - AiClientModelNode: 获取模型信息成功: 6001
25-10-18.13:42:10.704 [pool-2-thread-17] INFO  AgentRepository        - 查询modelId对应的mcpId列表 [5001, 5002, 5004]
25-10-18.13:42:11.017 [http-nio-8099-exec-2] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_api_1001
25-10-18.13:42:11.317 [HttpClient-14-Worker-3] WARN  McpClientSession       - Unexpected response for unknown id 2e244cbf-0
25-10-18.13:42:11.320 [HttpClient-18-Worker-2] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[completions=null, experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-csdn, version=1.0.0] and Instructions null
25-10-18.13:42:11.371 [http-nio-8099-exec-2] INFO  AiClientToolMcpNode    - SSE MCP Initialized: InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[completions=null, experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-csdn, version=1.0.0], instructions=null]
25-10-18.13:42:11.373 [http-nio-8099-exec-2] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5001
25-10-18.13:42:11.625 [HttpClient-15-Worker-3] WARN  McpClientSession       - Unexpected response for unknown id 055a0ed9-0
25-10-18.13:42:11.627 [HttpClient-19-Worker-1] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[completions=null, experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-weixin, version=1.0.0] and Instructions null
25-10-18.13:42:11.683 [http-nio-8099-exec-2] INFO  AiClientToolMcpNode    - SSE MCP Initialized: InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[completions=null, experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-weixin, version=1.0.0], instructions=null]
25-10-18.13:42:11.683 [http-nio-8099-exec-2] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5002
25-10-18.13:42:14.059 [pool-10-thread-1] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[completions=null, experimental=null, logging=null, prompts=null, resources=null, tools=ToolCapabilities[listChanged=null]], Info: Implementation[name=g-search-mcp, version=0.1.0] and Instructions null
25-10-18.13:42:14.059 [http-nio-8099-exec-2] INFO  AiClientToolMcpNode    - Stdio Mcp Initialized: InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[completions=null, experimental=null, logging=null, prompts=null, resources=null, tools=ToolCapabilities[listChanged=null]], serverInfo=Implementation[name=g-search-mcp, version=0.1.0], instructions=null]
25-10-18.13:42:14.063 [http-nio-8099-exec-2] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5004
25-10-18.13:42:14.063 [http-nio-8099-exec-2] INFO  AiClientModelNode      - 开始初始化 ai client model
25-10-18.13:42:14.168 [http-nio-8099-exec-2] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_6001
25-10-18.13:42:14.168 [http-nio-8099-exec-2] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_advisor_4001
25-10-18.13:42:14.168 [http-nio-8099-exec-2] ERROR AiAgentController      - 装配智能体失败，agentId：68240838，错误信息：装配智能体失败
java.lang.RuntimeException: 装配智能体失败
	at com.ywzai.domain.agent.service.armory.ArmoryService.acceptArmoryAgent(ArmoryService.java:64)
	at com.ywzai.trigger.http.AiAgentController.armoryAgent(AiAgentController.java:118)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:257)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1088)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'ai_client_advisor_4004' available
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeanDefinition(DefaultListableBeanFactory.java:951)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getMergedLocalBeanDefinition(AbstractBeanFactory.java:1382)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:302)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1272)
	at com.ywzai.domain.agent.service.armory.node.AbstractArmorySupport.getBean(AbstractArmorySupport.java:47)
	at com.ywzai.domain.agent.service.armory.node.AiClientNode.doApply(AiClientNode.java:70)
	at com.ywzai.domain.agent.service.armory.node.AiClientNode.doApply(AiClientNode.java:27)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.apply(AbstractMultiThreadStrategyRouter.java:31)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.router(AbstractMultiThreadStrategyRouter.java:22)
	at com.ywzai.domain.agent.service.armory.node.AiClientAdvisorNode.doApply(AiClientAdvisorNode.java:43)
	at com.ywzai.domain.agent.service.armory.node.AiClientAdvisorNode.doApply(AiClientAdvisorNode.java:23)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.apply(AbstractMultiThreadStrategyRouter.java:31)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.router(AbstractMultiThreadStrategyRouter.java:22)
	at com.ywzai.domain.agent.service.armory.node.AiClientModelNode.doApply(AiClientModelNode.java:66)
	at com.ywzai.domain.agent.service.armory.node.AiClientModelNode.doApply(AiClientModelNode.java:26)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.apply(AbstractMultiThreadStrategyRouter.java:31)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.router(AbstractMultiThreadStrategyRouter.java:22)
	at com.ywzai.domain.agent.service.armory.node.AiClientToolMcpNode.doApply(AiClientToolMcpNode.java:47)
	at com.ywzai.domain.agent.service.armory.node.AiClientToolMcpNode.doApply(AiClientToolMcpNode.java:28)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.apply(AbstractMultiThreadStrategyRouter.java:31)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.router(AbstractMultiThreadStrategyRouter.java:22)
	at com.ywzai.domain.agent.service.armory.node.AiClientApiNode.doApply(AiClientApiNode.java:43)
	at com.ywzai.domain.agent.service.armory.node.AiClientApiNode.doApply(AiClientApiNode.java:21)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.apply(AbstractMultiThreadStrategyRouter.java:31)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.router(AbstractMultiThreadStrategyRouter.java:22)
	at com.ywzai.domain.agent.service.armory.node.RootNode.doApply(RootNode.java:37)
	at com.ywzai.domain.agent.service.armory.node.RootNode.doApply(RootNode.java:20)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.apply(AbstractMultiThreadStrategyRouter.java:31)
	at com.ywzai.domain.agent.service.armory.ArmoryService.acceptArmoryAgent(ArmoryService.java:57)
	... 51 common frames omitted
25-10-18.13:42:14.172 [ForkJoinPool.commonPool-worker-3] WARN  StdioClientTransport   - Process terminated with code 1
25-10-18.13:42:25.142 [test-task-scheduler-4] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.13:42:25.449 [test-task-scheduler-4] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.13:42:55.128 [test-task-scheduler-4] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.13:42:55.349 [test-task-scheduler-4] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.13:43:25.128 [test-task-scheduler-4] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.13:43:26.649 [test-task-scheduler-4] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.13:43:55.140 [test-task-scheduler-4] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.13:43:55.355 [test-task-scheduler-4] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.13:44:25.130 [test-task-scheduler-4] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.13:44:25.562 [test-task-scheduler-4] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.13:44:50.915 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 获取流程图配置请求，configId: 7ba2712599024a07939427f362a0dbef
25-10-18.13:44:53.288 [http-nio-8099-exec-6] INFO  AiClientAdminController - 查询所有AI客户端配置
25-10-18.13:44:53.289 [http-nio-8099-exec-3] INFO  AiClientModelAdminController - 查询所有启用的AI客户端模型配置请求
25-10-18.13:44:53.290 [http-nio-8099-exec-4] INFO  AiClientSystemPromptAdminController - 查询所有系统提示词配置
25-10-18.13:44:53.292 [http-nio-8099-exec-5] INFO  AiClientAdvisorAdminController - 查询所有顾问配置
25-10-18.13:44:54.329 [http-nio-8099-exec-2] INFO  AiAgentDrawAdminController - 查询拖拉拽流程图配置列表请求：AiAgentDrawConfigQueryRequestDTO(configId=null, configName=null, agentId=null, status=null, pageNum=1, pageSize=10)
25-10-18.13:44:55.133 [test-task-scheduler-4] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.13:44:55.164 [test-task-scheduler-4] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.13:44:56.468 [http-nio-8099-exec-7] INFO  AiAgentDrawAdminController - 获取流程图配置请求，configId: 7ba2712599024a07939427f362a0dbef
25-10-18.13:44:56.599 [http-nio-8099-exec-8] INFO  AiClientAdminController - 查询所有AI客户端配置
25-10-18.13:44:56.600 [http-nio-8099-exec-10] INFO  AiClientModelAdminController - 查询所有启用的AI客户端模型配置请求
25-10-18.13:44:56.601 [http-nio-8099-exec-9] INFO  AiClientSystemPromptAdminController - 查询所有系统提示词配置
25-10-18.13:44:56.603 [http-nio-8099-exec-1] INFO  AiClientAdvisorAdminController - 查询所有顾问配置
25-10-18.13:45:00.002 [test-task-scheduler-1] INFO  TaskJobService         - 开始清理无效的任务
25-10-18.13:45:00.067 [test-task-scheduler-1] INFO  TaskJobService         - 发现1个无效任务需要清理
25-10-18.13:45:00.067 [test-task-scheduler-1] INFO  TaskJobService         - 无效任务清理完成，当前活跃任务数: 0
25-10-18.13:45:25.141 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.13:45:25.464 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.13:45:55.136 [test-task-scheduler-3] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.13:45:55.365 [test-task-scheduler-3] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.13:46:25.130 [test-task-scheduler-3] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.13:46:25.368 [test-task-scheduler-3] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.13:46:55.128 [test-task-scheduler-3] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.13:46:57.419 [test-task-scheduler-3] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.13:47:25.128 [test-task-scheduler-3] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.13:47:25.270 [test-task-scheduler-3] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.13:47:55.139 [test-task-scheduler-3] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.13:47:56.759 [test-task-scheduler-3] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.13:48:25.130 [test-task-scheduler-3] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.13:48:25.276 [test-task-scheduler-3] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.13:48:55.143 [test-task-scheduler-3] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.13:48:57.121 [test-task-scheduler-3] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.13:49:25.142 [test-task-scheduler-3] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.13:49:25.485 [test-task-scheduler-3] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.13:49:55.142 [test-task-scheduler-3] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.13:49:55.386 [test-task-scheduler-3] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.13:50:00.008 [test-task-scheduler-4] INFO  TaskJobService         - 开始清理无效的任务
25-10-18.13:50:00.200 [test-task-scheduler-4] INFO  TaskJobService         - 发现1个无效任务需要清理
25-10-18.13:50:00.200 [test-task-scheduler-4] INFO  TaskJobService         - 无效任务清理完成，当前活跃任务数: 0
25-10-18.13:50:00.716 [SpringApplicationShutdownHook] INFO  GracefulShutdown       - Commencing graceful shutdown. Waiting for active requests to complete
25-10-18.13:50:00.957 [tomcat-shutdown ] INFO  GracefulShutdown       - Graceful shutdown complete
25-10-18.13:50:00.960 [SpringApplicationShutdownHook] INFO  TaskJobService         - 开始停止所有任务
25-10-18.13:50:00.960 [SpringApplicationShutdownHook] INFO  TaskJobService         - 所有任务已停止
25-10-18.13:50:00.962 [SpringApplicationShutdownHook] INFO  HikariDataSource       - MainHikariPool - Shutdown initiated...
25-10-18.13:50:01.061 [ForkJoinPool.commonPool-worker-4] WARN  StdioClientTransport   - Process terminated with code 1
25-10-18.13:50:05.001 [main            ] INFO  Application            - Starting Application using Java 17.0.14 with PID 4808 (D:\java\ideapublic\ywz-ai-agent-station-study\ywz-ai-agent-station-study-app\target\classes started by ywz in D:\java\ideapublic\ywz-ai-agent-station-study)
25-10-18.13:50:05.003 [main            ] INFO  Application            - The following 1 profile is active: "dev"
25-10-18.13:50:06.599 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port 8099 (http)
25-10-18.13:50:06.613 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8099"]
25-10-18.13:50:06.615 [main            ] INFO  StandardService        - Starting service [Tomcat]
25-10-18.13:50:06.615 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/10.1.36]
25-10-18.13:50:06.710 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
25-10-18.13:50:06.710 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1669 ms
25-10-18.13:50:07.122 [main            ] INFO  PgVectorStore          - Using the vector table name: vector_store_openai. Is empty: false
25-10-18.13:50:07.126 [main            ] INFO  PgVectorStore          - Initializing PGVectorStore schema for table: vector_store_openai in schema: public
25-10-18.13:50:07.127 [main            ] INFO  PgVectorStore          - vectorTableValidationsEnabled false
25-10-18.13:50:07.587 [main            ] INFO  TaskJobAutoConfigBean  - xfg-wrench，任务调度器初始化完成。线程池大小: 5, 线程名前缀: test-task-scheduler-
25-10-18.13:50:07.591 [main            ] INFO  TaskJobService         - 开始初始化任务调度配置
25-10-18.13:50:07.604 [main            ] INFO  HikariDataSource       - MainHikariPool - Starting...
25-10-18.13:50:11.925 [main            ] INFO  HikariPool             - MainHikariPool - Added connection com.mysql.cj.jdbc.ConnectionImpl@336daff0
25-10-18.13:50:11.927 [main            ] INFO  HikariDataSource       - MainHikariPool - Start completed.
25-10-18.13:50:12.065 [main            ] INFO  TaskJobService         - 任务调度配置初始化完成，已加载任务数: 0
25-10-18.13:50:12.067 [main            ] INFO  TaskJobAutoConfigBean  - xfg-wrench，任务调度作业初始化完成。刷新间隔: 30000ms, 清理cron: 0 0/5 * * * ?
25-10-18.13:50:12.152 [main            ] INFO  OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
25-10-18.13:50:12.616 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8099"]
25-10-18.13:50:12.623 [main            ] INFO  TomcatWebServer        - Tomcat started on port 8099 (http) with context path '/'
25-10-18.13:50:12.633 [main            ] INFO  Application            - Started Application in 8.152 seconds (process running for 8.945)
25-10-18.13:50:12.634 [test-task-scheduler-1] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.13:50:12.635 [main            ] INFO  AiAgentAutoConfiguration - AI Agent 自动装配开始，配置: AiAgentAutoConfigProperties(enabled=true, clientIds=[6101])
25-10-18.13:50:12.768 [test-task-scheduler-1] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.13:50:13.005 [pool-2-thread-1 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_api) [48376249]
25-10-18.13:50:13.006 [pool-2-thread-3 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_prompt) [48376249]
25-10-18.13:50:13.006 [pool-2-thread-2 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_model) [48376249]
25-10-18.13:50:13.006 [pool-2-thread-4 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_advisor) [48376249]
25-10-18.13:50:13.006 [pool-2-thread-5 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_tool_mcp) [48376249]
25-10-18.13:50:13.006 [pool-2-thread-6 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client) [48376249]
25-10-18.13:50:13.408 [pool-2-thread-2 ] INFO  AgentRepository        - AiClientModelNode: 获取模型信息成功: 1000
25-10-18.13:50:13.409 [pool-2-thread-5 ] INFO  AgentRepository        - 查询modelId对应的mcpId列表 [5006]
25-10-18.13:50:13.549 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_api_1001
25-10-18.13:50:14.261 [HttpClient-11-Worker-0] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[completions=null, experimental={}, logging=null, prompts=PromptCapabilities[listChanged=false], resources=ResourceCapabilities[subscribe=false, listChanged=false], tools=ToolCapabilities[listChanged=false]], Info: Implementation[name=AIsearch, version=1.4.1] and Instructions null
25-10-18.13:50:14.342 [main            ] INFO  AiClientToolMcpNode    - SSE MCP Initialized: InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[completions=null, experimental={}, logging=null, prompts=PromptCapabilities[listChanged=false], resources=ResourceCapabilities[subscribe=false, listChanged=false], tools=ToolCapabilities[listChanged=false]], serverInfo=Implementation[name=AIsearch, version=1.4.1], instructions=null]
25-10-18.13:50:14.344 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5006
25-10-18.13:50:14.344 [main            ] INFO  AiClientModelNode      - 开始初始化 ai client model
25-10-18.13:50:14.496 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_1000
25-10-18.13:50:31.656 [main            ] WARN  AiClientAdvisorNode    - 没有需要被初始化的顾问角色
25-10-18.13:50:31.698 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_48376249
25-10-18.13:50:35.637 [pool-2-thread-7 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_api) [6101]
25-10-18.13:50:35.637 [pool-2-thread-8 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_model) [6101]
25-10-18.13:50:35.637 [pool-2-thread-9 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_prompt) [6101]
25-10-18.13:50:35.637 [pool-2-thread-10] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_advisor) [6101]
25-10-18.13:50:35.637 [pool-2-thread-11] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_tool_mcp) [6101]
25-10-18.13:50:35.637 [pool-2-thread-12] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client) [6101]
25-10-18.13:50:35.835 [pool-2-thread-8 ] INFO  AgentRepository        - AiClientModelNode: 获取模型信息成功: 6001
25-10-18.13:50:35.935 [pool-2-thread-11] INFO  AgentRepository        - 查询modelId对应的mcpId列表 [5001, 5002, 5004]
25-10-18.13:50:36.131 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_api_1001
25-10-18.13:50:36.288 [HttpClient-14-Worker-2] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[completions=null, experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-csdn, version=1.0.0] and Instructions null
25-10-18.13:50:36.340 [main            ] INFO  AiClientToolMcpNode    - SSE MCP Initialized: InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[completions=null, experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-csdn, version=1.0.0], instructions=null]
25-10-18.13:50:36.340 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5001
25-10-18.13:50:36.515 [HttpClient-15-Worker-2] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[completions=null, experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-weixin, version=1.0.0] and Instructions null
25-10-18.13:50:36.547 [main            ] INFO  AiClientToolMcpNode    - SSE MCP Initialized: InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[completions=null, experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-weixin, version=1.0.0], instructions=null]
25-10-18.13:50:36.547 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5002
25-10-18.13:50:38.614 [pool-4-thread-1 ] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[completions=null, experimental=null, logging=null, prompts=null, resources=null, tools=ToolCapabilities[listChanged=null]], Info: Implementation[name=g-search-mcp, version=0.1.0] and Instructions null
25-10-18.13:50:38.615 [main            ] INFO  AiClientToolMcpNode    - Stdio Mcp Initialized: InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[completions=null, experimental=null, logging=null, prompts=null, resources=null, tools=ToolCapabilities[listChanged=null]], serverInfo=Implementation[name=g-search-mcp, version=0.1.0], instructions=null]
25-10-18.13:50:38.615 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5004
25-10-18.13:50:38.615 [main            ] INFO  AiClientModelNode      - 开始初始化 ai client model
25-10-18.13:50:38.690 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_6001
25-10-18.13:51:47.407 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.13:51:47.407 [MainHikariPool housekeeper] WARN  HikariPool             - MainHikariPool - Thread starvation or clock leap detected (housekeeper delta=1m35s369ms783µs200ns).
25-10-18.13:51:47.419 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_advisor_4001
25-10-18.13:51:47.421 [main            ] ERROR AiAgentAutoConfiguration - AI Agent 自动装配失败
java.lang.RuntimeException: 装配智能体失败
	at com.ywzai.domain.agent.service.armory.ArmoryService.acceptArmoryAgent(ArmoryService.java:64)
	at com.ywzai.domain.agent.service.armory.ArmoryService.acceptArmoryAllAvailableAgents(ArmoryService.java:38)
	at com.ywzai.config.AiAgentAutoConfiguration.onApplicationEvent(AiAgentAutoConfiguration.java:50)
	at com.ywzai.config.AiAgentAutoConfiguration.onApplicationEvent(AiAgentAutoConfiguration.java:24)
	at com.ywzai.config.AiAgentAutoConfiguration$$SpringCGLIB$$0.onApplicationEvent(<generated>)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.boot.context.event.EventPublishingRunListener.ready(EventPublishingRunListener.java:109)
	at org.springframework.boot.SpringApplicationRunListeners.lambda$ready$6(SpringApplicationRunListeners.java:80)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.boot.SpringApplicationRunListeners.doWithListeners(SpringApplicationRunListeners.java:118)
	at org.springframework.boot.SpringApplicationRunListeners.doWithListeners(SpringApplicationRunListeners.java:112)
	at org.springframework.boot.SpringApplicationRunListeners.ready(SpringApplicationRunListeners.java:80)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:332)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.ywzai.Application.main(Application.java:17)
Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'ai_client_advisor_4004' available
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeanDefinition(DefaultListableBeanFactory.java:951)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getMergedLocalBeanDefinition(AbstractBeanFactory.java:1382)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:302)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1272)
	at com.ywzai.domain.agent.service.armory.node.AbstractArmorySupport.getBean(AbstractArmorySupport.java:47)
	at com.ywzai.domain.agent.service.armory.node.AiClientNode.doApply(AiClientNode.java:70)
	at com.ywzai.domain.agent.service.armory.node.AiClientNode.doApply(AiClientNode.java:27)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.apply(AbstractMultiThreadStrategyRouter.java:31)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.router(AbstractMultiThreadStrategyRouter.java:22)
	at com.ywzai.domain.agent.service.armory.node.AiClientAdvisorNode.doApply(AiClientAdvisorNode.java:43)
	at com.ywzai.domain.agent.service.armory.node.AiClientAdvisorNode.doApply(AiClientAdvisorNode.java:23)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.apply(AbstractMultiThreadStrategyRouter.java:31)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.router(AbstractMultiThreadStrategyRouter.java:22)
	at com.ywzai.domain.agent.service.armory.node.AiClientModelNode.doApply(AiClientModelNode.java:66)
	at com.ywzai.domain.agent.service.armory.node.AiClientModelNode.doApply(AiClientModelNode.java:26)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.apply(AbstractMultiThreadStrategyRouter.java:31)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.router(AbstractMultiThreadStrategyRouter.java:22)
	at com.ywzai.domain.agent.service.armory.node.AiClientToolMcpNode.doApply(AiClientToolMcpNode.java:47)
	at com.ywzai.domain.agent.service.armory.node.AiClientToolMcpNode.doApply(AiClientToolMcpNode.java:28)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.apply(AbstractMultiThreadStrategyRouter.java:31)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.router(AbstractMultiThreadStrategyRouter.java:22)
	at com.ywzai.domain.agent.service.armory.node.AiClientApiNode.doApply(AiClientApiNode.java:43)
	at com.ywzai.domain.agent.service.armory.node.AiClientApiNode.doApply(AiClientApiNode.java:21)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.apply(AbstractMultiThreadStrategyRouter.java:31)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.router(AbstractMultiThreadStrategyRouter.java:22)
	at com.ywzai.domain.agent.service.armory.node.RootNode.doApply(RootNode.java:37)
	at com.ywzai.domain.agent.service.armory.node.RootNode.doApply(RootNode.java:20)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.apply(AbstractMultiThreadStrategyRouter.java:31)
	at com.ywzai.domain.agent.service.armory.ArmoryService.acceptArmoryAgent(ArmoryService.java:57)
	... 19 common frames omitted
25-10-18.13:51:47.475 [http-nio-8099-exec-1] INFO  [/]                    - Initializing Spring DispatcherServlet 'dispatcherServlet'
25-10-18.13:51:47.475 [http-nio-8099-exec-1] INFO  DispatcherServlet      - Initializing Servlet 'dispatcherServlet'
25-10-18.13:51:47.476 [http-nio-8099-exec-1] INFO  DispatcherServlet      - Completed initialization in 1 ms
25-10-18.13:51:47.480 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.13:51:47.480 [test-task-scheduler-3] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.13:51:47.509 [test-task-scheduler-3] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.13:51:47.509 [test-task-scheduler-1] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.13:51:47.527 [http-nio-8099-exec-1] INFO  AiAgentDrawAdminController - 查询拖拉拽流程图配置列表请求：AiAgentDrawConfigQueryRequestDTO(configId=null, configName=null, agentId=null, status=null, pageNum=1, pageSize=10)
25-10-18.13:51:47.527 [http-nio-8099-exec-3] INFO  AiAgentDrawAdminController - 查询拖拉拽流程图配置列表请求：AiAgentDrawConfigQueryRequestDTO(configId=null, configName=null, agentId=null, status=null, pageNum=1, pageSize=10)
25-10-18.13:51:47.527 [http-nio-8099-exec-2] INFO  AiAgentDrawAdminController - 查询拖拉拽流程图配置列表请求：AiAgentDrawConfigQueryRequestDTO(configId=null, configName=null, agentId=null, status=null, pageNum=1, pageSize=10)
25-10-18.13:51:47.615 [test-task-scheduler-1] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.13:52:12.580 [http-nio-8099-exec-4] INFO  AiAgentController      - 装配智能体请求开始，请求信息：{"agentId":"68240838"}
25-10-18.13:52:12.639 [test-task-scheduler-1] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.13:52:12.704 [pool-2-thread-13] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_api) [6101]
25-10-18.13:52:12.704 [pool-2-thread-15] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_prompt) [6101]
25-10-18.13:52:12.704 [pool-2-thread-14] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_model) [6101]
25-10-18.13:52:12.704 [pool-2-thread-16] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_advisor) [6101]
25-10-18.13:52:12.704 [pool-2-thread-17] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_tool_mcp) [6101]
25-10-18.13:52:12.704 [pool-2-thread-18] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client) [6101]
25-10-18.13:52:12.804 [test-task-scheduler-1] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.13:52:13.187 [pool-2-thread-17] INFO  AgentRepository        - 查询modelId对应的mcpId列表 [5001, 5002, 5004]
25-10-18.13:52:13.187 [pool-2-thread-14] INFO  AgentRepository        - AiClientModelNode: 获取模型信息成功: 6001
25-10-18.13:52:13.423 [http-nio-8099-exec-4] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_api_1001
25-10-18.13:52:13.727 [HttpClient-14-Worker-3] WARN  McpClientSession       - Unexpected response for unknown id a71bb4e8-0
25-10-18.13:52:13.729 [HttpClient-18-Worker-1] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[completions=null, experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-csdn, version=1.0.0] and Instructions null
25-10-18.13:52:13.783 [http-nio-8099-exec-4] INFO  AiClientToolMcpNode    - SSE MCP Initialized: InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[completions=null, experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-csdn, version=1.0.0], instructions=null]
25-10-18.13:52:13.785 [http-nio-8099-exec-4] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5001
25-10-18.13:52:14.035 [HttpClient-15-Worker-3] WARN  McpClientSession       - Unexpected response for unknown id 0ffda581-0
25-10-18.13:52:14.041 [HttpClient-19-Worker-0] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[completions=null, experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-weixin, version=1.0.0] and Instructions null
25-10-18.13:52:14.094 [http-nio-8099-exec-4] INFO  AiClientToolMcpNode    - SSE MCP Initialized: InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[completions=null, experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-weixin, version=1.0.0], instructions=null]
25-10-18.13:52:14.095 [http-nio-8099-exec-4] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5002
25-10-18.13:52:16.009 [pool-10-thread-1] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[completions=null, experimental=null, logging=null, prompts=null, resources=null, tools=ToolCapabilities[listChanged=null]], Info: Implementation[name=g-search-mcp, version=0.1.0] and Instructions null
25-10-18.13:52:16.010 [http-nio-8099-exec-4] INFO  AiClientToolMcpNode    - Stdio Mcp Initialized: InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[completions=null, experimental=null, logging=null, prompts=null, resources=null, tools=ToolCapabilities[listChanged=null]], serverInfo=Implementation[name=g-search-mcp, version=0.1.0], instructions=null]
25-10-18.13:52:16.015 [http-nio-8099-exec-4] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5004
25-10-18.13:52:16.015 [http-nio-8099-exec-4] INFO  AiClientModelNode      - 开始初始化 ai client model
25-10-18.13:52:16.102 [http-nio-8099-exec-4] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_6001
25-10-18.13:52:19.538 [ForkJoinPool.commonPool-worker-2] WARN  StdioClientTransport   - Process terminated with code 1
25-10-18.13:54:15.704 [test-task-scheduler-1] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.13:54:15.704 [MainHikariPool housekeeper] WARN  HikariPool             - MainHikariPool - Thread starvation or clock leap detected (housekeeper delta=1m56s170ms156µs).
25-10-18.13:54:15.709 [http-nio-8099-exec-4] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_advisor_4001
25-10-18.13:54:15.712 [http-nio-8099-exec-4] ERROR AiAgentController      - 装配智能体失败，agentId：68240838，错误信息：装配智能体失败
java.lang.RuntimeException: 装配智能体失败
	at com.ywzai.domain.agent.service.armory.ArmoryService.acceptArmoryAgent(ArmoryService.java:64)
	at com.ywzai.trigger.http.AiAgentController.armoryAgent(AiAgentController.java:118)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:257)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1088)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'ai_client_advisor_4004' available
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeanDefinition(DefaultListableBeanFactory.java:951)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getMergedLocalBeanDefinition(AbstractBeanFactory.java:1382)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:302)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1272)
	at com.ywzai.domain.agent.service.armory.node.AbstractArmorySupport.getBean(AbstractArmorySupport.java:47)
	at com.ywzai.domain.agent.service.armory.node.AiClientNode.doApply(AiClientNode.java:70)
	at com.ywzai.domain.agent.service.armory.node.AiClientNode.doApply(AiClientNode.java:27)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.apply(AbstractMultiThreadStrategyRouter.java:31)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.router(AbstractMultiThreadStrategyRouter.java:22)
	at com.ywzai.domain.agent.service.armory.node.AiClientAdvisorNode.doApply(AiClientAdvisorNode.java:43)
	at com.ywzai.domain.agent.service.armory.node.AiClientAdvisorNode.doApply(AiClientAdvisorNode.java:23)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.apply(AbstractMultiThreadStrategyRouter.java:31)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.router(AbstractMultiThreadStrategyRouter.java:22)
	at com.ywzai.domain.agent.service.armory.node.AiClientModelNode.doApply(AiClientModelNode.java:66)
	at com.ywzai.domain.agent.service.armory.node.AiClientModelNode.doApply(AiClientModelNode.java:26)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.apply(AbstractMultiThreadStrategyRouter.java:31)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.router(AbstractMultiThreadStrategyRouter.java:22)
	at com.ywzai.domain.agent.service.armory.node.AiClientToolMcpNode.doApply(AiClientToolMcpNode.java:47)
	at com.ywzai.domain.agent.service.armory.node.AiClientToolMcpNode.doApply(AiClientToolMcpNode.java:28)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.apply(AbstractMultiThreadStrategyRouter.java:31)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.router(AbstractMultiThreadStrategyRouter.java:22)
	at com.ywzai.domain.agent.service.armory.node.AiClientApiNode.doApply(AiClientApiNode.java:43)
	at com.ywzai.domain.agent.service.armory.node.AiClientApiNode.doApply(AiClientApiNode.java:21)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.apply(AbstractMultiThreadStrategyRouter.java:31)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.router(AbstractMultiThreadStrategyRouter.java:22)
	at com.ywzai.domain.agent.service.armory.node.RootNode.doApply(RootNode.java:37)
	at com.ywzai.domain.agent.service.armory.node.RootNode.doApply(RootNode.java:20)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.apply(AbstractMultiThreadStrategyRouter.java:31)
	at com.ywzai.domain.agent.service.armory.ArmoryService.acceptArmoryAgent(ArmoryService.java:57)
	... 51 common frames omitted
25-10-18.13:54:15.754 [SpringApplicationShutdownHook] INFO  GracefulShutdown       - Commencing graceful shutdown. Waiting for active requests to complete
25-10-18.13:54:15.913 [test-task-scheduler-1] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.13:54:15.913 [test-task-scheduler-1] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.13:54:15.990 [test-task-scheduler-1] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.13:54:15.990 [test-task-scheduler-1] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.13:54:16.020 [tomcat-shutdown ] INFO  GracefulShutdown       - Graceful shutdown complete
25-10-18.13:54:16.024 [SpringApplicationShutdownHook] INFO  TaskJobService         - 开始停止所有任务
25-10-18.13:54:16.025 [SpringApplicationShutdownHook] INFO  TaskJobService         - 所有任务已停止
25-10-18.13:54:16.092 [test-task-scheduler-1] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.13:54:16.096 [SpringApplicationShutdownHook] INFO  HikariDataSource       - MainHikariPool - Shutdown initiated...
25-10-18.13:54:16.136 [ForkJoinPool.commonPool-worker-2] WARN  StdioClientTransport   - Process terminated with code 1
25-10-18.13:54:17.116 [SpringApplicationShutdownHook] INFO  HikariDataSource       - MainHikariPool - Shutdown completed.
25-10-18.13:54:20.383 [main            ] INFO  Application            - Starting Application using Java 17.0.14 with PID 1396 (D:\java\ideapublic\ywz-ai-agent-station-study\ywz-ai-agent-station-study-app\target\classes started by ywz in D:\java\ideapublic\ywz-ai-agent-station-study)
25-10-18.13:54:20.385 [main            ] INFO  Application            - The following 1 profile is active: "dev"
25-10-18.13:54:22.008 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port 8099 (http)
25-10-18.13:54:22.022 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8099"]
25-10-18.13:54:22.025 [main            ] INFO  StandardService        - Starting service [Tomcat]
25-10-18.13:54:22.025 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/10.1.36]
25-10-18.13:54:22.122 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
25-10-18.13:54:22.122 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1697 ms
25-10-18.13:54:22.551 [main            ] INFO  PgVectorStore          - Using the vector table name: vector_store_openai. Is empty: false
25-10-18.13:54:22.556 [main            ] INFO  PgVectorStore          - Initializing PGVectorStore schema for table: vector_store_openai in schema: public
25-10-18.13:54:22.556 [main            ] INFO  PgVectorStore          - vectorTableValidationsEnabled false
25-10-18.13:54:23.048 [main            ] INFO  TaskJobAutoConfigBean  - xfg-wrench，任务调度器初始化完成。线程池大小: 5, 线程名前缀: test-task-scheduler-
25-10-18.13:54:23.052 [main            ] INFO  TaskJobService         - 开始初始化任务调度配置
25-10-18.13:54:23.066 [main            ] INFO  HikariDataSource       - MainHikariPool - Starting...
25-10-18.13:54:23.878 [main            ] INFO  HikariPool             - MainHikariPool - Added connection com.mysql.cj.jdbc.ConnectionImpl@17768d5d
25-10-18.13:54:23.881 [main            ] INFO  HikariDataSource       - MainHikariPool - Start completed.
25-10-18.13:54:29.336 [main            ] INFO  TaskJobService         - 任务调度配置初始化完成，已加载任务数: 0
25-10-18.13:54:29.337 [main            ] INFO  TaskJobAutoConfigBean  - xfg-wrench，任务调度作业初始化完成。刷新间隔: 30000ms, 清理cron: 0 0/5 * * * ?
25-10-18.13:54:29.415 [main            ] INFO  OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
25-10-18.13:54:29.845 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8099"]
25-10-18.13:54:29.852 [main            ] INFO  TomcatWebServer        - Tomcat started on port 8099 (http) with context path '/'
25-10-18.13:54:29.860 [main            ] INFO  Application            - Started Application in 10.048 seconds (process running for 10.848)
25-10-18.13:54:29.862 [test-task-scheduler-1] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.13:54:29.862 [main            ] INFO  AiAgentAutoConfiguration - AI Agent 自动装配开始，配置: AiAgentAutoConfigProperties(enabled=true, clientIds=[6101])
25-10-18.13:54:30.030 [test-task-scheduler-1] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.13:54:30.066 [pool-2-thread-1 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_api) [48376249]
25-10-18.13:54:30.066 [pool-2-thread-2 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_model) [48376249]
25-10-18.13:54:30.066 [pool-2-thread-3 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_prompt) [48376249]
25-10-18.13:54:30.066 [pool-2-thread-4 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_advisor) [48376249]
25-10-18.13:54:30.067 [pool-2-thread-5 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_tool_mcp) [48376249]
25-10-18.13:54:30.067 [pool-2-thread-6 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client) [48376249]
25-10-18.13:54:51.829 [pool-2-thread-5 ] INFO  AgentRepository        - 查询modelId对应的mcpId列表 [5006]
25-10-18.13:54:51.926 [pool-2-thread-2 ] INFO  AgentRepository        - AiClientModelNode: 获取模型信息成功: 1000
25-10-18.13:54:51.967 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_api_1001
25-10-18.13:54:52.408 [HttpClient-11-Worker-0] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[completions=null, experimental={}, logging=null, prompts=PromptCapabilities[listChanged=false], resources=ResourceCapabilities[subscribe=false, listChanged=false], tools=ToolCapabilities[listChanged=false]], Info: Implementation[name=AIsearch, version=1.4.1] and Instructions null
25-10-18.13:54:52.525 [main            ] INFO  AiClientToolMcpNode    - SSE MCP Initialized: InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[completions=null, experimental={}, logging=null, prompts=PromptCapabilities[listChanged=false], resources=ResourceCapabilities[subscribe=false, listChanged=false], tools=ToolCapabilities[listChanged=false]], serverInfo=Implementation[name=AIsearch, version=1.4.1], instructions=null]
25-10-18.13:54:52.527 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5006
25-10-18.13:54:52.527 [main            ] INFO  AiClientModelNode      - 开始初始化 ai client model
25-10-18.13:54:52.631 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_1000
25-10-18.13:54:55.795 [main            ] WARN  AiClientAdvisorNode    - 没有需要被初始化的顾问角色
25-10-18.13:54:55.805 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_48376249
25-10-18.13:54:55.863 [pool-2-thread-7 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_api) [6101]
25-10-18.13:54:55.863 [pool-2-thread-9 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_prompt) [6101]
25-10-18.13:54:55.863 [pool-2-thread-8 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_model) [6101]
25-10-18.13:54:55.863 [pool-2-thread-11] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_tool_mcp) [6101]
25-10-18.13:54:55.863 [pool-2-thread-12] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client) [6101]
25-10-18.13:54:55.864 [pool-2-thread-10] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_advisor) [6101]
25-10-18.13:55:12.111 [test-task-scheduler-1] INFO  TaskJobService         - 开始清理无效的任务
25-10-18.13:55:12.111 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.13:55:12.113 [pool-2-thread-11] INFO  AgentRepository        - 查询modelId对应的mcpId列表 [5001, 5002, 5004]
25-10-18.13:55:12.113 [pool-2-thread-8 ] INFO  AgentRepository        - AiClientModelNode: 获取模型信息成功: 6001
25-10-18.13:55:13.768 [test-task-scheduler-1] INFO  TaskJobService         - 发现1个无效任务需要清理
25-10-18.13:55:13.768 [test-task-scheduler-1] INFO  TaskJobService         - 无效任务清理完成，当前活跃任务数: 0
25-10-18.13:55:20.538 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.13:55:30.060 [test-task-scheduler-3] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.13:55:32.389 [test-task-scheduler-3] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.13:56:00.321 [test-task-scheduler-3] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.13:56:00.538 [test-task-scheduler-3] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.13:56:26.214 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_api_1001
25-10-18.13:56:26.231 [SpringApplicationShutdownHook] INFO  GracefulShutdown       - Commencing graceful shutdown. Waiting for active requests to complete
25-10-18.13:56:26.483 [tomcat-shutdown ] INFO  GracefulShutdown       - Graceful shutdown complete
25-10-18.13:56:26.486 [SpringApplicationShutdownHook] INFO  TaskJobService         - 开始停止所有任务
25-10-18.13:56:26.487 [SpringApplicationShutdownHook] INFO  TaskJobService         - 所有任务已停止
25-10-18.13:56:26.488 [SpringApplicationShutdownHook] INFO  HikariDataSource       - MainHikariPool - Shutdown initiated...
25-10-18.13:56:26.502 [HttpClient-14-Worker-1] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[completions=null, experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-csdn, version=1.0.0] and Instructions null
25-10-18.13:56:26.556 [main            ] INFO  AiClientToolMcpNode    - SSE MCP Initialized: InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[completions=null, experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-csdn, version=1.0.0], instructions=null]
25-10-18.13:56:26.556 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5001
25-10-18.13:56:26.962 [HttpClient-15-Worker-2] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[completions=null, experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-weixin, version=1.0.0] and Instructions null
25-10-18.13:56:27.019 [main            ] INFO  AiClientToolMcpNode    - SSE MCP Initialized: InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[completions=null, experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-weixin, version=1.0.0], instructions=null]
25-10-18.13:56:27.019 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5002
25-10-18.13:56:27.060 [SpringApplicationShutdownHook] INFO  HikariDataSource       - MainHikariPool - Shutdown completed.
25-10-18.13:56:30.164 [main            ] INFO  Application            - Starting Application using Java 17.0.14 with PID 29788 (D:\java\ideapublic\ywz-ai-agent-station-study\ywz-ai-agent-station-study-app\target\classes started by ywz in D:\java\ideapublic\ywz-ai-agent-station-study)
25-10-18.13:56:30.166 [main            ] INFO  Application            - The following 1 profile is active: "dev"
25-10-18.13:56:31.714 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port 8099 (http)
25-10-18.13:56:31.728 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8099"]
25-10-18.13:56:31.730 [main            ] INFO  StandardService        - Starting service [Tomcat]
25-10-18.13:56:31.730 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/10.1.36]
25-10-18.13:56:31.821 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
25-10-18.13:56:31.822 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1621 ms
25-10-18.13:56:32.224 [main            ] INFO  PgVectorStore          - Using the vector table name: vector_store_openai. Is empty: false
25-10-18.13:56:32.229 [main            ] INFO  PgVectorStore          - Initializing PGVectorStore schema for table: vector_store_openai in schema: public
25-10-18.13:56:32.229 [main            ] INFO  PgVectorStore          - vectorTableValidationsEnabled false
25-10-18.13:56:32.701 [main            ] INFO  TaskJobAutoConfigBean  - xfg-wrench，任务调度器初始化完成。线程池大小: 5, 线程名前缀: test-task-scheduler-
25-10-18.13:56:32.705 [main            ] INFO  TaskJobService         - 开始初始化任务调度配置
25-10-18.13:56:32.719 [main            ] INFO  HikariDataSource       - MainHikariPool - Starting...
25-10-18.13:56:33.721 [main            ] INFO  HikariPool             - MainHikariPool - Added connection com.mysql.cj.jdbc.ConnectionImpl@53903a78
25-10-18.13:56:33.723 [main            ] INFO  HikariDataSource       - MainHikariPool - Start completed.
25-10-18.13:56:33.831 [main            ] INFO  TaskJobService         - 任务调度配置初始化完成，已加载任务数: 0
25-10-18.13:56:33.833 [main            ] INFO  TaskJobAutoConfigBean  - xfg-wrench，任务调度作业初始化完成。刷新间隔: 30000ms, 清理cron: 0 0/5 * * * ?
25-10-18.13:56:33.910 [main            ] INFO  OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
25-10-18.13:56:34.381 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8099"]
25-10-18.13:56:34.389 [main            ] INFO  TomcatWebServer        - Tomcat started on port 8099 (http) with context path '/'
25-10-18.13:56:34.399 [main            ] INFO  Application            - Started Application in 4.722 seconds (process running for 5.535)
25-10-18.13:56:34.400 [test-task-scheduler-1] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.13:56:34.401 [main            ] INFO  AiAgentAutoConfiguration - AI Agent 自动装配开始，配置: AiAgentAutoConfigProperties(enabled=true, clientIds=[6101])
25-10-18.13:56:34.611 [test-task-scheduler-1] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.13:56:34.846 [pool-2-thread-1 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_api) [48376249]
25-10-18.13:56:34.847 [pool-2-thread-2 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_model) [48376249]
25-10-18.13:56:34.847 [pool-2-thread-3 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_prompt) [48376249]
25-10-18.13:56:34.847 [pool-2-thread-4 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_advisor) [48376249]
25-10-18.13:56:34.848 [pool-2-thread-5 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_tool_mcp) [48376249]
25-10-18.13:56:34.848 [pool-2-thread-6 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client) [48376249]
25-10-18.13:56:39.245 [pool-2-thread-2 ] INFO  AgentRepository        - AiClientModelNode: 获取模型信息成功: 1000
25-10-18.13:56:39.347 [pool-2-thread-5 ] INFO  AgentRepository        - 查询modelId对应的mcpId列表 [5006]
25-10-18.13:56:39.470 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_api_1001
25-10-18.13:56:39.965 [HttpClient-11-Worker-1] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[completions=null, experimental={}, logging=null, prompts=PromptCapabilities[listChanged=false], resources=ResourceCapabilities[subscribe=false, listChanged=false], tools=ToolCapabilities[listChanged=false]], Info: Implementation[name=AIsearch, version=1.4.1] and Instructions null
25-10-18.13:56:40.073 [main            ] INFO  AiClientToolMcpNode    - SSE MCP Initialized: InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[completions=null, experimental={}, logging=null, prompts=PromptCapabilities[listChanged=false], resources=ResourceCapabilities[subscribe=false, listChanged=false], tools=ToolCapabilities[listChanged=false]], serverInfo=Implementation[name=AIsearch, version=1.4.1], instructions=null]
25-10-18.13:56:40.075 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5006
25-10-18.13:56:40.075 [main            ] INFO  AiClientModelNode      - 开始初始化 ai client model
25-10-18.13:56:40.185 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_1000
25-10-18.13:56:41.095 [main            ] WARN  AiClientAdvisorNode    - 没有需要被初始化的顾问角色
25-10-18.13:56:41.105 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_48376249
25-10-18.13:56:41.224 [pool-2-thread-7 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_api) [6101]
25-10-18.13:56:41.224 [pool-2-thread-8 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_model) [6101]
25-10-18.13:56:41.224 [pool-2-thread-9 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_prompt) [6101]
25-10-18.13:56:41.224 [pool-2-thread-10] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_advisor) [6101]
25-10-18.13:56:41.224 [pool-2-thread-11] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_tool_mcp) [6101]
25-10-18.13:56:41.224 [pool-2-thread-12] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client) [6101]
25-10-18.13:56:44.985 [pool-2-thread-8 ] INFO  AgentRepository        - AiClientModelNode: 获取模型信息成功: 6001
25-10-18.13:56:44.985 [pool-2-thread-11] INFO  AgentRepository        - 查询modelId对应的mcpId列表 [5001, 5002, 5004]
25-10-18.13:56:45.394 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_api_1001
25-10-18.13:56:45.779 [HttpClient-14-Worker-2] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[completions=null, experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-csdn, version=1.0.0] and Instructions null
25-10-18.13:56:45.837 [main            ] INFO  AiClientToolMcpNode    - SSE MCP Initialized: InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[completions=null, experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-csdn, version=1.0.0], instructions=null]
25-10-18.13:56:45.837 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5001
25-10-18.13:56:46.119 [HttpClient-15-Worker-0] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[completions=null, experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-weixin, version=1.0.0] and Instructions null
25-10-18.13:56:46.182 [main            ] INFO  AiClientToolMcpNode    - SSE MCP Initialized: InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[completions=null, experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-weixin, version=1.0.0], instructions=null]
25-10-18.13:56:46.182 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5002
25-10-18.13:56:48.065 [pool-4-thread-1 ] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[completions=null, experimental=null, logging=null, prompts=null, resources=null, tools=ToolCapabilities[listChanged=null]], Info: Implementation[name=g-search-mcp, version=0.1.0] and Instructions null
25-10-18.13:56:48.066 [main            ] INFO  AiClientToolMcpNode    - Stdio Mcp Initialized: InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[completions=null, experimental=null, logging=null, prompts=null, resources=null, tools=ToolCapabilities[listChanged=null]], serverInfo=Implementation[name=g-search-mcp, version=0.1.0], instructions=null]
25-10-18.13:56:48.066 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5004
25-10-18.13:56:48.066 [main            ] INFO  AiClientModelNode      - 开始初始化 ai client model
25-10-18.13:56:48.146 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_6001
25-10-18.13:57:03.821 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_advisor_4001
25-10-18.13:57:03.823 [main            ] ERROR AiAgentAutoConfiguration - AI Agent 自动装配失败
java.lang.RuntimeException: 装配智能体失败
	at com.ywzai.domain.agent.service.armory.ArmoryService.acceptArmoryAgent(ArmoryService.java:64)
	at com.ywzai.domain.agent.service.armory.ArmoryService.acceptArmoryAllAvailableAgents(ArmoryService.java:38)
	at com.ywzai.config.AiAgentAutoConfiguration.onApplicationEvent(AiAgentAutoConfiguration.java:50)
	at com.ywzai.config.AiAgentAutoConfiguration.onApplicationEvent(AiAgentAutoConfiguration.java:24)
	at com.ywzai.config.AiAgentAutoConfiguration$$SpringCGLIB$$0.onApplicationEvent(<generated>)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.boot.context.event.EventPublishingRunListener.ready(EventPublishingRunListener.java:109)
	at org.springframework.boot.SpringApplicationRunListeners.lambda$ready$6(SpringApplicationRunListeners.java:80)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.boot.SpringApplicationRunListeners.doWithListeners(SpringApplicationRunListeners.java:118)
	at org.springframework.boot.SpringApplicationRunListeners.doWithListeners(SpringApplicationRunListeners.java:112)
	at org.springframework.boot.SpringApplicationRunListeners.ready(SpringApplicationRunListeners.java:80)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:332)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.ywzai.Application.main(Application.java:17)
Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'ai_client_advisor_4004' available
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeanDefinition(DefaultListableBeanFactory.java:951)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getMergedLocalBeanDefinition(AbstractBeanFactory.java:1382)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:302)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1272)
	at com.ywzai.domain.agent.service.armory.node.AbstractArmorySupport.getBean(AbstractArmorySupport.java:47)
	at com.ywzai.domain.agent.service.armory.node.AiClientNode.doApply(AiClientNode.java:70)
	at com.ywzai.domain.agent.service.armory.node.AiClientNode.doApply(AiClientNode.java:27)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.apply(AbstractMultiThreadStrategyRouter.java:31)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.router(AbstractMultiThreadStrategyRouter.java:22)
	at com.ywzai.domain.agent.service.armory.node.AiClientAdvisorNode.doApply(AiClientAdvisorNode.java:43)
	at com.ywzai.domain.agent.service.armory.node.AiClientAdvisorNode.doApply(AiClientAdvisorNode.java:23)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.apply(AbstractMultiThreadStrategyRouter.java:31)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.router(AbstractMultiThreadStrategyRouter.java:22)
	at com.ywzai.domain.agent.service.armory.node.AiClientModelNode.doApply(AiClientModelNode.java:66)
	at com.ywzai.domain.agent.service.armory.node.AiClientModelNode.doApply(AiClientModelNode.java:26)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.apply(AbstractMultiThreadStrategyRouter.java:31)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.router(AbstractMultiThreadStrategyRouter.java:22)
	at com.ywzai.domain.agent.service.armory.node.AiClientToolMcpNode.doApply(AiClientToolMcpNode.java:47)
	at com.ywzai.domain.agent.service.armory.node.AiClientToolMcpNode.doApply(AiClientToolMcpNode.java:28)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.apply(AbstractMultiThreadStrategyRouter.java:31)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.router(AbstractMultiThreadStrategyRouter.java:22)
	at com.ywzai.domain.agent.service.armory.node.AiClientApiNode.doApply(AiClientApiNode.java:43)
	at com.ywzai.domain.agent.service.armory.node.AiClientApiNode.doApply(AiClientApiNode.java:21)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.apply(AbstractMultiThreadStrategyRouter.java:31)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.router(AbstractMultiThreadStrategyRouter.java:22)
	at com.ywzai.domain.agent.service.armory.node.RootNode.doApply(RootNode.java:37)
	at com.ywzai.domain.agent.service.armory.node.RootNode.doApply(RootNode.java:20)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.apply(AbstractMultiThreadStrategyRouter.java:31)
	at com.ywzai.domain.agent.service.armory.ArmoryService.acceptArmoryAgent(ArmoryService.java:57)
	... 19 common frames omitted
25-10-18.13:57:04.411 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.13:57:04.639 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.13:57:07.174 [SpringApplicationShutdownHook] INFO  GracefulShutdown       - Commencing graceful shutdown. Waiting for active requests to complete
25-10-18.13:57:07.420 [tomcat-shutdown ] INFO  GracefulShutdown       - Graceful shutdown complete
25-10-18.13:57:07.426 [SpringApplicationShutdownHook] INFO  TaskJobService         - 开始停止所有任务
25-10-18.13:57:07.426 [SpringApplicationShutdownHook] INFO  TaskJobService         - 所有任务已停止
25-10-18.13:57:07.428 [SpringApplicationShutdownHook] INFO  HikariDataSource       - MainHikariPool - Shutdown initiated...
25-10-18.13:57:07.541 [ForkJoinPool.commonPool-worker-1] WARN  StdioClientTransport   - Process terminated with code 1
25-10-18.13:57:08.736 [SpringApplicationShutdownHook] INFO  HikariDataSource       - MainHikariPool - Shutdown completed.
25-10-18.13:57:11.410 [main            ] INFO  Application            - Starting Application using Java 17.0.14 with PID 32060 (D:\java\ideapublic\ywz-ai-agent-station-study\ywz-ai-agent-station-study-app\target\classes started by ywz in D:\java\ideapublic\ywz-ai-agent-station-study)
25-10-18.13:57:11.411 [main            ] INFO  Application            - The following 1 profile is active: "dev"
25-10-18.13:57:12.951 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port 8099 (http)
25-10-18.13:57:12.966 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8099"]
25-10-18.13:57:12.968 [main            ] INFO  StandardService        - Starting service [Tomcat]
25-10-18.13:57:12.968 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/10.1.36]
25-10-18.13:57:13.061 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
25-10-18.13:57:13.061 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1616 ms
25-10-18.13:57:13.468 [main            ] INFO  PgVectorStore          - Using the vector table name: vector_store_openai. Is empty: false
25-10-18.13:57:13.482 [main            ] INFO  PgVectorStore          - Initializing PGVectorStore schema for table: vector_store_openai in schema: public
25-10-18.13:57:13.482 [main            ] INFO  PgVectorStore          - vectorTableValidationsEnabled false
25-10-18.13:57:13.971 [main            ] INFO  TaskJobAutoConfigBean  - xfg-wrench，任务调度器初始化完成。线程池大小: 5, 线程名前缀: test-task-scheduler-
25-10-18.13:57:13.976 [main            ] INFO  TaskJobService         - 开始初始化任务调度配置
25-10-18.13:57:13.990 [main            ] INFO  HikariDataSource       - MainHikariPool - Starting...
25-10-18.13:57:15.084 [main            ] INFO  HikariPool             - MainHikariPool - Added connection com.mysql.cj.jdbc.ConnectionImpl@5414039e
25-10-18.13:57:15.086 [main            ] INFO  HikariDataSource       - MainHikariPool - Start completed.
25-10-18.13:57:15.175 [main            ] INFO  TaskJobService         - 任务调度配置初始化完成，已加载任务数: 0
25-10-18.13:57:15.176 [main            ] INFO  TaskJobAutoConfigBean  - xfg-wrench，任务调度作业初始化完成。刷新间隔: 30000ms, 清理cron: 0 0/5 * * * ?
25-10-18.13:57:15.254 [main            ] INFO  OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
25-10-18.13:57:15.709 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8099"]
25-10-18.13:57:15.718 [main            ] INFO  TomcatWebServer        - Tomcat started on port 8099 (http) with context path '/'
25-10-18.13:57:15.727 [main            ] INFO  Application            - Started Application in 4.81 seconds (process running for 5.618)
25-10-18.13:57:15.728 [test-task-scheduler-1] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.13:57:15.729 [main            ] INFO  AiAgentAutoConfiguration - AI Agent 自动装配开始，配置: AiAgentAutoConfigProperties(enabled=true, clientIds=[6101])
25-10-18.13:57:15.904 [test-task-scheduler-1] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.13:57:16.153 [pool-2-thread-1 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_api) [48376249]
25-10-18.13:57:16.153 [pool-2-thread-2 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_model) [48376249]
25-10-18.13:57:16.154 [pool-2-thread-3 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_prompt) [48376249]
25-10-18.13:57:16.154 [pool-2-thread-4 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_advisor) [48376249]
25-10-18.13:57:16.154 [pool-2-thread-5 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_tool_mcp) [48376249]
25-10-18.13:57:16.154 [pool-2-thread-6 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client) [48376249]
25-10-18.13:57:19.181 [pool-2-thread-2 ] INFO  AgentRepository        - AiClientModelNode: 获取模型信息成功: 1000
25-10-18.13:57:19.232 [pool-2-thread-5 ] INFO  AgentRepository        - 查询modelId对应的mcpId列表 [5006]
25-10-18.13:57:19.327 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_api_1001
25-10-18.13:57:19.825 [HttpClient-11-Worker-1] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[completions=null, experimental={}, logging=null, prompts=PromptCapabilities[listChanged=false], resources=ResourceCapabilities[subscribe=false, listChanged=false], tools=ToolCapabilities[listChanged=false]], Info: Implementation[name=AIsearch, version=1.4.1] and Instructions null
25-10-18.13:57:20.002 [main            ] INFO  AiClientToolMcpNode    - SSE MCP Initialized: InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[completions=null, experimental={}, logging=null, prompts=PromptCapabilities[listChanged=false], resources=ResourceCapabilities[subscribe=false, listChanged=false], tools=ToolCapabilities[listChanged=false]], serverInfo=Implementation[name=AIsearch, version=1.4.1], instructions=null]
25-10-18.13:57:20.007 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5006
25-10-18.13:57:20.007 [main            ] INFO  AiClientModelNode      - 开始初始化 ai client model
25-10-18.13:57:20.107 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_1000
25-10-18.13:57:21.178 [main            ] WARN  AiClientAdvisorNode    - 没有需要被初始化的顾问角色
25-10-18.13:57:21.187 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_48376249
25-10-18.13:57:21.254 [pool-2-thread-7 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_api) [6101]
25-10-18.13:57:21.254 [pool-2-thread-8 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_model) [6101]
25-10-18.13:57:21.254 [pool-2-thread-9 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_prompt) [6101]
25-10-18.13:57:21.254 [pool-2-thread-10] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_advisor) [6101]
25-10-18.13:57:21.254 [pool-2-thread-12] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client) [6101]
25-10-18.13:57:21.254 [pool-2-thread-11] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_tool_mcp) [6101]
25-10-18.13:57:28.088 [pool-2-thread-8 ] INFO  AgentRepository        - AiClientModelNode: 获取模型信息成功: 6001
25-10-18.13:57:28.983 [pool-2-thread-11] INFO  AgentRepository        - 查询modelId对应的mcpId列表 [5001, 5002, 5004]
25-10-18.13:58:04.534 [MainHikariPool housekeeper] WARN  HikariPool             - MainHikariPool - Thread starvation or clock leap detected (housekeeper delta=49s343ms668µs999ns).
25-10-18.13:58:04.534 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.13:58:09.354 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.13:58:22.829 [test-task-scheduler-3] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.13:58:24.529 [test-task-scheduler-3] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.13:58:24.543 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_api_1001
25-10-18.13:58:25.002 [HttpClient-14-Worker-2] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[completions=null, experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-csdn, version=1.0.0] and Instructions null
25-10-18.13:58:25.046 [main            ] INFO  AiClientToolMcpNode    - SSE MCP Initialized: InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[completions=null, experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-csdn, version=1.0.0], instructions=null]
25-10-18.13:58:25.046 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5001
25-10-18.13:58:25.332 [HttpClient-15-Worker-0] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[completions=null, experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-weixin, version=1.0.0] and Instructions null
25-10-18.13:58:25.374 [main            ] INFO  AiClientToolMcpNode    - SSE MCP Initialized: InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[completions=null, experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-weixin, version=1.0.0], instructions=null]
25-10-18.13:58:25.374 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5002
25-10-18.13:58:27.259 [pool-4-thread-1 ] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[completions=null, experimental=null, logging=null, prompts=null, resources=null, tools=ToolCapabilities[listChanged=null]], Info: Implementation[name=g-search-mcp, version=0.1.0] and Instructions null
25-10-18.13:58:27.259 [main            ] INFO  AiClientToolMcpNode    - Stdio Mcp Initialized: InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[completions=null, experimental=null, logging=null, prompts=null, resources=null, tools=ToolCapabilities[listChanged=null]], serverInfo=Implementation[name=g-search-mcp, version=0.1.0], instructions=null]
25-10-18.13:58:27.260 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5004
25-10-18.13:58:27.260 [main            ] INFO  AiClientModelNode      - 开始初始化 ai client model
25-10-18.13:58:27.438 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_6001
25-10-18.13:58:28.559 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_advisor_4001
25-10-18.13:58:28.647 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_advisor_4004
25-10-18.13:58:28.649 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_6101
25-10-18.13:58:28.652 [main            ] INFO  AiAgentAutoConfiguration - AI Agent 自动装配完成 [{"agentId":"20099179","agentName":"111-测试model","channel":"agent","description":"111","status":1},{"agentId":"85374287","agentName":"测试Agent","channel":"agent","description":"测试Agent","status":1},{"agentId":"68240838","agentName":"testCsdn","channel":"agent","description":"测试Csdn自动发帖","status":1}]
25-10-18.13:58:45.741 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.13:58:47.701 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.13:58:56.923 [http-nio-8099-exec-1] INFO  [/]                    - Initializing Spring DispatcherServlet 'dispatcherServlet'
25-10-18.13:58:56.923 [http-nio-8099-exec-1] INFO  DispatcherServlet      - Initializing Servlet 'dispatcherServlet'
25-10-18.13:58:56.924 [http-nio-8099-exec-1] INFO  DispatcherServlet      - Completed initialization in 1 ms
25-10-18.13:58:56.965 [http-nio-8099-exec-3] INFO  AiAgentController      - 查询可用智能体列表请求开始
25-10-18.13:58:57.376 [http-nio-8099-exec-3] INFO  AiAgentController      - 查询可用智能体列表成功，共3个智能体
25-10-18.13:59:15.731 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.13:59:15.915 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.13:59:16.027 [http-nio-8099-exec-5] INFO  AiAgentDrawAdminController - 获取流程图配置请求，configId: 7ba2712599024a07939427f362a0dbef
25-10-18.13:59:16.237 [http-nio-8099-exec-4] INFO  AiClientAdminController - 查询所有AI客户端配置
25-10-18.13:59:16.239 [http-nio-8099-exec-2] INFO  AiClientModelAdminController - 查询所有启用的AI客户端模型配置请求
25-10-18.13:59:16.240 [http-nio-8099-exec-6] INFO  AiClientSystemPromptAdminController - 查询所有系统提示词配置
25-10-18.13:59:16.242 [http-nio-8099-exec-7] INFO  AiClientAdvisorAdminController - 查询所有顾问配置
25-10-18.13:59:45.729 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.13:59:46.296 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.13:59:50.532 [http-nio-8099-exec-9] INFO  AiAgentController      - AutoAgent流式执行请求开始，请求信息：{"aiAgentId":"68240838","maxStep":2,"message":"请在csdn发帖并回调通知微信公众号","sessionId":"session_1760767190488_ng01lp48v"}
25-10-18.13:59:51.767 [pool-2-thread-13] INFO  HikariDataSource       - PgVectorHikariPool - Starting...
25-10-18.13:59:52.880 [pool-2-thread-13] INFO  HikariPool             - PgVectorHikariPool - Added connection org.postgresql.jdbc.PgConnection@5cda8f05
25-10-18.13:59:52.881 [pool-2-thread-13] INFO  HikariDataSource       - PgVectorHikariPool - Start completed.
25-10-18.13:59:56.955 [pool-4-thread-1 ] ERROR McpClientSession       - Error handling request: JSONRPCError[code=-32603, message=browserType.launch: Executable doesn't exist at C:\Users\ywz\AppData\Local\ms-playwright\chromium_headless_shell-1194\chrome-win\headless_shell.exe
╔═════════════════════════════════════════════════════════════════════════╗
║ Looks like Playwright Test or Playwright was just installed or updated. ║
║ Please run the following command to download new browsers:              ║
║                                                                         ║
║     npx playwright install                                              ║
║                                                                         ║
║ <3 Playwright Team                                                      ║
╚═════════════════════════════════════════════════════════════════════════╝, data=null]
25-10-18.13:59:56.973 [pool-2-thread-13] ERROR AgentDispatchService   - 执行异常：browserType.launch: Executable doesn't exist at C:\Users\ywz\AppData\Local\ms-playwright\chromium_headless_shell-1194\chrome-win\headless_shell.exe
╔═════════════════════════════════════════════════════════════════════════╗
║ Looks like Playwright Test or Playwright was just installed or updated. ║
║ Please run the following command to download new browsers:              ║
║                                                                         ║
║     npx playwright install                                              ║
║                                                                         ║
║ <3 Playwright Team                                                      ║
╚═════════════════════════════════════════════════════════════════════════╝
io.modelcontextprotocol.spec.McpError: browserType.launch: Executable doesn't exist at C:\Users\ywz\AppData\Local\ms-playwright\chromium_headless_shell-1194\chrome-win\headless_shell.exe
╔═════════════════════════════════════════════════════════════════════════╗
║ Looks like Playwright Test or Playwright was just installed or updated. ║
║ Please run the following command to download new browsers:              ║
║                                                                         ║
║     npx playwright install                                              ║
║                                                                         ║
║ <3 Playwright Team                                                      ║
╚═════════════════════════════════════════════════════════════════════════╝
	at io.modelcontextprotocol.spec.McpClientSession.lambda$sendRequest$11(McpClientSession.java:248)
	Suppressed: reactor.core.publisher.FluxOnAssembly$OnAssemblyException: 
Assembly trace from producer [reactor.core.publisher.MonoHandleFuseable] :
	reactor.core.publisher.Mono.handle(Mono.java:3295)
	io.modelcontextprotocol.spec.McpClientSession.sendRequest(McpClientSession.java:245)
Error has been observed at the following site(s):
	*___Mono.handle ⇢ at io.modelcontextprotocol.spec.McpClientSession.sendRequest(McpClientSession.java:245)
	*__Mono.flatMap ⇢ at io.modelcontextprotocol.client.McpAsyncClient.withInitializationCheck(McpAsyncClient.java:379)
Original Stack Trace:
		at io.modelcontextprotocol.spec.McpClientSession.lambda$sendRequest$11(McpClientSession.java:248)
		at reactor.core.publisher.FluxHandleFuseable$HandleFuseableSubscriber.onNext(FluxHandleFuseable.java:179)
		at reactor.core.publisher.SerializedSubscriber.onNext(SerializedSubscriber.java:99)
		at reactor.core.publisher.FluxTimeout$TimeoutMainSubscriber.onNext(FluxTimeout.java:181)
		at reactor.core.publisher.MonoCreate$DefaultMonoSink.success(MonoCreate.java:176)
		at io.modelcontextprotocol.spec.McpClientSession.handle(McpClientSession.java:136)
		at reactor.core.publisher.FluxPeekFuseable$PeekConditionalSubscriber.onNext(FluxPeekFuseable.java:840)
		at reactor.core.publisher.Operators$ScalarSubscription.request(Operators.java:2571)
		at reactor.core.publisher.FluxPeekFuseable$PeekConditionalSubscriber.request(FluxPeekFuseable.java:783)
		at reactor.core.publisher.FluxContextWrite$ContextWriteSubscriber.request(FluxContextWrite.java:136)
		at reactor.core.publisher.FluxFlatMap$FlatMapInner.onSubscribe(FluxFlatMap.java:968)
		at reactor.core.publisher.FluxContextWrite$ContextWriteSubscriber.onSubscribe(FluxContextWrite.java:101)
		at reactor.core.publisher.FluxPeekFuseable$PeekConditionalSubscriber.onSubscribe(FluxPeekFuseable.java:816)
		at reactor.core.publisher.MonoJust.subscribe(MonoJust.java:55)
		at reactor.core.publisher.Mono.subscribe(Mono.java:4576)
		at reactor.core.publisher.FluxFlatMap$FlatMapMain.onNext(FluxFlatMap.java:430)
		at reactor.core.publisher.SinkManyUnicast.drainRegular(SinkManyUnicast.java:284)
		at reactor.core.publisher.SinkManyUnicast.drain(SinkManyUnicast.java:365)
		at reactor.core.publisher.SinkManyUnicast.tryEmitNext(SinkManyUnicast.java:239)
		at reactor.core.publisher.SinkManySerialized.tryEmitNext(SinkManySerialized.java:100)
		at io.modelcontextprotocol.client.transport.StdioClientTransport.lambda$startInboundProcessing$6(StdioClientTransport.java:261)
		at reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:68)
		at reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:28)
		at java.base/java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:264)
		at java.base/java.util.concurrent.FutureTask.run(FutureTask.java)
		at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
		at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
		at java.base/java.lang.Thread.run(Thread.java:842)
	Suppressed: java.lang.Exception: #block terminated with an error
		at reactor.core.publisher.BlockingSingleSubscriber.blockingGet(BlockingSingleSubscriber.java:104)
		at reactor.core.publisher.Mono.block(Mono.java:1779)
		at io.modelcontextprotocol.client.McpSyncClient.callTool(McpSyncClient.java:218)
		at org.springframework.ai.mcp.SyncMcpToolCallback.call(SyncMcpToolCallback.java:116)
		at org.springframework.ai.mcp.SyncMcpToolCallback.call(SyncMcpToolCallback.java:126)
		at org.springframework.ai.model.tool.DefaultToolCallingManager.lambda$executeToolCall$5(DefaultToolCallingManager.java:224)
		at io.micrometer.observation.Observation.observe(Observation.java:564)
		at org.springframework.ai.model.tool.DefaultToolCallingManager.executeToolCall(DefaultToolCallingManager.java:221)
		at org.springframework.ai.model.tool.DefaultToolCallingManager.executeToolCalls(DefaultToolCallingManager.java:137)
		at org.springframework.ai.openai.OpenAiChatModel.internalCall(OpenAiChatModel.java:244)
		at org.springframework.ai.openai.OpenAiChatModel.call(OpenAiChatModel.java:181)
		at org.springframework.ai.chat.client.advisor.ChatModelCallAdvisor.adviseCall(ChatModelCallAdvisor.java:54)
		at org.springframework.ai.chat.client.advisor.DefaultAroundAdvisorChain.lambda$nextCall$1(DefaultAroundAdvisorChain.java:110)
		at io.micrometer.observation.Observation.observe(Observation.java:564)
		at org.springframework.ai.chat.client.advisor.DefaultAroundAdvisorChain.nextCall(DefaultAroundAdvisorChain.java:110)
		at com.ywzai.domain.agent.service.armory.node.factory.element.RagAnswerAdvisor.adviseCall(RagAnswerAdvisor.java:123)
		at org.springframework.ai.chat.client.advisor.DefaultAroundAdvisorChain.lambda$nextCall$1(DefaultAroundAdvisorChain.java:110)
		at io.micrometer.observation.Observation.observe(Observation.java:564)
		at org.springframework.ai.chat.client.advisor.DefaultAroundAdvisorChain.nextCall(DefaultAroundAdvisorChain.java:110)
		at org.springframework.ai.chat.client.advisor.api.BaseAdvisor.adviseCall(BaseAdvisor.java:52)
		at org.springframework.ai.chat.client.advisor.DefaultAroundAdvisorChain.lambda$nextCall$1(DefaultAroundAdvisorChain.java:110)
		at io.micrometer.observation.Observation.observe(Observation.java:564)
		at org.springframework.ai.chat.client.advisor.DefaultAroundAdvisorChain.nextCall(DefaultAroundAdvisorChain.java:110)
		at org.springframework.ai.chat.client.DefaultChatClient$DefaultCallResponseSpec.lambda$doGetObservableChatClientResponse$1(DefaultChatClient.java:469)
		at io.micrometer.observation.Observation.observe(Observation.java:564)
		at org.springframework.ai.chat.client.DefaultChatClient$DefaultCallResponseSpec.doGetObservableChatClientResponse(DefaultChatClient.java:467)
		at org.springframework.ai.chat.client.DefaultChatClient$DefaultCallResponseSpec.doGetObservableChatClientResponse(DefaultChatClient.java:446)
		at org.springframework.ai.chat.client.DefaultChatClient$DefaultCallResponseSpec.content(DefaultChatClient.java:441)
		at com.ywzai.domain.agent.service.execute.fixed.FixedAgentExecuteStrategy.execute(FixedAgentExecuteStrategy.java:62)
		at com.ywzai.domain.agent.service.dispatch.AgentDispatchService.lambda$dispatch$0(AgentDispatchService.java:53)
		at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
		at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
		at java.base/java.lang.Thread.run(Thread.java:842)
25-10-18.14:00:00.005 [test-task-scheduler-3] INFO  TaskJobService         - 开始清理无效的任务
25-10-18.14:00:00.071 [test-task-scheduler-3] INFO  TaskJobService         - 发现1个无效任务需要清理
25-10-18.14:00:00.072 [test-task-scheduler-3] INFO  TaskJobService         - 无效任务清理完成，当前活跃任务数: 0
25-10-18.14:00:15.733 [test-task-scheduler-4] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.14:00:15.853 [test-task-scheduler-4] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.14:00:37.840 [SpringApplicationShutdownHook] INFO  GracefulShutdown       - Commencing graceful shutdown. Waiting for active requests to complete
25-10-18.14:00:41.532 [main            ] INFO  Application            - Starting Application using Java 17.0.14 with PID 26988 (D:\java\ideapublic\ywz-ai-agent-station-study\ywz-ai-agent-station-study-app\target\classes started by ywz in D:\java\ideapublic\ywz-ai-agent-station-study)
25-10-18.14:00:41.533 [main            ] INFO  Application            - The following 1 profile is active: "dev"
25-10-18.14:00:43.027 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port 8099 (http)
25-10-18.14:00:43.039 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8099"]
25-10-18.14:00:43.040 [main            ] INFO  StandardService        - Starting service [Tomcat]
25-10-18.14:00:43.040 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/10.1.36]
25-10-18.14:00:43.138 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
25-10-18.14:00:43.138 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1568 ms
25-10-18.14:00:43.500 [main            ] INFO  PgVectorStore          - Using the vector table name: vector_store_openai. Is empty: false
25-10-18.14:00:43.505 [main            ] INFO  PgVectorStore          - Initializing PGVectorStore schema for table: vector_store_openai in schema: public
25-10-18.14:00:43.505 [main            ] INFO  PgVectorStore          - vectorTableValidationsEnabled false
25-10-18.14:00:43.969 [main            ] INFO  TaskJobAutoConfigBean  - xfg-wrench，任务调度器初始化完成。线程池大小: 5, 线程名前缀: test-task-scheduler-
25-10-18.14:00:43.974 [main            ] INFO  TaskJobService         - 开始初始化任务调度配置
25-10-18.14:00:43.987 [main            ] INFO  HikariDataSource       - MainHikariPool - Starting...
25-10-18.14:00:45.002 [main            ] INFO  HikariPool             - MainHikariPool - Added connection com.mysql.cj.jdbc.ConnectionImpl@5f404095
25-10-18.14:00:45.006 [main            ] INFO  HikariDataSource       - MainHikariPool - Start completed.
25-10-18.14:00:45.119 [main            ] INFO  TaskJobService         - 任务调度配置初始化完成，已加载任务数: 0
25-10-18.14:00:45.120 [main            ] INFO  TaskJobAutoConfigBean  - xfg-wrench，任务调度作业初始化完成。刷新间隔: 30000ms, 清理cron: 0 0/5 * * * ?
25-10-18.14:00:45.192 [main            ] INFO  OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
25-10-18.14:00:45.626 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8099"]
25-10-18.14:00:45.634 [main            ] INFO  TomcatWebServer        - Tomcat started on port 8099 (http) with context path '/'
25-10-18.14:00:45.642 [main            ] INFO  Application            - Started Application in 4.598 seconds (process running for 5.431)
25-10-18.14:00:45.643 [test-task-scheduler-1] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.14:00:45.644 [main            ] INFO  AiAgentAutoConfiguration - AI Agent 自动装配开始，配置: AiAgentAutoConfigProperties(enabled=true, clientIds=[6101])
25-10-18.14:00:45.762 [test-task-scheduler-1] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.14:00:50.647 [pool-2-thread-1 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_api) [48376249]
25-10-18.14:00:50.647 [pool-2-thread-2 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_model) [48376249]
25-10-18.14:00:50.647 [pool-2-thread-3 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_prompt) [48376249]
25-10-18.14:00:50.647 [pool-2-thread-4 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_advisor) [48376249]
25-10-18.14:00:50.647 [pool-2-thread-5 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_tool_mcp) [48376249]
25-10-18.14:00:50.647 [pool-2-thread-6 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client) [48376249]
25-10-18.14:00:51.247 [pool-2-thread-2 ] INFO  AgentRepository        - AiClientModelNode: 获取模型信息成功: 1000
25-10-18.14:00:51.247 [pool-2-thread-5 ] INFO  AgentRepository        - 查询modelId对应的mcpId列表 [5006]
25-10-18.14:00:51.318 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_api_1001
25-10-18.14:00:51.788 [HttpClient-11-Worker-1] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[completions=null, experimental={}, logging=null, prompts=PromptCapabilities[listChanged=false], resources=ResourceCapabilities[subscribe=false, listChanged=false], tools=ToolCapabilities[listChanged=false]], Info: Implementation[name=AIsearch, version=1.4.1] and Instructions null
25-10-18.14:00:51.887 [main            ] INFO  AiClientToolMcpNode    - SSE MCP Initialized: InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[completions=null, experimental={}, logging=null, prompts=PromptCapabilities[listChanged=false], resources=ResourceCapabilities[subscribe=false, listChanged=false], tools=ToolCapabilities[listChanged=false]], serverInfo=Implementation[name=AIsearch, version=1.4.1], instructions=null]
25-10-18.14:00:51.889 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5006
25-10-18.14:00:51.889 [main            ] INFO  AiClientModelNode      - 开始初始化 ai client model
25-10-18.14:00:51.993 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_1000
25-10-18.14:00:51.993 [main            ] WARN  AiClientAdvisorNode    - 没有需要被初始化的顾问角色
25-10-18.14:00:52.000 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_48376249
25-10-18.14:00:52.092 [pool-2-thread-7 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_api) [6101]
25-10-18.14:00:52.093 [pool-2-thread-9 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_prompt) [6101]
25-10-18.14:00:52.093 [pool-2-thread-8 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_model) [6101]
25-10-18.14:00:52.093 [pool-2-thread-10] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_advisor) [6101]
25-10-18.14:00:52.093 [pool-2-thread-12] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client) [6101]
25-10-18.14:00:52.093 [pool-2-thread-11] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_tool_mcp) [6101]
25-10-18.14:00:52.246 [pool-2-thread-8 ] INFO  AgentRepository        - AiClientModelNode: 获取模型信息成功: 6001
25-10-18.14:00:52.254 [pool-2-thread-11] INFO  AgentRepository        - 查询modelId对应的mcpId列表 [5001, 5002, 5004]
25-10-18.14:00:52.368 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_api_1001
25-10-18.14:00:52.511 [HttpClient-14-Worker-1] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[completions=null, experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-csdn, version=1.0.0] and Instructions null
25-10-18.14:00:52.546 [main            ] INFO  AiClientToolMcpNode    - SSE MCP Initialized: InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[completions=null, experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-csdn, version=1.0.0], instructions=null]
25-10-18.14:00:52.546 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5001
25-10-18.14:00:52.686 [HttpClient-15-Worker-2] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[completions=null, experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-weixin, version=1.0.0] and Instructions null
25-10-18.14:00:52.718 [main            ] INFO  AiClientToolMcpNode    - SSE MCP Initialized: InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[completions=null, experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-weixin, version=1.0.0], instructions=null]
25-10-18.14:00:52.719 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5002
25-10-18.14:00:54.640 [pool-4-thread-1 ] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[completions=null, experimental=null, logging=null, prompts=null, resources=null, tools=ToolCapabilities[listChanged=null]], Info: Implementation[name=g-search-mcp, version=0.1.0] and Instructions null
25-10-18.14:00:54.640 [main            ] INFO  AiClientToolMcpNode    - Stdio Mcp Initialized: InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[completions=null, experimental=null, logging=null, prompts=null, resources=null, tools=ToolCapabilities[listChanged=null]], serverInfo=Implementation[name=g-search-mcp, version=0.1.0], instructions=null]
25-10-18.14:00:54.640 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5004
25-10-18.14:00:54.640 [main            ] INFO  AiClientModelNode      - 开始初始化 ai client model
25-10-18.14:00:54.726 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_6001
25-10-18.14:00:54.734 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_advisor_4001
25-10-18.14:00:54.809 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_advisor_4004
25-10-18.14:00:54.812 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_6101
25-10-18.14:00:54.820 [main            ] INFO  AiAgentAutoConfiguration - AI Agent 自动装配完成 [{"agentId":"20099179","agentName":"111-测试model","channel":"agent","description":"111","status":1},{"agentId":"85374287","agentName":"测试Agent","channel":"agent","description":"测试Agent","status":1},{"agentId":"68240838","agentName":"testCsdn","channel":"agent","description":"测试Csdn自动发帖","status":1}]
25-10-18.14:01:15.641 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.14:01:20.020 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.14:01:27.043 [http-nio-8099-exec-1] INFO  [/]                    - Initializing Spring DispatcherServlet 'dispatcherServlet'
25-10-18.14:01:27.043 [http-nio-8099-exec-1] INFO  DispatcherServlet      - Initializing Servlet 'dispatcherServlet'
25-10-18.14:01:27.044 [http-nio-8099-exec-1] INFO  DispatcherServlet      - Completed initialization in 1 ms
25-10-18.14:01:27.095 [http-nio-8099-exec-1] INFO  AiAgentController      - 查询可用智能体列表请求开始
25-10-18.14:01:27.225 [http-nio-8099-exec-1] INFO  AiAgentController      - 查询可用智能体列表成功，共3个智能体
25-10-18.14:01:45.652 [test-task-scheduler-3] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.14:01:45.825 [test-task-scheduler-3] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.14:02:15.642 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.14:02:17.250 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.14:02:24.518 [http-nio-8099-exec-2] INFO  AiAgentController      - AutoAgent流式执行请求开始，请求信息：{"aiAgentId":"68240838","maxStep":5,"message":"请在csdn发一个关于Java程序员面试的帖子,并发送成功后用微信公众号通知我","sessionId":"session_1760767344474_8xj6fnjcr"}
25-10-18.14:02:25.666 [pool-2-thread-13] INFO  HikariDataSource       - PgVectorHikariPool - Starting...
25-10-18.14:02:26.692 [pool-2-thread-13] INFO  HikariPool             - PgVectorHikariPool - Added connection org.postgresql.jdbc.PgConnection@132d6c4
25-10-18.14:02:26.692 [pool-2-thread-13] INFO  HikariDataSource       - PgVectorHikariPool - Start completed.
25-10-18.14:02:31.129 [pool-4-thread-1 ] ERROR McpClientSession       - Error handling request: JSONRPCError[code=-32603, message=browserType.launch: Executable doesn't exist at C:\Users\ywz\AppData\Local\ms-playwright\chromium_headless_shell-1194\chrome-win\headless_shell.exe
╔═════════════════════════════════════════════════════════════════════════╗
║ Looks like Playwright Test or Playwright was just installed or updated. ║
║ Please run the following command to download new browsers:              ║
║                                                                         ║
║     npx playwright install                                              ║
║                                                                         ║
║ <3 Playwright Team                                                      ║
╚═════════════════════════════════════════════════════════════════════════╝, data=null]
25-10-18.14:02:31.145 [pool-2-thread-13] ERROR AgentDispatchService   - 执行异常：browserType.launch: Executable doesn't exist at C:\Users\ywz\AppData\Local\ms-playwright\chromium_headless_shell-1194\chrome-win\headless_shell.exe
╔═════════════════════════════════════════════════════════════════════════╗
║ Looks like Playwright Test or Playwright was just installed or updated. ║
║ Please run the following command to download new browsers:              ║
║                                                                         ║
║     npx playwright install                                              ║
║                                                                         ║
║ <3 Playwright Team                                                      ║
╚═════════════════════════════════════════════════════════════════════════╝
io.modelcontextprotocol.spec.McpError: browserType.launch: Executable doesn't exist at C:\Users\ywz\AppData\Local\ms-playwright\chromium_headless_shell-1194\chrome-win\headless_shell.exe
╔═════════════════════════════════════════════════════════════════════════╗
║ Looks like Playwright Test or Playwright was just installed or updated. ║
║ Please run the following command to download new browsers:              ║
║                                                                         ║
║     npx playwright install                                              ║
║                                                                         ║
║ <3 Playwright Team                                                      ║
╚═════════════════════════════════════════════════════════════════════════╝
	at io.modelcontextprotocol.spec.McpClientSession.lambda$sendRequest$11(McpClientSession.java:248)
	at reactor.core.publisher.FluxHandle$HandleSubscriber.onNext(FluxHandle.java:113)
	at reactor.core.publisher.SerializedSubscriber.onNext(SerializedSubscriber.java:99)
	at reactor.core.publisher.FluxTimeout$TimeoutMainSubscriber.onNext(FluxTimeout.java:181)
	at reactor.core.publisher.MonoCreate$DefaultMonoSink.success(MonoCreate.java:176)
	at io.modelcontextprotocol.spec.McpClientSession.handle(McpClientSession.java:136)
	at reactor.core.publisher.FluxPeekFuseable$PeekFuseableConditionalSubscriber.onNext(FluxPeekFuseable.java:489)
	at reactor.core.publisher.Operators$ScalarSubscription.request(Operators.java:2571)
	at reactor.core.publisher.FluxPeekFuseable$PeekFuseableConditionalSubscriber.request(FluxPeekFuseable.java:437)
	at reactor.core.publisher.FluxContextWrite$ContextWriteSubscriber.request(FluxContextWrite.java:136)
	at reactor.core.publisher.FluxFlatMap$FlatMapInner.onSubscribe(FluxFlatMap.java:968)
	at reactor.core.publisher.FluxContextWrite$ContextWriteSubscriber.onSubscribe(FluxContextWrite.java:101)
	at reactor.core.publisher.FluxPeekFuseable$PeekFuseableConditionalSubscriber.onSubscribe(FluxPeekFuseable.java:471)
	at reactor.core.publisher.MonoJust.subscribe(MonoJust.java:55)
	at reactor.core.publisher.Mono.subscribe(Mono.java:4576)
	at reactor.core.publisher.FluxFlatMap$FlatMapMain.onNext(FluxFlatMap.java:430)
	at reactor.core.publisher.SinkManyUnicast.drainRegular(SinkManyUnicast.java:284)
	at reactor.core.publisher.SinkManyUnicast.drain(SinkManyUnicast.java:365)
	at reactor.core.publisher.SinkManyUnicast.tryEmitNext(SinkManyUnicast.java:239)
	at reactor.core.publisher.SinkManySerialized.tryEmitNext(SinkManySerialized.java:100)
	at io.modelcontextprotocol.client.transport.StdioClientTransport.lambda$startInboundProcessing$6(StdioClientTransport.java:261)
	at reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:68)
	at reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:28)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:842)
	Suppressed: java.lang.Exception: #block terminated with an error
		at reactor.core.publisher.BlockingSingleSubscriber.blockingGet(BlockingSingleSubscriber.java:104)
		at reactor.core.publisher.Mono.block(Mono.java:1779)
		at io.modelcontextprotocol.client.McpSyncClient.callTool(McpSyncClient.java:218)
		at org.springframework.ai.mcp.SyncMcpToolCallback.call(SyncMcpToolCallback.java:116)
		at org.springframework.ai.mcp.SyncMcpToolCallback.call(SyncMcpToolCallback.java:126)
		at org.springframework.ai.model.tool.DefaultToolCallingManager.lambda$executeToolCall$5(DefaultToolCallingManager.java:224)
		at io.micrometer.observation.Observation.observe(Observation.java:564)
		at org.springframework.ai.model.tool.DefaultToolCallingManager.executeToolCall(DefaultToolCallingManager.java:221)
		at org.springframework.ai.model.tool.DefaultToolCallingManager.executeToolCalls(DefaultToolCallingManager.java:137)
		at org.springframework.ai.openai.OpenAiChatModel.internalCall(OpenAiChatModel.java:244)
		at org.springframework.ai.openai.OpenAiChatModel.call(OpenAiChatModel.java:181)
		at org.springframework.ai.chat.client.advisor.ChatModelCallAdvisor.adviseCall(ChatModelCallAdvisor.java:54)
		at org.springframework.ai.chat.client.advisor.DefaultAroundAdvisorChain.lambda$nextCall$1(DefaultAroundAdvisorChain.java:110)
		at io.micrometer.observation.Observation.observe(Observation.java:564)
		at org.springframework.ai.chat.client.advisor.DefaultAroundAdvisorChain.nextCall(DefaultAroundAdvisorChain.java:110)
		at com.ywzai.domain.agent.service.armory.node.factory.element.RagAnswerAdvisor.adviseCall(RagAnswerAdvisor.java:123)
		at org.springframework.ai.chat.client.advisor.DefaultAroundAdvisorChain.lambda$nextCall$1(DefaultAroundAdvisorChain.java:110)
		at io.micrometer.observation.Observation.observe(Observation.java:564)
		at org.springframework.ai.chat.client.advisor.DefaultAroundAdvisorChain.nextCall(DefaultAroundAdvisorChain.java:110)
		at org.springframework.ai.chat.client.advisor.api.BaseAdvisor.adviseCall(BaseAdvisor.java:52)
		at org.springframework.ai.chat.client.advisor.DefaultAroundAdvisorChain.lambda$nextCall$1(DefaultAroundAdvisorChain.java:110)
		at io.micrometer.observation.Observation.observe(Observation.java:564)
		at org.springframework.ai.chat.client.advisor.DefaultAroundAdvisorChain.nextCall(DefaultAroundAdvisorChain.java:110)
		at org.springframework.ai.chat.client.DefaultChatClient$DefaultCallResponseSpec.lambda$doGetObservableChatClientResponse$1(DefaultChatClient.java:469)
		at io.micrometer.observation.Observation.observe(Observation.java:564)
		at org.springframework.ai.chat.client.DefaultChatClient$DefaultCallResponseSpec.doGetObservableChatClientResponse(DefaultChatClient.java:467)
		at org.springframework.ai.chat.client.DefaultChatClient$DefaultCallResponseSpec.doGetObservableChatClientResponse(DefaultChatClient.java:446)
		at org.springframework.ai.chat.client.DefaultChatClient$DefaultCallResponseSpec.content(DefaultChatClient.java:441)
		at com.ywzai.domain.agent.service.execute.fixed.FixedAgentExecuteStrategy.execute(FixedAgentExecuteStrategy.java:62)
		at com.ywzai.domain.agent.service.dispatch.AgentDispatchService.lambda$dispatch$0(AgentDispatchService.java:53)
		... 3 common frames omitted
25-10-18.14:02:45.648 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.14:02:45.830 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.14:03:15.644 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.14:03:15.779 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.14:03:45.655 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.14:03:48.426 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.14:04:15.654 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.14:04:15.777 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.14:04:45.654 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.14:04:47.479 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.14:05:00.007 [test-task-scheduler-4] INFO  TaskJobService         - 开始清理无效的任务
25-10-18.14:05:00.143 [test-task-scheduler-4] INFO  TaskJobService         - 发现1个无效任务需要清理
25-10-18.14:05:00.143 [test-task-scheduler-4] INFO  TaskJobService         - 无效任务清理完成，当前活跃任务数: 0
25-10-18.14:05:15.651 [test-task-scheduler-3] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.14:05:16.299 [test-task-scheduler-3] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.14:05:45.641 [test-task-scheduler-1] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.14:05:45.846 [test-task-scheduler-1] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.14:06:15.643 [test-task-scheduler-1] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.14:06:16.024 [test-task-scheduler-1] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.14:06:45.649 [test-task-scheduler-1] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.14:06:45.711 [test-task-scheduler-1] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.14:07:15.644 [test-task-scheduler-1] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.14:07:15.779 [test-task-scheduler-1] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.14:07:45.651 [test-task-scheduler-1] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.14:07:45.857 [test-task-scheduler-1] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.14:08:15.646 [test-task-scheduler-1] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.14:08:18.214 [test-task-scheduler-1] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.14:08:23.991 [http-nio-8099-exec-5] INFO  AiAgentController      - AutoAgent流式执行请求开始，请求信息：{"aiAgentId":"68240838","maxStep":5,"message":"请在csdn发一个关于Java程序员面试的帖子,并发送成功后用微信公众号通知我","sessionId":"session_1760767344474_8xj6fnjcr"}
25-10-18.14:08:24.466 [pool-2-thread-14] WARN  PoolBase               - PgVectorHikariPool - Failed to validate connection org.postgresql.jdbc.PgConnection@132d6c4 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
25-10-18.14:08:24.467 [pool-2-thread-14] WARN  PoolBase               - PgVectorHikariPool - Failed to validate connection org.postgresql.jdbc.PgConnection@45964f71 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
25-10-18.14:08:24.468 [pool-2-thread-14] WARN  PoolBase               - PgVectorHikariPool - Failed to validate connection org.postgresql.jdbc.PgConnection@43062b4d (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
25-10-18.14:08:24.468 [pool-2-thread-14] WARN  PoolBase               - PgVectorHikariPool - Failed to validate connection org.postgresql.jdbc.PgConnection@1c85b4be (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
25-10-18.14:08:24.468 [pool-2-thread-14] WARN  PoolBase               - PgVectorHikariPool - Failed to validate connection org.postgresql.jdbc.PgConnection@609e7686 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
25-10-18.14:08:24.469 [pool-2-thread-14] WARN  PoolBase               - PgVectorHikariPool - Failed to validate connection org.postgresql.jdbc.PgConnection@17044023 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
25-10-18.14:08:24.470 [pool-2-thread-14] WARN  PoolBase               - PgVectorHikariPool - Failed to validate connection org.postgresql.jdbc.PgConnection@65aa4dcd (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
25-10-18.14:08:24.470 [pool-2-thread-14] WARN  PoolBase               - PgVectorHikariPool - Failed to validate connection org.postgresql.jdbc.PgConnection@543b2582 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
25-10-18.14:08:24.471 [pool-2-thread-14] WARN  PoolBase               - PgVectorHikariPool - Failed to validate connection org.postgresql.jdbc.PgConnection@470253c5 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
25-10-18.14:08:24.471 [pool-2-thread-14] WARN  PoolBase               - PgVectorHikariPool - Failed to validate connection org.postgresql.jdbc.PgConnection@72b2165e (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
25-10-18.14:08:24.471 [pool-2-thread-14] WARN  PoolBase               - PgVectorHikariPool - Failed to validate connection org.postgresql.jdbc.PgConnection@4541f9e0 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
25-10-18.14:08:24.471 [pool-2-thread-14] WARN  PoolBase               - PgVectorHikariPool - Failed to validate connection org.postgresql.jdbc.PgConnection@485bd3ff (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
25-10-18.14:08:24.472 [pool-2-thread-14] WARN  PoolBase               - PgVectorHikariPool - Failed to validate connection org.postgresql.jdbc.PgConnection@1d123d4a (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
25-10-18.14:08:24.472 [pool-2-thread-14] WARN  PoolBase               - PgVectorHikariPool - Failed to validate connection org.postgresql.jdbc.PgConnection@7ff0c850 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
25-10-18.14:08:24.472 [pool-2-thread-14] WARN  PoolBase               - PgVectorHikariPool - Failed to validate connection org.postgresql.jdbc.PgConnection@3534b0b7 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
25-10-18.14:08:45.654 [test-task-scheduler-1] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.14:08:45.715 [test-task-scheduler-1] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.14:09:15.648 [test-task-scheduler-1] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.14:09:16.522 [test-task-scheduler-1] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.14:09:26.059 [SpringApplicationShutdownHook] INFO  GracefulShutdown       - Commencing graceful shutdown. Waiting for active requests to complete
25-10-18.14:09:28.616 [main            ] INFO  Application            - Starting Application using Java 17.0.14 with PID 16028 (D:\java\ideapublic\ywz-ai-agent-station-study\ywz-ai-agent-station-study-app\target\classes started by ywz in D:\java\ideapublic\ywz-ai-agent-station-study)
25-10-18.14:09:28.618 [main            ] INFO  Application            - The following 1 profile is active: "dev"
25-10-18.14:09:30.192 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port 8099 (http)
25-10-18.14:09:30.206 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8099"]
25-10-18.14:09:30.208 [main            ] INFO  StandardService        - Starting service [Tomcat]
25-10-18.14:09:30.208 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/10.1.36]
25-10-18.14:09:30.299 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
25-10-18.14:09:30.299 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1643 ms
25-10-18.14:09:30.711 [main            ] INFO  PgVectorStore          - Using the vector table name: vector_store_openai. Is empty: false
25-10-18.14:09:30.717 [main            ] INFO  PgVectorStore          - Initializing PGVectorStore schema for table: vector_store_openai in schema: public
25-10-18.14:09:30.718 [main            ] INFO  PgVectorStore          - vectorTableValidationsEnabled false
25-10-18.14:09:31.205 [main            ] INFO  TaskJobAutoConfigBean  - xfg-wrench，任务调度器初始化完成。线程池大小: 5, 线程名前缀: test-task-scheduler-
25-10-18.14:09:31.209 [main            ] INFO  TaskJobService         - 开始初始化任务调度配置
25-10-18.14:09:31.222 [main            ] INFO  HikariDataSource       - MainHikariPool - Starting...
25-10-18.14:09:32.045 [main            ] INFO  HikariPool             - MainHikariPool - Added connection com.mysql.cj.jdbc.ConnectionImpl@7c03ab43
25-10-18.14:09:32.046 [main            ] INFO  HikariDataSource       - MainHikariPool - Start completed.
25-10-18.14:09:32.107 [main            ] INFO  TaskJobService         - 任务调度配置初始化完成，已加载任务数: 0
25-10-18.14:09:32.108 [main            ] INFO  TaskJobAutoConfigBean  - xfg-wrench，任务调度作业初始化完成。刷新间隔: 30000ms, 清理cron: 0 0/5 * * * ?
25-10-18.14:09:32.190 [main            ] INFO  OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
25-10-18.14:09:32.692 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8099"]
25-10-18.14:09:32.700 [main            ] INFO  TomcatWebServer        - Tomcat started on port 8099 (http) with context path '/'
25-10-18.14:09:32.710 [main            ] INFO  Application            - Started Application in 4.586 seconds (process running for 5.288)
25-10-18.14:09:32.711 [test-task-scheduler-1] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.14:09:32.712 [main            ] INFO  AiAgentAutoConfiguration - AI Agent 自动装配开始，配置: AiAgentAutoConfigProperties(enabled=true, clientIds=[6101])
25-10-18.14:09:32.864 [test-task-scheduler-1] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.14:09:33.073 [pool-2-thread-1 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_api) [48376249]
25-10-18.14:09:33.073 [pool-2-thread-2 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_model) [48376249]
25-10-18.14:09:33.074 [pool-2-thread-3 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_prompt) [48376249]
25-10-18.14:09:33.074 [pool-2-thread-4 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_advisor) [48376249]
25-10-18.14:09:33.074 [pool-2-thread-5 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_tool_mcp) [48376249]
25-10-18.14:09:33.074 [pool-2-thread-6 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client) [48376249]
25-10-18.14:09:33.576 [pool-2-thread-2 ] INFO  AgentRepository        - AiClientModelNode: 获取模型信息成功: 1000
25-10-18.14:09:33.606 [pool-2-thread-5 ] INFO  AgentRepository        - 查询modelId对应的mcpId列表 [5006]
25-10-18.14:09:33.679 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_api_1001
25-10-18.14:09:34.295 [HttpClient-11-Worker-0] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[completions=null, experimental={}, logging=null, prompts=PromptCapabilities[listChanged=false], resources=ResourceCapabilities[subscribe=false, listChanged=false], tools=ToolCapabilities[listChanged=false]], Info: Implementation[name=AIsearch, version=1.4.1] and Instructions null
25-10-18.14:09:34.379 [main            ] INFO  AiClientToolMcpNode    - SSE MCP Initialized: InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[completions=null, experimental={}, logging=null, prompts=PromptCapabilities[listChanged=false], resources=ResourceCapabilities[subscribe=false, listChanged=false], tools=ToolCapabilities[listChanged=false]], serverInfo=Implementation[name=AIsearch, version=1.4.1], instructions=null]
25-10-18.14:09:34.381 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5006
25-10-18.14:09:34.381 [main            ] INFO  AiClientModelNode      - 开始初始化 ai client model
25-10-18.14:09:34.478 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_1000
25-10-18.14:09:34.478 [main            ] WARN  AiClientAdvisorNode    - 没有需要被初始化的顾问角色
25-10-18.14:09:34.486 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_48376249
25-10-18.14:09:34.550 [pool-2-thread-7 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_api) [6101]
25-10-18.14:09:34.550 [pool-2-thread-10] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_advisor) [6101]
25-10-18.14:09:34.550 [pool-2-thread-9 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_prompt) [6101]
25-10-18.14:09:34.551 [pool-2-thread-8 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_model) [6101]
25-10-18.14:09:34.551 [pool-2-thread-12] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client) [6101]
25-10-18.14:09:34.551 [pool-2-thread-11] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_tool_mcp) [6101]
25-10-18.14:09:34.675 [pool-2-thread-11] INFO  AgentRepository        - 查询modelId对应的mcpId列表 [5001, 5002, 5004]
25-10-18.14:09:34.677 [pool-2-thread-8 ] INFO  AgentRepository        - AiClientModelNode: 获取模型信息成功: 6001
25-10-18.14:09:34.785 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_api_1001
25-10-18.14:09:34.940 [HttpClient-14-Worker-1] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[completions=null, experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-csdn, version=1.0.0] and Instructions null
25-10-18.14:09:34.974 [main            ] INFO  AiClientToolMcpNode    - SSE MCP Initialized: InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[completions=null, experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-csdn, version=1.0.0], instructions=null]
25-10-18.14:09:34.975 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5001
25-10-18.14:09:35.116 [HttpClient-15-Worker-2] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[completions=null, experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-weixin, version=1.0.0] and Instructions null
25-10-18.14:09:35.148 [main            ] INFO  AiClientToolMcpNode    - SSE MCP Initialized: InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[completions=null, experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-weixin, version=1.0.0], instructions=null]
25-10-18.14:09:35.148 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5002
25-10-18.14:09:37.181 [pool-4-thread-1 ] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[completions=null, experimental=null, logging=null, prompts=null, resources=null, tools=ToolCapabilities[listChanged=null]], Info: Implementation[name=g-search-mcp, version=0.1.0] and Instructions null
25-10-18.14:09:37.182 [main            ] INFO  AiClientToolMcpNode    - Stdio Mcp Initialized: InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[completions=null, experimental=null, logging=null, prompts=null, resources=null, tools=ToolCapabilities[listChanged=null]], serverInfo=Implementation[name=g-search-mcp, version=0.1.0], instructions=null]
25-10-18.14:09:37.182 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5004
25-10-18.14:09:37.182 [main            ] INFO  AiClientModelNode      - 开始初始化 ai client model
25-10-18.14:09:37.268 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_6001
25-10-18.14:09:37.283 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_advisor_4001
25-10-18.14:09:37.431 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_advisor_4004
25-10-18.14:09:37.437 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_6101
25-10-18.14:09:37.458 [main            ] INFO  AiAgentAutoConfiguration - AI Agent 自动装配完成 [{"agentId":"20099179","agentName":"111-测试model","channel":"agent","description":"111","status":1},{"agentId":"85374287","agentName":"测试Agent","channel":"agent","description":"测试Agent","status":1},{"agentId":"68240838","agentName":"testCsdn","channel":"agent","description":"测试Csdn自动发帖","status":1}]
25-10-18.14:10:00.012 [test-task-scheduler-2] INFO  TaskJobService         - 开始清理无效的任务
25-10-18.14:10:00.203 [test-task-scheduler-2] INFO  TaskJobService         - 发现1个无效任务需要清理
25-10-18.14:10:00.203 [test-task-scheduler-2] INFO  TaskJobService         - 无效任务清理完成，当前活跃任务数: 0
25-10-18.14:10:00.600 [http-nio-8099-exec-1] INFO  [/]                    - Initializing Spring DispatcherServlet 'dispatcherServlet'
25-10-18.14:10:00.600 [http-nio-8099-exec-1] INFO  DispatcherServlet      - Initializing Servlet 'dispatcherServlet'
25-10-18.14:10:00.600 [http-nio-8099-exec-1] INFO  DispatcherServlet      - Completed initialization in 0 ms
25-10-18.14:10:00.646 [http-nio-8099-exec-1] INFO  AiAgentController      - AutoAgent流式执行请求开始，请求信息：{"aiAgentId":"68240838","maxStep":5,"message":"请在csdn发一个关于Java程序员面试的帖子,并发送成功后用微信公众号通知我","sessionId":"session_1760767344474_8xj6fnjcr"}
25-10-18.14:10:01.606 [pool-2-thread-13] INFO  HikariDataSource       - PgVectorHikariPool - Starting...
25-10-18.14:10:02.722 [test-task-scheduler-1] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.14:10:05.323 [test-task-scheduler-1] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.14:10:06.234 [pool-2-thread-13] ERROR AgentDispatchService   - 执行异常：Failed to obtain JDBC Connection
org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection
	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:84)
	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:653)
	at org.springframework.jdbc.core.JdbcTemplate.query(JdbcTemplate.java:723)
	at org.springframework.jdbc.core.JdbcTemplate.query(JdbcTemplate.java:754)
	at org.springframework.jdbc.core.JdbcTemplate.query(JdbcTemplate.java:767)
	at org.springframework.jdbc.core.JdbcTemplate.query(JdbcTemplate.java:825)
	at org.springframework.ai.vectorstore.pgvector.PgVectorStore.doSimilaritySearch(PgVectorStore.java:372)
	at org.springframework.ai.vectorstore.observation.AbstractObservationVectorStore.lambda$similaritySearch$7(AbstractObservationVectorStore.java:126)
	at io.micrometer.observation.Observation.observe(Observation.java:564)
	at org.springframework.ai.vectorstore.observation.AbstractObservationVectorStore.similaritySearch(AbstractObservationVectorStore.java:125)
	at com.ywzai.domain.agent.service.armory.node.factory.element.RagAnswerAdvisor.before(RagAnswerAdvisor.java:59)
	at com.ywzai.domain.agent.service.armory.node.factory.element.RagAnswerAdvisor.adviseCall(RagAnswerAdvisor.java:123)
	at org.springframework.ai.chat.client.advisor.DefaultAroundAdvisorChain.lambda$nextCall$1(DefaultAroundAdvisorChain.java:110)
	at io.micrometer.observation.Observation.observe(Observation.java:564)
	at org.springframework.ai.chat.client.advisor.DefaultAroundAdvisorChain.nextCall(DefaultAroundAdvisorChain.java:110)
	at org.springframework.ai.chat.client.advisor.api.BaseAdvisor.adviseCall(BaseAdvisor.java:52)
	at org.springframework.ai.chat.client.advisor.DefaultAroundAdvisorChain.lambda$nextCall$1(DefaultAroundAdvisorChain.java:110)
	at io.micrometer.observation.Observation.observe(Observation.java:564)
	at org.springframework.ai.chat.client.advisor.DefaultAroundAdvisorChain.nextCall(DefaultAroundAdvisorChain.java:110)
	at org.springframework.ai.chat.client.DefaultChatClient$DefaultCallResponseSpec.lambda$doGetObservableChatClientResponse$1(DefaultChatClient.java:469)
	at io.micrometer.observation.Observation.observe(Observation.java:564)
	at org.springframework.ai.chat.client.DefaultChatClient$DefaultCallResponseSpec.doGetObservableChatClientResponse(DefaultChatClient.java:467)
	at org.springframework.ai.chat.client.DefaultChatClient$DefaultCallResponseSpec.doGetObservableChatClientResponse(DefaultChatClient.java:446)
	at org.springframework.ai.chat.client.DefaultChatClient$DefaultCallResponseSpec.content(DefaultChatClient.java:441)
	at com.ywzai.domain.agent.service.execute.fixed.FixedAgentExecuteStrategy.execute(FixedAgentExecuteStrategy.java:62)
	at com.ywzai.domain.agent.service.dispatch.AgentDispatchService.lambda$dispatch$0(AgentDispatchService.java:53)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: org.postgresql.util.PSQLException: 尝试连线已失败。
	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:364)
	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54)
	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:273)
	at org.postgresql.Driver.makeConnection(Driver.java:446)
	at org.postgresql.Driver.connect(Driver.java:298)
	at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:137)
	at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:360)
	at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:202)
	at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:461)
	at com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:550)
	at com.zaxxer.hikari.pool.HikariPool.<init>(HikariPool.java:98)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:111)
	at org.springframework.jdbc.datasource.DataSourceUtils.fetchConnection(DataSourceUtils.java:160)
	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:118)
	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:81)
	... 28 common frames omitted
Caused by: java.io.EOFException: null
	at org.postgresql.core.PGStream.receiveChar(PGStream.java:478)
	at org.postgresql.core.v3.ConnectionFactoryImpl.doAuthentication(ConnectionFactoryImpl.java:689)
	at org.postgresql.core.v3.ConnectionFactoryImpl.tryConnect(ConnectionFactoryImpl.java:213)
	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:268)
	... 42 common frames omitted
25-10-18.14:10:32.709 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.14:10:32.840 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.14:11:02.720 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.14:11:02.973 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.14:11:32.716 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.14:11:32.786 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.14:12:02.719 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.14:12:04.821 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.14:12:20.041 [SpringApplicationShutdownHook] INFO  GracefulShutdown       - Commencing graceful shutdown. Waiting for active requests to complete
25-10-18.14:12:22.573 [main            ] INFO  Application            - Starting Application using Java 17.0.14 with PID 30792 (D:\java\ideapublic\ywz-ai-agent-station-study\ywz-ai-agent-station-study-app\target\classes started by ywz in D:\java\ideapublic\ywz-ai-agent-station-study)
25-10-18.14:12:22.574 [main            ] INFO  Application            - The following 1 profile is active: "dev"
25-10-18.14:12:24.112 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port 8099 (http)
25-10-18.14:12:24.125 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8099"]
25-10-18.14:12:24.127 [main            ] INFO  StandardService        - Starting service [Tomcat]
25-10-18.14:12:24.127 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/10.1.36]
25-10-18.14:12:24.223 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
25-10-18.14:12:24.223 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1611 ms
25-10-18.14:12:24.620 [main            ] INFO  PgVectorStore          - Using the vector table name: vector_store_openai. Is empty: false
25-10-18.14:12:24.625 [main            ] INFO  PgVectorStore          - Initializing PGVectorStore schema for table: vector_store_openai in schema: public
25-10-18.14:12:24.625 [main            ] INFO  PgVectorStore          - vectorTableValidationsEnabled false
25-10-18.14:12:25.098 [main            ] INFO  TaskJobAutoConfigBean  - xfg-wrench，任务调度器初始化完成。线程池大小: 5, 线程名前缀: test-task-scheduler-
25-10-18.14:12:25.102 [main            ] INFO  TaskJobService         - 开始初始化任务调度配置
25-10-18.14:12:25.116 [main            ] INFO  HikariDataSource       - MainHikariPool - Starting...
25-10-18.14:12:25.920 [main            ] INFO  HikariPool             - MainHikariPool - Added connection com.mysql.cj.jdbc.ConnectionImpl@c02529
25-10-18.14:12:25.922 [main            ] INFO  HikariDataSource       - MainHikariPool - Start completed.
25-10-18.14:12:26.048 [main            ] INFO  TaskJobService         - 任务调度配置初始化完成，已加载任务数: 0
25-10-18.14:12:26.050 [main            ] INFO  TaskJobAutoConfigBean  - xfg-wrench，任务调度作业初始化完成。刷新间隔: 30000ms, 清理cron: 0 0/5 * * * ?
25-10-18.14:12:26.125 [main            ] INFO  OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
25-10-18.14:12:26.557 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8099"]
25-10-18.14:12:26.564 [main            ] INFO  TomcatWebServer        - Tomcat started on port 8099 (http) with context path '/'
25-10-18.14:12:26.573 [main            ] INFO  Application            - Started Application in 4.493 seconds (process running for 5.161)
25-10-18.14:12:26.575 [test-task-scheduler-1] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.14:12:26.575 [main            ] INFO  AiAgentAutoConfiguration - AI Agent 自动装配开始，配置: AiAgentAutoConfigProperties(enabled=true, clientIds=[6101])
25-10-18.14:12:26.652 [test-task-scheduler-1] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.14:12:27.037 [pool-2-thread-2 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_model) [48376249]
25-10-18.14:12:27.037 [pool-2-thread-1 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_api) [48376249]
25-10-18.14:12:27.037 [pool-2-thread-3 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_prompt) [48376249]
25-10-18.14:12:27.037 [pool-2-thread-4 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_advisor) [48376249]
25-10-18.14:12:27.037 [pool-2-thread-5 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_tool_mcp) [48376249]
25-10-18.14:12:27.038 [pool-2-thread-6 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client) [48376249]
25-10-18.14:12:27.262 [pool-2-thread-2 ] INFO  AgentRepository        - AiClientModelNode: 获取模型信息成功: 1000
25-10-18.14:12:27.268 [pool-2-thread-5 ] INFO  AgentRepository        - 查询modelId对应的mcpId列表 [5006]
25-10-18.14:12:27.638 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_api_1001
25-10-18.14:12:27.981 [HttpClient-11-Worker-1] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[completions=null, experimental={}, logging=null, prompts=PromptCapabilities[listChanged=false], resources=ResourceCapabilities[subscribe=false, listChanged=false], tools=ToolCapabilities[listChanged=false]], Info: Implementation[name=AIsearch, version=1.4.1] and Instructions null
25-10-18.14:12:28.045 [main            ] INFO  AiClientToolMcpNode    - SSE MCP Initialized: InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[completions=null, experimental={}, logging=null, prompts=PromptCapabilities[listChanged=false], resources=ResourceCapabilities[subscribe=false, listChanged=false], tools=ToolCapabilities[listChanged=false]], serverInfo=Implementation[name=AIsearch, version=1.4.1], instructions=null]
25-10-18.14:12:28.047 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5006
25-10-18.14:12:28.048 [main            ] INFO  AiClientModelNode      - 开始初始化 ai client model
25-10-18.14:12:28.147 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_1000
25-10-18.14:12:28.147 [main            ] WARN  AiClientAdvisorNode    - 没有需要被初始化的顾问角色
25-10-18.14:12:28.155 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_48376249
25-10-18.14:12:32.008 [pool-2-thread-7 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_api) [6101]
25-10-18.14:12:32.008 [pool-2-thread-8 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_model) [6101]
25-10-18.14:12:32.008 [pool-2-thread-9 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_prompt) [6101]
25-10-18.14:12:32.008 [pool-2-thread-10] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_advisor) [6101]
25-10-18.14:12:32.008 [pool-2-thread-11] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_tool_mcp) [6101]
25-10-18.14:12:32.008 [pool-2-thread-12] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client) [6101]
25-10-18.14:12:32.156 [pool-2-thread-8 ] INFO  AgentRepository        - AiClientModelNode: 获取模型信息成功: 6001
25-10-18.14:12:32.222 [pool-2-thread-11] INFO  AgentRepository        - 查询modelId对应的mcpId列表 [5001, 5002, 5004]
25-10-18.14:12:32.642 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_api_1001
25-10-18.14:12:32.794 [HttpClient-14-Worker-0] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[completions=null, experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-csdn, version=1.0.0] and Instructions null
25-10-18.14:12:32.856 [main            ] INFO  AiClientToolMcpNode    - SSE MCP Initialized: InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[completions=null, experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-csdn, version=1.0.0], instructions=null]
25-10-18.14:12:32.856 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5001
25-10-18.14:12:33.008 [HttpClient-15-Worker-2] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[completions=null, experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-weixin, version=1.0.0] and Instructions null
25-10-18.14:12:33.042 [main            ] INFO  AiClientToolMcpNode    - SSE MCP Initialized: InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[completions=null, experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-weixin, version=1.0.0], instructions=null]
25-10-18.14:12:33.042 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5002
25-10-18.14:12:35.063 [pool-4-thread-1 ] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[completions=null, experimental=null, logging=null, prompts=null, resources=null, tools=ToolCapabilities[listChanged=null]], Info: Implementation[name=g-search-mcp, version=0.1.0] and Instructions null
25-10-18.14:12:35.063 [main            ] INFO  AiClientToolMcpNode    - Stdio Mcp Initialized: InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[completions=null, experimental=null, logging=null, prompts=null, resources=null, tools=ToolCapabilities[listChanged=null]], serverInfo=Implementation[name=g-search-mcp, version=0.1.0], instructions=null]
25-10-18.14:12:35.063 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5004
25-10-18.14:12:35.063 [main            ] INFO  AiClientModelNode      - 开始初始化 ai client model
25-10-18.14:12:35.145 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_6001
25-10-18.14:12:35.153 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_advisor_4001
25-10-18.14:12:35.233 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_advisor_4004
25-10-18.14:12:35.235 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_6101
25-10-18.14:12:35.246 [main            ] INFO  AiAgentAutoConfiguration - AI Agent 自动装配完成 [{"agentId":"20099179","agentName":"111-测试model","channel":"agent","description":"111","status":1},{"agentId":"85374287","agentName":"测试Agent","channel":"agent","description":"测试Agent","status":1},{"agentId":"68240838","agentName":"testCsdn","channel":"agent","description":"测试Csdn自动发帖","status":1}]
25-10-18.14:12:56.574 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.14:12:56.703 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.14:13:26.580 [test-task-scheduler-3] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.14:13:26.740 [test-task-scheduler-3] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.14:13:31.573 [http-nio-8099-exec-1] INFO  [/]                    - Initializing Spring DispatcherServlet 'dispatcherServlet'
25-10-18.14:13:31.573 [http-nio-8099-exec-1] INFO  DispatcherServlet      - Initializing Servlet 'dispatcherServlet'
25-10-18.14:13:31.575 [http-nio-8099-exec-1] INFO  DispatcherServlet      - Completed initialization in 2 ms
25-10-18.14:13:31.620 [http-nio-8099-exec-1] INFO  AiAgentController      - AutoAgent流式执行请求开始，请求信息：{"aiAgentId":"68240838","maxStep":5,"message":"请在csdn发一个关于Java程序员面试的帖子,并发送成功后用微信公众号通知我\"","sessionId":"session_1760767344474_8xj6fnjcr"}
25-10-18.14:13:32.787 [pool-2-thread-13] INFO  HikariDataSource       - PgVectorHikariPool - Starting...
25-10-18.14:13:33.601 [pool-2-thread-13] INFO  HikariPool             - PgVectorHikariPool - Added connection org.postgresql.jdbc.PgConnection@5628442
25-10-18.14:13:33.601 [pool-2-thread-13] INFO  HikariDataSource       - PgVectorHikariPool - Start completed.
25-10-18.14:13:56.587 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.14:13:58.031 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.14:14:26.579 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.14:14:26.755 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.14:14:56.587 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.14:14:58.386 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.14:15:00.013 [test-task-scheduler-3] INFO  TaskJobService         - 开始清理无效的任务
25-10-18.14:15:00.331 [test-task-scheduler-3] INFO  TaskJobService         - 发现1个无效任务需要清理
25-10-18.14:15:00.331 [test-task-scheduler-3] INFO  TaskJobService         - 无效任务清理完成，当前活跃任务数: 0
25-10-18.14:15:11.701 [pool-2-thread-13] ERROR AgentDispatchService   - 执行异常：com.fasterxml.jackson.core.io.JsonEOFException: Unexpected end-of-input: expected close marker for Object (start marker at [Source: REDACTED (`StreamReadFeature.INCLUDE_SOURCE_IN_LOCATION` disabled); line: 1, column: 1])
 at [Source: REDACTED (`StreamReadFeature.INCLUDE_SOURCE_IN_LOCATION` disabled); line: 8, column: 1]
java.lang.RuntimeException: com.fasterxml.jackson.core.io.JsonEOFException: Unexpected end-of-input: expected close marker for Object (start marker at [Source: REDACTED (`StreamReadFeature.INCLUDE_SOURCE_IN_LOCATION` disabled); line: 1, column: 1])
 at [Source: REDACTED (`StreamReadFeature.INCLUDE_SOURCE_IN_LOCATION` disabled); line: 8, column: 1]
	at org.springframework.ai.model.ModelOptionsUtils.jsonToMap(ModelOptionsUtils.java:107)
	at org.springframework.ai.model.ModelOptionsUtils.jsonToMap(ModelOptionsUtils.java:92)
	at org.springframework.ai.mcp.SyncMcpToolCallback.call(SyncMcpToolCallback.java:113)
	at org.springframework.ai.mcp.SyncMcpToolCallback.call(SyncMcpToolCallback.java:126)
	at org.springframework.ai.model.tool.DefaultToolCallingManager.lambda$executeToolCall$5(DefaultToolCallingManager.java:224)
	at io.micrometer.observation.Observation.observe(Observation.java:564)
	at org.springframework.ai.model.tool.DefaultToolCallingManager.executeToolCall(DefaultToolCallingManager.java:221)
	at org.springframework.ai.model.tool.DefaultToolCallingManager.executeToolCalls(DefaultToolCallingManager.java:137)
	at org.springframework.ai.openai.OpenAiChatModel.internalCall(OpenAiChatModel.java:244)
	at org.springframework.ai.openai.OpenAiChatModel.internalCall(OpenAiChatModel.java:254)
	at org.springframework.ai.openai.OpenAiChatModel.internalCall(OpenAiChatModel.java:254)
	at org.springframework.ai.openai.OpenAiChatModel.internalCall(OpenAiChatModel.java:254)
	at org.springframework.ai.openai.OpenAiChatModel.call(OpenAiChatModel.java:181)
	at org.springframework.ai.chat.client.advisor.ChatModelCallAdvisor.adviseCall(ChatModelCallAdvisor.java:54)
	at org.springframework.ai.chat.client.advisor.DefaultAroundAdvisorChain.lambda$nextCall$1(DefaultAroundAdvisorChain.java:110)
	at io.micrometer.observation.Observation.observe(Observation.java:564)
	at org.springframework.ai.chat.client.advisor.DefaultAroundAdvisorChain.nextCall(DefaultAroundAdvisorChain.java:110)
	at com.ywzai.domain.agent.service.armory.node.factory.element.RagAnswerAdvisor.adviseCall(RagAnswerAdvisor.java:123)
	at org.springframework.ai.chat.client.advisor.DefaultAroundAdvisorChain.lambda$nextCall$1(DefaultAroundAdvisorChain.java:110)
	at io.micrometer.observation.Observation.observe(Observation.java:564)
	at org.springframework.ai.chat.client.advisor.DefaultAroundAdvisorChain.nextCall(DefaultAroundAdvisorChain.java:110)
	at org.springframework.ai.chat.client.advisor.api.BaseAdvisor.adviseCall(BaseAdvisor.java:52)
	at org.springframework.ai.chat.client.advisor.DefaultAroundAdvisorChain.lambda$nextCall$1(DefaultAroundAdvisorChain.java:110)
	at io.micrometer.observation.Observation.observe(Observation.java:564)
	at org.springframework.ai.chat.client.advisor.DefaultAroundAdvisorChain.nextCall(DefaultAroundAdvisorChain.java:110)
	at org.springframework.ai.chat.client.DefaultChatClient$DefaultCallResponseSpec.lambda$doGetObservableChatClientResponse$1(DefaultChatClient.java:469)
	at io.micrometer.observation.Observation.observe(Observation.java:564)
	at org.springframework.ai.chat.client.DefaultChatClient$DefaultCallResponseSpec.doGetObservableChatClientResponse(DefaultChatClient.java:467)
	at org.springframework.ai.chat.client.DefaultChatClient$DefaultCallResponseSpec.doGetObservableChatClientResponse(DefaultChatClient.java:446)
	at org.springframework.ai.chat.client.DefaultChatClient$DefaultCallResponseSpec.content(DefaultChatClient.java:441)
	at com.ywzai.domain.agent.service.execute.fixed.FixedAgentExecuteStrategy.execute(FixedAgentExecuteStrategy.java:62)
	at com.ywzai.domain.agent.service.dispatch.AgentDispatchService.lambda$dispatch$0(AgentDispatchService.java:53)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: com.fasterxml.jackson.core.io.JsonEOFException: Unexpected end-of-input: expected close marker for Object (start marker at [Source: REDACTED (`StreamReadFeature.INCLUDE_SOURCE_IN_LOCATION` disabled); line: 1, column: 1])
 at [Source: REDACTED (`StreamReadFeature.INCLUDE_SOURCE_IN_LOCATION` disabled); line: 8, column: 1]
	at com.fasterxml.jackson.core.base.ParserMinimalBase._reportInvalidEOF(ParserMinimalBase.java:641)
	at com.fasterxml.jackson.core.base.ParserBase._handleEOF(ParserBase.java:530)
	at com.fasterxml.jackson.core.base.ParserBase._eofAsNextChar(ParserBase.java:547)
	at com.fasterxml.jackson.core.json.ReaderBasedJsonParser._skipWSOrEnd2(ReaderBasedJsonParser.java:2540)
	at com.fasterxml.jackson.core.json.ReaderBasedJsonParser._skipWSOrEnd(ReaderBasedJsonParser.java:2532)
	at com.fasterxml.jackson.core.json.ReaderBasedJsonParser.nextFieldName(ReaderBasedJsonParser.java:912)
	at com.fasterxml.jackson.databind.deser.std.MapDeserializer._readAndBindStringKeyMap(MapDeserializer.java:608)
	at com.fasterxml.jackson.databind.deser.std.MapDeserializer.deserialize(MapDeserializer.java:449)
	at com.fasterxml.jackson.databind.deser.std.MapDeserializer.deserialize(MapDeserializer.java:32)
	at com.fasterxml.jackson.databind.deser.DefaultDeserializationContext.readRootValue(DefaultDeserializationContext.java:342)
	at com.fasterxml.jackson.databind.ObjectMapper._readMapAndClose(ObjectMapper.java:4917)
	at com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3860)
	at com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3843)
	at org.springframework.ai.model.ModelOptionsUtils.jsonToMap(ModelOptionsUtils.java:104)
	... 34 common frames omitted
25-10-18.14:15:26.586 [test-task-scheduler-4] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.14:15:26.852 [test-task-scheduler-4] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.14:15:56.578 [test-task-scheduler-4] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.14:16:00.414 [test-task-scheduler-4] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.14:16:26.581 [test-task-scheduler-4] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.14:16:26.730 [test-task-scheduler-4] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.14:16:56.577 [test-task-scheduler-4] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.14:16:56.733 [test-task-scheduler-4] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.14:17:26.577 [test-task-scheduler-4] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.14:17:27.786 [test-task-scheduler-4] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.14:17:56.585 [test-task-scheduler-4] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.14:17:56.764 [test-task-scheduler-4] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.14:18:26.583 [test-task-scheduler-4] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.14:18:26.767 [test-task-scheduler-4] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.14:18:56.582 [test-task-scheduler-4] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.14:19:01.173 [test-task-scheduler-4] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.14:19:26.577 [test-task-scheduler-4] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.14:19:27.795 [test-task-scheduler-4] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.14:19:56.573 [test-task-scheduler-4] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.14:19:56.672 [test-task-scheduler-4] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.14:20:00.003 [test-task-scheduler-1] INFO  TaskJobService         - 开始清理无效的任务
25-10-18.14:20:02.381 [test-task-scheduler-1] INFO  TaskJobService         - 发现1个无效任务需要清理
25-10-18.14:20:02.381 [test-task-scheduler-1] INFO  TaskJobService         - 无效任务清理完成，当前活跃任务数: 0
25-10-18.14:20:26.585 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.14:20:29.925 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.14:20:56.579 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.14:20:56.779 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.14:21:26.573 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.14:21:26.759 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.14:21:56.576 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.14:21:56.683 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.14:22:26.585 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.14:22:26.789 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.14:22:56.574 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.14:22:56.768 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.14:23:26.574 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.14:23:26.793 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.14:23:56.575 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.14:23:56.797 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.14:24:26.576 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.14:24:26.799 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.14:24:56.583 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.14:24:58.508 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.14:25:00.004 [test-task-scheduler-3] INFO  TaskJobService         - 开始清理无效的任务
25-10-18.14:25:00.077 [test-task-scheduler-3] INFO  TaskJobService         - 发现1个无效任务需要清理
25-10-18.14:25:00.077 [test-task-scheduler-3] INFO  TaskJobService         - 无效任务清理完成，当前活跃任务数: 0
25-10-18.14:25:26.581 [test-task-scheduler-4] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.14:25:26.777 [test-task-scheduler-4] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.14:25:56.581 [test-task-scheduler-4] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.14:25:56.805 [test-task-scheduler-4] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.14:26:26.583 [test-task-scheduler-4] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.14:26:30.086 [test-task-scheduler-4] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.14:26:56.586 [test-task-scheduler-4] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.14:26:56.710 [test-task-scheduler-4] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.14:27:26.585 [test-task-scheduler-4] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.14:27:29.783 [test-task-scheduler-4] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.14:27:56.581 [test-task-scheduler-4] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.14:27:56.654 [test-task-scheduler-4] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.14:28:26.577 [test-task-scheduler-4] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.14:28:26.666 [test-task-scheduler-4] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.14:28:56.579 [test-task-scheduler-4] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.14:28:56.924 [test-task-scheduler-4] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.14:29:26.584 [test-task-scheduler-4] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.14:29:26.660 [test-task-scheduler-4] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.14:29:56.580 [test-task-scheduler-4] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.14:29:59.668 [test-task-scheduler-4] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.14:30:00.015 [test-task-scheduler-1] INFO  TaskJobService         - 开始清理无效的任务
25-10-18.14:30:00.103 [test-task-scheduler-1] INFO  TaskJobService         - 发现1个无效任务需要清理
25-10-18.14:30:00.103 [test-task-scheduler-1] INFO  TaskJobService         - 无效任务清理完成，当前活跃任务数: 0
25-10-18.14:30:26.587 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.14:30:26.829 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.14:30:51.196 [HttpClient-14-Worker-3] ERROR HttpClientSseClientTransport - SSE connection error
java.io.IOException: chunked transfer encoding, state: READING_LENGTH
	at java.net.http/jdk.internal.net.http.common.Utils.wrapWithExtraDetail(Utils.java:351)
	at java.net.http/jdk.internal.net.http.Http1Response$BodyReader.onReadError(Http1Response.java:760)
	at java.net.http/jdk.internal.net.http.Http1AsyncReceiver.checkForErrors(Http1AsyncReceiver.java:302)
	at java.net.http/jdk.internal.net.http.Http1AsyncReceiver.flush(Http1AsyncReceiver.java:268)
	at java.net.http/jdk.internal.net.http.common.SequentialScheduler$LockingRestartableTask.run(SequentialScheduler.java:205)
	at java.net.http/jdk.internal.net.http.common.SequentialScheduler$CompleteRestartableTask.run(SequentialScheduler.java:149)
	at java.net.http/jdk.internal.net.http.common.SequentialScheduler$SchedulableTask.run(SequentialScheduler.java:230)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: java.io.EOFException: EOF reached while reading
	at java.net.http/jdk.internal.net.http.Http1AsyncReceiver$Http1TubeSubscriber.onComplete(Http1AsyncReceiver.java:596)
	at java.net.http/jdk.internal.net.http.SocketTube$InternalReadPublisher$ReadSubscription.signalCompletion(SocketTube.java:640)
	at java.net.http/jdk.internal.net.http.SocketTube$InternalReadPublisher$InternalReadSubscription.read(SocketTube.java:845)
	at java.net.http/jdk.internal.net.http.SocketTube$SocketFlowTask.run(SocketTube.java:181)
	at java.net.http/jdk.internal.net.http.common.SequentialScheduler$SchedulableTask.run(SequentialScheduler.java:230)
	at java.net.http/jdk.internal.net.http.common.SequentialScheduler.runOrSchedule(SequentialScheduler.java:303)
	at java.net.http/jdk.internal.net.http.common.SequentialScheduler.runOrSchedule(SequentialScheduler.java:256)
	at java.net.http/jdk.internal.net.http.SocketTube$InternalReadPublisher$InternalReadSubscription.signalReadable(SocketTube.java:774)
	at java.net.http/jdk.internal.net.http.SocketTube$InternalReadPublisher$ReadEvent.signalEvent(SocketTube.java:957)
	at java.net.http/jdk.internal.net.http.SocketTube$SocketFlowEvent.handle(SocketTube.java:253)
	at java.net.http/jdk.internal.net.http.HttpClientImpl$SelectorManager.handleEvent(HttpClientImpl.java:984)
	at java.net.http/jdk.internal.net.http.HttpClientImpl$SelectorManager.lambda$run$3(HttpClientImpl.java:939)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at java.net.http/jdk.internal.net.http.HttpClientImpl$SelectorManager.run(HttpClientImpl.java:939)
25-10-18.14:30:51.196 [ForkJoinPool.commonPool-worker-3] ERROR HttpClientSseClientTransport - SSE connection error
java.util.concurrent.CompletionException: java.io.IOException: chunked transfer encoding, state: READING_LENGTH
	at java.base/java.util.concurrent.CompletableFuture.encodeThrowable(CompletableFuture.java:332)
	at java.base/java.util.concurrent.CompletableFuture.completeThrowable(CompletableFuture.java:347)
	at java.base/java.util.concurrent.CompletableFuture.uniWhenComplete(CompletableFuture.java:874)
	at java.base/java.util.concurrent.CompletableFuture$UniWhenComplete.tryFire(CompletableFuture.java:841)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture.completeExceptionally(CompletableFuture.java:2162)
	at java.net.http/jdk.internal.net.http.ResponseSubscribers.lambda$getBodyAsync$2(ResponseSubscribers.java:1155)
	at java.base/java.util.concurrent.CompletableFuture.uniWhenComplete(CompletableFuture.java:863)
	at java.base/java.util.concurrent.CompletableFuture$UniWhenComplete.tryFire(CompletableFuture.java:841)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture.completeExceptionally(CompletableFuture.java:2162)
	at java.net.http/jdk.internal.net.http.LineSubscriberAdapter$LineSubscription.loop(LineSubscriberAdapter.java:410)
	at java.net.http/jdk.internal.net.http.common.SequentialScheduler$LockingRestartableTask.run(SequentialScheduler.java:205)
	at java.net.http/jdk.internal.net.http.common.SequentialScheduler$CompleteRestartableTask.run(SequentialScheduler.java:149)
	at java.net.http/jdk.internal.net.http.common.SequentialScheduler$SchedulableTask.run(SequentialScheduler.java:230)
	at java.net.http/jdk.internal.net.http.common.SequentialScheduler.runOrSchedule(SequentialScheduler.java:303)
	at java.net.http/jdk.internal.net.http.common.SequentialScheduler.runOrSchedule(SequentialScheduler.java:256)
	at java.net.http/jdk.internal.net.http.LineSubscriberAdapter$LineSubscription.signalError(LineSubscriberAdapter.java:199)
	at java.net.http/jdk.internal.net.http.LineSubscriberAdapter.onError(LineSubscriberAdapter.java:105)
	at java.net.http/jdk.internal.net.http.Http1Response$Http1BodySubscriber.propagateError(Http1Response.java:327)
	at java.net.http/jdk.internal.net.http.Http1Response$Http1BodySubscriber.complete(Http1Response.java:356)
	at java.net.http/jdk.internal.net.http.Http1Response$Http1BodySubscriber.onError(Http1Response.java:386)
	at java.net.http/jdk.internal.net.http.Http1Response.lambda$readBody$2(Http1Response.java:468)
	at java.base/java.util.concurrent.CompletableFuture.uniWhenComplete(CompletableFuture.java:863)
	at java.base/java.util.concurrent.CompletableFuture$UniWhenComplete.tryFire(CompletableFuture.java:841)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture.completeExceptionally(CompletableFuture.java:2162)
	at java.net.http/jdk.internal.net.http.Http1Response.onReadError(Http1Response.java:554)
	at java.net.http/jdk.internal.net.http.Http1Response$BodyReader.onReadError(Http1Response.java:761)
	at java.net.http/jdk.internal.net.http.Http1AsyncReceiver.checkForErrors(Http1AsyncReceiver.java:302)
	at java.net.http/jdk.internal.net.http.Http1AsyncReceiver.flush(Http1AsyncReceiver.java:268)
	at java.net.http/jdk.internal.net.http.common.SequentialScheduler$LockingRestartableTask.run(SequentialScheduler.java:205)
	at java.net.http/jdk.internal.net.http.common.SequentialScheduler$CompleteRestartableTask.run(SequentialScheduler.java:149)
	at java.net.http/jdk.internal.net.http.common.SequentialScheduler$SchedulableTask.run(SequentialScheduler.java:230)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: java.io.IOException: chunked transfer encoding, state: READING_LENGTH
	at java.net.http/jdk.internal.net.http.common.Utils.wrapWithExtraDetail(Utils.java:351)
	at java.net.http/jdk.internal.net.http.Http1Response$BodyReader.onReadError(Http1Response.java:760)
	... 8 common frames omitted
Caused by: java.io.EOFException: EOF reached while reading
	at java.net.http/jdk.internal.net.http.Http1AsyncReceiver$Http1TubeSubscriber.onComplete(Http1AsyncReceiver.java:596)
	at java.net.http/jdk.internal.net.http.SocketTube$InternalReadPublisher$ReadSubscription.signalCompletion(SocketTube.java:640)
	at java.net.http/jdk.internal.net.http.SocketTube$InternalReadPublisher$InternalReadSubscription.read(SocketTube.java:845)
	at java.net.http/jdk.internal.net.http.SocketTube$SocketFlowTask.run(SocketTube.java:181)
	at java.net.http/jdk.internal.net.http.common.SequentialScheduler$SchedulableTask.run(SequentialScheduler.java:230)
	at java.net.http/jdk.internal.net.http.common.SequentialScheduler.runOrSchedule(SequentialScheduler.java:303)
	at java.net.http/jdk.internal.net.http.common.SequentialScheduler.runOrSchedule(SequentialScheduler.java:256)
	at java.net.http/jdk.internal.net.http.SocketTube$InternalReadPublisher$InternalReadSubscription.signalReadable(SocketTube.java:774)
	at java.net.http/jdk.internal.net.http.SocketTube$InternalReadPublisher$ReadEvent.signalEvent(SocketTube.java:957)
	at java.net.http/jdk.internal.net.http.SocketTube$SocketFlowEvent.handle(SocketTube.java:253)
	at java.net.http/jdk.internal.net.http.HttpClientImpl$SelectorManager.handleEvent(HttpClientImpl.java:984)
	at java.net.http/jdk.internal.net.http.HttpClientImpl$SelectorManager.lambda$run$3(HttpClientImpl.java:939)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at java.net.http/jdk.internal.net.http.HttpClientImpl$SelectorManager.run(HttpClientImpl.java:939)
25-10-18.14:30:56.577 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.14:30:56.731 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.14:31:13.954 [http-nio-8099-exec-5] INFO  AiAgentController      - AutoAgent流式执行请求开始，请求信息：{"aiAgentId":"68240838","maxStep":5,"message":"请在csdn发一个关于Java程序员面试的帖子,并发送成功后用微信公众号通知我\"","sessionId":"session_1760767344474_8xj6fnjcr"}
25-10-18.14:31:14.774 [pool-2-thread-14] WARN  PoolBase               - PgVectorHikariPool - Failed to validate connection org.postgresql.jdbc.PgConnection@5628442 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
25-10-18.14:31:14.774 [pool-2-thread-14] WARN  PoolBase               - PgVectorHikariPool - Failed to validate connection org.postgresql.jdbc.PgConnection@61759b9b (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
25-10-18.14:31:14.774 [pool-2-thread-14] WARN  PoolBase               - PgVectorHikariPool - Failed to validate connection org.postgresql.jdbc.PgConnection@6e00c485 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
25-10-18.14:31:14.774 [pool-2-thread-14] WARN  PoolBase               - PgVectorHikariPool - Failed to validate connection org.postgresql.jdbc.PgConnection@5e5972f1 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
25-10-18.14:31:14.775 [pool-2-thread-14] WARN  PoolBase               - PgVectorHikariPool - Failed to validate connection org.postgresql.jdbc.PgConnection@5c35e1bd (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
25-10-18.14:31:14.775 [pool-2-thread-14] WARN  PoolBase               - PgVectorHikariPool - Failed to validate connection org.postgresql.jdbc.PgConnection@115100e3 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
25-10-18.14:31:14.775 [pool-2-thread-14] WARN  PoolBase               - PgVectorHikariPool - Failed to validate connection org.postgresql.jdbc.PgConnection@799ddaa0 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
25-10-18.14:31:14.775 [pool-2-thread-14] WARN  PoolBase               - PgVectorHikariPool - Failed to validate connection org.postgresql.jdbc.PgConnection@6c46e198 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
25-10-18.14:31:14.775 [pool-2-thread-14] WARN  PoolBase               - PgVectorHikariPool - Failed to validate connection org.postgresql.jdbc.PgConnection@1f8ddda4 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
25-10-18.14:31:14.776 [pool-2-thread-14] WARN  PoolBase               - PgVectorHikariPool - Failed to validate connection org.postgresql.jdbc.PgConnection@6c280ae (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
25-10-18.14:31:14.776 [pool-2-thread-14] WARN  PoolBase               - PgVectorHikariPool - Failed to validate connection org.postgresql.jdbc.PgConnection@111d020c (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
25-10-18.14:31:14.776 [pool-2-thread-14] WARN  PoolBase               - PgVectorHikariPool - Failed to validate connection org.postgresql.jdbc.PgConnection@4a0c6b96 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
25-10-18.14:31:14.776 [pool-2-thread-14] WARN  PoolBase               - PgVectorHikariPool - Failed to validate connection org.postgresql.jdbc.PgConnection@3b9dff8e (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
25-10-18.14:31:14.777 [pool-2-thread-14] WARN  PoolBase               - PgVectorHikariPool - Failed to validate connection org.postgresql.jdbc.PgConnection@29c8dfa3 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
25-10-18.14:31:14.777 [pool-2-thread-14] WARN  PoolBase               - PgVectorHikariPool - Failed to validate connection org.postgresql.jdbc.PgConnection@503cb5f4 (This connection has been closed.). Possibly consider using a shorter maxLifetime value.
25-10-18.14:31:26.579 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.14:31:26.700 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.14:31:56.575 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.14:31:56.650 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.14:32:26.584 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.14:32:26.765 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.14:32:56.576 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.14:32:56.741 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.14:33:26.585 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.14:33:26.847 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.14:33:56.584 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.14:33:56.701 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.14:34:26.587 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.14:34:26.663 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.14:34:56.583 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.14:34:56.752 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.14:35:00.011 [test-task-scheduler-3] INFO  TaskJobService         - 开始清理无效的任务
25-10-18.14:35:00.233 [test-task-scheduler-3] INFO  TaskJobService         - 发现1个无效任务需要清理
25-10-18.14:35:00.233 [test-task-scheduler-3] INFO  TaskJobService         - 无效任务清理完成，当前活跃任务数: 0
25-10-18.14:35:26.587 [test-task-scheduler-4] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.14:35:26.754 [test-task-scheduler-4] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.14:35:56.575 [test-task-scheduler-4] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.14:35:56.730 [test-task-scheduler-4] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.14:36:26.578 [test-task-scheduler-4] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.14:36:26.760 [test-task-scheduler-4] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.14:36:56.587 [test-task-scheduler-4] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.14:37:00.244 [test-task-scheduler-4] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.14:37:26.573 [test-task-scheduler-4] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.14:37:26.741 [test-task-scheduler-4] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.14:37:56.585 [test-task-scheduler-4] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.14:37:56.682 [test-task-scheduler-4] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.14:38:26.586 [test-task-scheduler-4] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.14:38:28.409 [test-task-scheduler-4] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.14:38:56.583 [test-task-scheduler-4] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.14:38:58.719 [test-task-scheduler-4] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.14:39:26.574 [test-task-scheduler-4] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.14:39:27.084 [test-task-scheduler-4] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.14:39:56.576 [test-task-scheduler-4] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.14:39:56.647 [test-task-scheduler-4] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.14:40:00.013 [test-task-scheduler-1] INFO  TaskJobService         - 开始清理无效的任务
25-10-18.14:40:00.157 [test-task-scheduler-1] INFO  TaskJobService         - 发现1个无效任务需要清理
25-10-18.14:40:00.157 [test-task-scheduler-1] INFO  TaskJobService         - 无效任务清理完成，当前活跃任务数: 0
25-10-18.14:40:26.586 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.14:40:26.734 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.14:40:56.583 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.14:40:56.668 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.14:41:26.577 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.14:41:26.695 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.14:41:56.578 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.14:41:56.665 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.14:42:26.581 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.14:42:26.763 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.14:42:56.586 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.14:42:56.794 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.14:43:26.573 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.14:43:29.165 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.14:43:37.606 [SpringApplicationShutdownHook] INFO  GracefulShutdown       - Commencing graceful shutdown. Waiting for active requests to complete
25-10-18.14:43:40.576 [main            ] INFO  Application            - Starting Application using Java 17.0.14 with PID 31124 (D:\java\ideapublic\ywz-ai-agent-station-study\ywz-ai-agent-station-study-app\target\classes started by ywz in D:\java\ideapublic\ywz-ai-agent-station-study)
25-10-18.14:43:40.577 [main            ] INFO  Application            - The following 1 profile is active: "dev"
25-10-18.14:43:42.264 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port 8099 (http)
25-10-18.14:43:42.280 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8099"]
25-10-18.14:43:42.283 [main            ] INFO  StandardService        - Starting service [Tomcat]
25-10-18.14:43:42.283 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/10.1.36]
25-10-18.14:43:42.385 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
25-10-18.14:43:42.385 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1771 ms
25-10-18.14:43:42.808 [main            ] INFO  PgVectorStore          - Using the vector table name: vector_store_openai. Is empty: false
25-10-18.14:43:42.813 [main            ] INFO  PgVectorStore          - Initializing PGVectorStore schema for table: vector_store_openai in schema: public
25-10-18.14:43:42.813 [main            ] INFO  PgVectorStore          - vectorTableValidationsEnabled false
25-10-18.14:43:43.314 [main            ] INFO  TaskJobAutoConfigBean  - xfg-wrench，任务调度器初始化完成。线程池大小: 5, 线程名前缀: test-task-scheduler-
25-10-18.14:43:43.318 [main            ] INFO  TaskJobService         - 开始初始化任务调度配置
25-10-18.14:43:43.333 [main            ] INFO  HikariDataSource       - MainHikariPool - Starting...
25-10-18.14:43:44.410 [main            ] INFO  HikariPool             - MainHikariPool - Added connection com.mysql.cj.jdbc.ConnectionImpl@2761d7fd
25-10-18.14:43:44.413 [main            ] INFO  HikariDataSource       - MainHikariPool - Start completed.
25-10-18.14:43:44.524 [main            ] INFO  TaskJobService         - 任务调度配置初始化完成，已加载任务数: 0
25-10-18.14:43:44.526 [main            ] INFO  TaskJobAutoConfigBean  - xfg-wrench，任务调度作业初始化完成。刷新间隔: 30000ms, 清理cron: 0 0/5 * * * ?
25-10-18.14:43:44.604 [main            ] INFO  OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
25-10-18.14:43:45.081 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8099"]
25-10-18.14:43:45.090 [main            ] INFO  TomcatWebServer        - Tomcat started on port 8099 (http) with context path '/'
25-10-18.14:43:45.102 [main            ] INFO  Application            - Started Application in 5.073 seconds (process running for 5.869)
25-10-18.14:43:45.104 [test-task-scheduler-1] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.14:43:45.104 [main            ] INFO  AiAgentAutoConfiguration - AI Agent 自动装配开始，配置: AiAgentAutoConfigProperties(enabled=true, clientIds=[6101])
25-10-18.14:43:45.262 [test-task-scheduler-1] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.14:43:45.312 [pool-2-thread-2 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_model) [48376249]
25-10-18.14:43:45.312 [pool-2-thread-1 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_api) [48376249]
25-10-18.14:43:45.312 [pool-2-thread-3 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_prompt) [48376249]
25-10-18.14:43:45.312 [pool-2-thread-5 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_tool_mcp) [48376249]
25-10-18.14:43:45.312 [pool-2-thread-4 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_advisor) [48376249]
25-10-18.14:43:45.312 [pool-2-thread-6 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client) [48376249]
25-10-18.14:43:45.570 [pool-2-thread-2 ] INFO  AgentRepository        - AiClientModelNode: 获取模型信息成功: 1000
25-10-18.14:43:45.750 [pool-2-thread-5 ] INFO  AgentRepository        - 查询modelId对应的mcpId列表 [5006]
25-10-18.14:43:45.887 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_api_1001
25-10-18.14:43:46.534 [HttpClient-11-Worker-2] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[completions=null, experimental={}, logging=null, prompts=PromptCapabilities[listChanged=false], resources=ResourceCapabilities[subscribe=false, listChanged=false], tools=ToolCapabilities[listChanged=false]], Info: Implementation[name=AIsearch, version=1.4.1] and Instructions null
25-10-18.14:43:46.600 [main            ] INFO  AiClientToolMcpNode    - SSE MCP Initialized: InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[completions=null, experimental={}, logging=null, prompts=PromptCapabilities[listChanged=false], resources=ResourceCapabilities[subscribe=false, listChanged=false], tools=ToolCapabilities[listChanged=false]], serverInfo=Implementation[name=AIsearch, version=1.4.1], instructions=null]
25-10-18.14:43:46.602 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5006
25-10-18.14:43:46.602 [main            ] INFO  AiClientModelNode      - 开始初始化 ai client model
25-10-18.14:43:46.700 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_1000
25-10-18.14:43:46.701 [main            ] WARN  AiClientAdvisorNode    - 没有需要被初始化的顾问角色
25-10-18.14:43:46.709 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_48376249
25-10-18.14:43:46.772 [pool-2-thread-8 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_model) [6101]
25-10-18.14:43:46.772 [pool-2-thread-7 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_api) [6101]
25-10-18.14:43:46.772 [pool-2-thread-9 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_prompt) [6101]
25-10-18.14:43:46.772 [pool-2-thread-12] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client) [6101]
25-10-18.14:43:46.772 [pool-2-thread-11] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_tool_mcp) [6101]
25-10-18.14:43:46.773 [pool-2-thread-10] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_advisor) [6101]
25-10-18.14:43:46.899 [pool-2-thread-11] INFO  AgentRepository        - 查询modelId对应的mcpId列表 [5001, 5002, 5004]
25-10-18.14:43:46.913 [pool-2-thread-8 ] INFO  AgentRepository        - AiClientModelNode: 获取模型信息成功: 6001
25-10-18.14:43:47.048 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_api_1001
25-10-18.14:43:47.640 [HttpClient-14-Worker-0] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[completions=null, experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-csdn, version=1.0.0] and Instructions null
25-10-18.14:43:47.682 [main            ] INFO  AiClientToolMcpNode    - SSE MCP Initialized: InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[completions=null, experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-csdn, version=1.0.0], instructions=null]
25-10-18.14:43:47.682 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5001
25-10-18.14:43:47.836 [HttpClient-15-Worker-2] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[completions=null, experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-weixin, version=1.0.0] and Instructions null
25-10-18.14:43:47.871 [main            ] INFO  AiClientToolMcpNode    - SSE MCP Initialized: InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[completions=null, experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-weixin, version=1.0.0], instructions=null]
25-10-18.14:43:47.872 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5002
25-10-18.14:44:02.689 [pool-4-thread-1 ] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[completions=null, experimental=null, logging=null, prompts=null, resources=null, tools=ToolCapabilities[listChanged=null]], Info: Implementation[name=g-search-mcp, version=0.1.0] and Instructions null
25-10-18.14:44:02.689 [main            ] INFO  AiClientToolMcpNode    - Stdio Mcp Initialized: InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[completions=null, experimental=null, logging=null, prompts=null, resources=null, tools=ToolCapabilities[listChanged=null]], serverInfo=Implementation[name=g-search-mcp, version=0.1.0], instructions=null]
25-10-18.14:44:02.689 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5004
25-10-18.14:44:02.689 [main            ] INFO  AiClientModelNode      - 开始初始化 ai client model
25-10-18.14:44:06.750 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_6001
25-10-18.14:44:06.766 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_advisor_4001
25-10-18.14:44:06.930 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_advisor_4004
25-10-18.14:44:06.939 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_6101
25-10-18.14:44:06.957 [main            ] INFO  AiAgentAutoConfiguration - AI Agent 自动装配完成 [{"agentId":"20099179","agentName":"111-测试model","channel":"agent","description":"111","status":1},{"agentId":"85374287","agentName":"测试Agent","channel":"agent","description":"测试Agent","status":1},{"agentId":"68240838","agentName":"testCsdn","channel":"agent","description":"测试Csdn自动发帖","status":1}]
25-10-18.14:44:15.108 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.14:44:15.175 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.14:44:45.108 [test-task-scheduler-3] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.14:44:45.178 [test-task-scheduler-3] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.14:45:00.011 [test-task-scheduler-1] INFO  TaskJobService         - 开始清理无效的任务
25-10-18.14:45:00.084 [test-task-scheduler-1] INFO  TaskJobService         - 发现1个无效任务需要清理
25-10-18.14:45:00.084 [test-task-scheduler-1] INFO  TaskJobService         - 无效任务清理完成，当前活跃任务数: 0
25-10-18.14:45:15.112 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.14:45:17.898 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.14:45:45.104 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.14:45:45.190 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.14:46:15.115 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.14:46:17.800 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.14:46:45.102 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.14:46:47.102 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.14:47:11.915 [http-nio-8099-exec-1] INFO  [/]                    - Initializing Spring DispatcherServlet 'dispatcherServlet'
25-10-18.14:47:11.916 [http-nio-8099-exec-1] INFO  DispatcherServlet      - Initializing Servlet 'dispatcherServlet'
25-10-18.14:47:11.917 [http-nio-8099-exec-1] INFO  DispatcherServlet      - Completed initialization in 1 ms
25-10-18.14:47:11.960 [http-nio-8099-exec-4] INFO  AiAgentController      - 查询可用智能体列表请求开始
25-10-18.14:47:12.027 [http-nio-8099-exec-4] INFO  AiAgentController      - 查询可用智能体列表成功，共3个智能体
25-10-18.14:47:15.111 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.14:47:15.174 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.14:47:45.107 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.14:47:45.234 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.14:48:00.580 [http-nio-8099-exec-5] INFO  AiAgentController      - AutoAgent流式执行请求开始，请求信息：{"aiAgentId":"68240838","maxStep":5,"message":"在csdn上发一篇关于Java程序员面试的帖子,并使用微信公众号通知我","sessionId":"session_1760770080548_ivwb0co19"}
25-10-18.14:48:01.658 [pool-2-thread-13] INFO  HikariDataSource       - PgVectorHikariPool - Starting...
25-10-18.14:48:02.400 [pool-2-thread-13] INFO  HikariPool             - PgVectorHikariPool - Added connection org.postgresql.jdbc.PgConnection@4d251e17
25-10-18.14:48:02.400 [pool-2-thread-13] INFO  HikariDataSource       - PgVectorHikariPool - Start completed.
25-10-18.14:48:15.115 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.14:48:15.179 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.14:48:45.113 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.14:48:49.243 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.14:49:15.106 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.14:49:15.359 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.14:49:45.106 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.14:49:45.259 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.14:50:00.003 [test-task-scheduler-5] INFO  TaskJobService         - 开始清理无效的任务
25-10-18.14:50:00.210 [test-task-scheduler-5] INFO  TaskJobService         - 发现1个无效任务需要清理
25-10-18.14:50:00.210 [test-task-scheduler-5] INFO  TaskJobService         - 无效任务清理完成，当前活跃任务数: 0
25-10-18.14:50:15.108 [test-task-scheduler-4] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.14:50:15.263 [test-task-scheduler-4] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.14:50:45.103 [test-task-scheduler-4] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.14:50:48.697 [test-task-scheduler-4] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.14:50:57.659 [pool-2-thread-13] INFO  FixedAgentExecuteStrategy - 智能体对话进行，客户端ID 68240838
25-10-18.14:50:57.660 [pool-2-thread-13] INFO  FixedAgentExecuteStrategy - 智能体对话结束，客户端ID 68240838,结果:文章已成功发布至CSDN，并已通过微信公众号推送通知。

**文章标题**：【谢飞机面试记】大厂Java岗三轮技术拷问实录：从Spring Boot到分布式架构  
**发布链接**：[点击查看](https://blog.csdn.net/2504_93398205/article/details/153522798)  
**内容概要**：本文以幽默对话形式还原互联网大厂Java工程师面试全过程，涵盖Spring Boot自动装配、Redis缓存三大问题、Kafka消息可靠性、OAuth2授权模式、G1与ZGC垃圾回收器对比等核心技术点，结合电商秒杀、微服务通信等真实业务场景，深入浅出讲解高并发系统设计要点，适合中高级Java开发者学习参考。

感谢阅读，欢迎转发分享！
25-10-18.14:50:57.672 [pool-2-thread-13] INFO  FixedAgentExecuteStrategy - ✅ 已发送最终结果
25-10-18.14:50:57.672 [pool-2-thread-13] INFO  FixedAgentExecuteStrategy - ✅ 已发送完成标识
25-10-18.14:51:15.104 [test-task-scheduler-4] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.14:51:17.008 [test-task-scheduler-4] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.14:51:45.113 [test-task-scheduler-4] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.14:51:45.251 [test-task-scheduler-4] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.14:52:15.113 [test-task-scheduler-4] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.14:52:15.248 [test-task-scheduler-4] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.14:52:45.104 [test-task-scheduler-4] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.14:52:45.276 [test-task-scheduler-4] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.14:53:15.109 [test-task-scheduler-4] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.14:53:15.279 [test-task-scheduler-4] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.14:53:45.113 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.14:53:45.282 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.14:54:15.113 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.14:54:15.283 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.14:54:45.105 [test-task-scheduler-2] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.14:54:48.885 [test-task-scheduler-2] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.14:55:00.014 [test-task-scheduler-3] INFO  TaskJobService         - 开始清理无效的任务
25-10-18.14:55:00.078 [test-task-scheduler-3] INFO  TaskJobService         - 发现1个无效任务需要清理
25-10-18.14:55:00.079 [test-task-scheduler-3] INFO  TaskJobService         - 无效任务清理完成，当前活跃任务数: 0
25-10-18.14:55:15.108 [test-task-scheduler-1] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.14:55:15.251 [test-task-scheduler-1] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.14:55:45.102 [test-task-scheduler-1] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.14:55:45.259 [test-task-scheduler-1] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.14:55:45.600 [http-nio-8099-exec-6] INFO  AiAgentController      - 查询可用智能体列表请求开始
25-10-18.14:55:45.634 [http-nio-8099-exec-6] INFO  AiAgentController      - 查询可用智能体列表成功，共3个智能体
25-10-18.14:56:15.113 [test-task-scheduler-1] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.14:56:15.199 [test-task-scheduler-1] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.14:56:45.114 [test-task-scheduler-1] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.14:56:45.183 [test-task-scheduler-1] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.14:57:15.114 [test-task-scheduler-1] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.14:57:17.327 [test-task-scheduler-1] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.14:57:45.103 [test-task-scheduler-1] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.14:57:45.169 [test-task-scheduler-1] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.14:58:15.102 [test-task-scheduler-1] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.14:58:18.457 [test-task-scheduler-1] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.14:58:45.108 [test-task-scheduler-1] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.14:58:46.288 [test-task-scheduler-1] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.14:59:15.107 [test-task-scheduler-1] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.14:59:15.310 [test-task-scheduler-1] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.14:59:45.109 [test-task-scheduler-1] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.14:59:45.313 [test-task-scheduler-1] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.15:00:00.011 [test-task-scheduler-2] INFO  TaskJobService         - 开始清理无效的任务
25-10-18.15:00:04.154 [test-task-scheduler-2] INFO  TaskJobService         - 发现1个无效任务需要清理
25-10-18.15:00:04.154 [test-task-scheduler-2] INFO  TaskJobService         - 无效任务清理完成，当前活跃任务数: 0
25-10-18.15:00:15.112 [test-task-scheduler-3] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.15:00:19.694 [test-task-scheduler-3] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.15:00:45.102 [test-task-scheduler-3] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.15:00:45.212 [test-task-scheduler-3] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.15:01:15.102 [test-task-scheduler-3] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.15:01:15.424 [test-task-scheduler-3] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.15:01:45.115 [test-task-scheduler-3] INFO  TaskJobService         - 开始刷新任务调度配置（动态更新）
25-10-18.15:01:45.271 [test-task-scheduler-3] INFO  TaskJobService         - 任务调度配置刷新完成，当前活跃任务数: 0
25-10-18.15:01:57.830 [SpringApplicationShutdownHook] INFO  GracefulShutdown       - Commencing graceful shutdown. Waiting for active requests to complete
25-10-18.15:01:58.082 [tomcat-shutdown ] INFO  GracefulShutdown       - Graceful shutdown complete
25-10-18.15:01:58.096 [SpringApplicationShutdownHook] INFO  TaskJobService         - 开始停止所有任务
25-10-18.15:01:58.096 [SpringApplicationShutdownHook] INFO  TaskJobService         - 所有任务已停止
25-10-18.15:01:58.098 [SpringApplicationShutdownHook] INFO  HikariDataSource       - PgVectorHikariPool - Shutdown initiated...
25-10-18.15:01:58.102 [SpringApplicationShutdownHook] INFO  HikariDataSource       - PgVectorHikariPool - Shutdown completed.
25-10-18.15:01:58.102 [SpringApplicationShutdownHook] INFO  HikariDataSource       - MainHikariPool - Shutdown initiated...
25-10-18.15:01:58.210 [ForkJoinPool.commonPool-worker-4] WARN  StdioClientTransport   - Process terminated with code 1
