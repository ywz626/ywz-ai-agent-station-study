25-10-08.13:39:42.886 [pool-2-thread-7 ] ERROR AiAgentController      - AutoAgent执行异常：No bean named 'ai_client_3101' available
org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'ai_client_3101' available
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeanDefinition(DefaultListableBeanFactory.java:951)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getMergedLocalBeanDefinition(AbstractBeanFactory.java:1382)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:302)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1272)
	at com.ywzai.domain.agent.service.execute.auto.step.AbstractExecuteSupport.getChatClientById(AbstractExecuteSupport.java:47)
	at com.ywzai.domain.agent.service.execute.auto.step.Step1AnalyzerNode.doApply(Step1AnalyzerNode.java:30)
	at com.ywzai.domain.agent.service.execute.auto.step.Step1AnalyzerNode.doApply(Step1AnalyzerNode.java:1)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.apply(AbstractMultiThreadStrategyRouter.java:31)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.router(AbstractMultiThreadStrategyRouter.java:22)
	at com.ywzai.domain.agent.service.execute.auto.step.RootNode.doApply(RootNode.java:38)
	at com.ywzai.domain.agent.service.execute.auto.step.RootNode.doApply(RootNode.java:21)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.apply(AbstractMultiThreadStrategyRouter.java:31)
	at com.ywzai.domain.agent.service.execute.auto.AutoAgentExecuteStrategy.execute(AutoAgentExecuteStrategy.java:42)
	at com.ywzai.trigger.http.AiAgentController.lambda$0(AiAgentController.java:61)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:842)
25-10-08.14:02:05.711 [parallel-4      ] WARN  StdioClientTransport   - Process terminated with code 1
25-10-08.14:04:29.438 [pool-2-thread-7 ] ERROR AiAgentController      - AutoAgent执行异常：The template string is not valid.
java.lang.IllegalArgumentException: The template string is not valid.
	at org.springframework.ai.template.st.StTemplateRenderer.createST(StTemplateRenderer.java:118)
	at org.springframework.ai.template.st.StTemplateRenderer.apply(StTemplateRenderer.java:103)
	at org.springframework.ai.chat.prompt.PromptTemplate.render(PromptTemplate.java:137)
	at com.ywzai.domain.agent.service.armory.factory.element.RagAnswerAdvisor.before(RagAnswerAdvisor.java:57)
	at com.ywzai.domain.agent.service.armory.factory.element.RagAnswerAdvisor.adviseCall(RagAnswerAdvisor.java:80)
	at org.springframework.ai.chat.client.advisor.DefaultAroundAdvisorChain.lambda$nextCall$1(DefaultAroundAdvisorChain.java:110)
	at io.micrometer.observation.Observation.observe(Observation.java:564)
	at org.springframework.ai.chat.client.advisor.DefaultAroundAdvisorChain.nextCall(DefaultAroundAdvisorChain.java:110)
	at org.springframework.ai.chat.client.advisor.api.BaseAdvisor.adviseCall(BaseAdvisor.java:52)
	at org.springframework.ai.chat.client.advisor.DefaultAroundAdvisorChain.lambda$nextCall$1(DefaultAroundAdvisorChain.java:110)
	at io.micrometer.observation.Observation.observe(Observation.java:564)
	at org.springframework.ai.chat.client.advisor.DefaultAroundAdvisorChain.nextCall(DefaultAroundAdvisorChain.java:110)
	at org.springframework.ai.chat.client.DefaultChatClient$DefaultCallResponseSpec.lambda$doGetObservableChatClientResponse$1(DefaultChatClient.java:469)
	at io.micrometer.observation.Observation.observe(Observation.java:564)
	at org.springframework.ai.chat.client.DefaultChatClient$DefaultCallResponseSpec.doGetObservableChatClientResponse(DefaultChatClient.java:467)
	at org.springframework.ai.chat.client.DefaultChatClient$DefaultCallResponseSpec.doGetObservableChatClientResponse(DefaultChatClient.java:446)
	at org.springframework.ai.chat.client.DefaultChatClient$DefaultCallResponseSpec.content(DefaultChatClient.java:441)
	at com.ywzai.domain.agent.service.execute.auto.step.Step1AnalyzerNode.doApply(Step1AnalyzerNode.java:47)
	at com.ywzai.domain.agent.service.execute.auto.step.Step1AnalyzerNode.doApply(Step1AnalyzerNode.java:1)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.apply(AbstractMultiThreadStrategyRouter.java:31)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.router(AbstractMultiThreadStrategyRouter.java:22)
	at com.ywzai.domain.agent.service.execute.auto.step.RootNode.doApply(RootNode.java:38)
	at com.ywzai.domain.agent.service.execute.auto.step.RootNode.doApply(RootNode.java:21)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.apply(AbstractMultiThreadStrategyRouter.java:31)
	at com.ywzai.domain.agent.service.execute.auto.AutoAgentExecuteStrategy.execute(AutoAgentExecuteStrategy.java:56)
	at com.ywzai.trigger.http.AiAgentController.lambda$0(AiAgentController.java:61)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: org.stringtemplate.v4.compiler.STException: null
	at org.stringtemplate.v4.compiler.Compiler.reportMessageAndThrowSTException(Compiler.java:224)
	at org.stringtemplate.v4.compiler.Compiler.compile(Compiler.java:154)
	at org.stringtemplate.v4.STGroup.compile(STGroup.java:514)
	at org.stringtemplate.v4.ST.<init>(ST.java:162)
	at org.stringtemplate.v4.ST.<init>(ST.java:156)
	at org.springframework.ai.template.st.StTemplateRenderer.createST(StTemplateRenderer.java:115)
	... 28 common frames omitted
25-10-08.14:13:42.462 [pool-2-thread-8 ] ERROR AiAgentController      - AutoAgent执行异常：The template string is not valid.
java.lang.IllegalArgumentException: The template string is not valid.
	at org.springframework.ai.template.st.StTemplateRenderer.createST(StTemplateRenderer.java:118)
	at org.springframework.ai.template.st.StTemplateRenderer.apply(StTemplateRenderer.java:103)
	at org.springframework.ai.chat.prompt.PromptTemplate.render(PromptTemplate.java:137)
	at com.ywzai.domain.agent.service.armory.factory.element.RagAnswerAdvisor.before(RagAnswerAdvisor.java:57)
	at com.ywzai.domain.agent.service.armory.factory.element.RagAnswerAdvisor.adviseCall(RagAnswerAdvisor.java:80)
	at org.springframework.ai.chat.client.advisor.DefaultAroundAdvisorChain.lambda$nextCall$1(DefaultAroundAdvisorChain.java:110)
	at io.micrometer.observation.Observation.observe(Observation.java:564)
	at org.springframework.ai.chat.client.advisor.DefaultAroundAdvisorChain.nextCall(DefaultAroundAdvisorChain.java:110)
	at org.springframework.ai.chat.client.advisor.api.BaseAdvisor.adviseCall(BaseAdvisor.java:52)
	at org.springframework.ai.chat.client.advisor.DefaultAroundAdvisorChain.lambda$nextCall$1(DefaultAroundAdvisorChain.java:110)
	at io.micrometer.observation.Observation.observe(Observation.java:564)
	at org.springframework.ai.chat.client.advisor.DefaultAroundAdvisorChain.nextCall(DefaultAroundAdvisorChain.java:110)
	at org.springframework.ai.chat.client.DefaultChatClient$DefaultCallResponseSpec.lambda$doGetObservableChatClientResponse$1(DefaultChatClient.java:469)
	at io.micrometer.observation.Observation.observe(Observation.java:564)
	at org.springframework.ai.chat.client.DefaultChatClient$DefaultCallResponseSpec.doGetObservableChatClientResponse(DefaultChatClient.java:467)
	at org.springframework.ai.chat.client.DefaultChatClient$DefaultCallResponseSpec.doGetObservableChatClientResponse(DefaultChatClient.java:446)
	at org.springframework.ai.chat.client.DefaultChatClient$DefaultCallResponseSpec.content(DefaultChatClient.java:441)
	at com.ywzai.domain.agent.service.execute.auto.step.Step1AnalyzerNode.doApply(Step1AnalyzerNode.java:47)
	at com.ywzai.domain.agent.service.execute.auto.step.Step1AnalyzerNode.doApply(Step1AnalyzerNode.java:1)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.apply(AbstractMultiThreadStrategyRouter.java:31)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.router(AbstractMultiThreadStrategyRouter.java:22)
	at com.ywzai.domain.agent.service.execute.auto.step.RootNode.doApply(RootNode.java:38)
	at com.ywzai.domain.agent.service.execute.auto.step.RootNode.doApply(RootNode.java:21)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.apply(AbstractMultiThreadStrategyRouter.java:31)
	at com.ywzai.domain.agent.service.execute.auto.AutoAgentExecuteStrategy.execute(AutoAgentExecuteStrategy.java:56)
	at com.ywzai.trigger.http.AiAgentController.lambda$0(AiAgentController.java:61)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: org.stringtemplate.v4.compiler.STException: null
	at org.stringtemplate.v4.compiler.Compiler.reportMessageAndThrowSTException(Compiler.java:224)
	at org.stringtemplate.v4.compiler.Compiler.compile(Compiler.java:154)
	at org.stringtemplate.v4.STGroup.compile(STGroup.java:514)
	at org.stringtemplate.v4.ST.<init>(ST.java:162)
	at org.stringtemplate.v4.ST.<init>(ST.java:156)
	at org.springframework.ai.template.st.StTemplateRenderer.createST(StTemplateRenderer.java:115)
	... 28 common frames omitted
25-10-08.14:13:57.314 [parallel-4      ] WARN  StdioClientTransport   - Process terminated with code 1
25-10-08.14:14:13.630 [pool-2-thread-7 ] ERROR AiAgentController      - AutoAgent执行异常：The template string is not valid.
java.lang.IllegalArgumentException: The template string is not valid.
	at org.springframework.ai.template.st.StTemplateRenderer.createST(StTemplateRenderer.java:118)
	at org.springframework.ai.template.st.StTemplateRenderer.apply(StTemplateRenderer.java:103)
	at org.springframework.ai.chat.prompt.PromptTemplate.render(PromptTemplate.java:137)
	at com.ywzai.domain.agent.service.armory.factory.element.RagAnswerAdvisor.before(RagAnswerAdvisor.java:57)
	at com.ywzai.domain.agent.service.armory.factory.element.RagAnswerAdvisor.adviseCall(RagAnswerAdvisor.java:80)
	at org.springframework.ai.chat.client.advisor.DefaultAroundAdvisorChain.lambda$nextCall$1(DefaultAroundAdvisorChain.java:110)
	at io.micrometer.observation.Observation.observe(Observation.java:564)
	at org.springframework.ai.chat.client.advisor.DefaultAroundAdvisorChain.nextCall(DefaultAroundAdvisorChain.java:110)
	at org.springframework.ai.chat.client.advisor.api.BaseAdvisor.adviseCall(BaseAdvisor.java:52)
	at org.springframework.ai.chat.client.advisor.DefaultAroundAdvisorChain.lambda$nextCall$1(DefaultAroundAdvisorChain.java:110)
	at io.micrometer.observation.Observation.observe(Observation.java:564)
	at org.springframework.ai.chat.client.advisor.DefaultAroundAdvisorChain.nextCall(DefaultAroundAdvisorChain.java:110)
	at org.springframework.ai.chat.client.DefaultChatClient$DefaultCallResponseSpec.lambda$doGetObservableChatClientResponse$1(DefaultChatClient.java:469)
	at io.micrometer.observation.Observation.observe(Observation.java:564)
	at org.springframework.ai.chat.client.DefaultChatClient$DefaultCallResponseSpec.doGetObservableChatClientResponse(DefaultChatClient.java:467)
	at org.springframework.ai.chat.client.DefaultChatClient$DefaultCallResponseSpec.doGetObservableChatClientResponse(DefaultChatClient.java:446)
	at org.springframework.ai.chat.client.DefaultChatClient$DefaultCallResponseSpec.content(DefaultChatClient.java:441)
	at com.ywzai.domain.agent.service.execute.auto.step.Step1AnalyzerNode.doApply(Step1AnalyzerNode.java:47)
	at com.ywzai.domain.agent.service.execute.auto.step.Step1AnalyzerNode.doApply(Step1AnalyzerNode.java:1)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.apply(AbstractMultiThreadStrategyRouter.java:31)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.router(AbstractMultiThreadStrategyRouter.java:22)
	at com.ywzai.domain.agent.service.execute.auto.step.RootNode.doApply(RootNode.java:38)
	at com.ywzai.domain.agent.service.execute.auto.step.RootNode.doApply(RootNode.java:21)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.apply(AbstractMultiThreadStrategyRouter.java:31)
	at com.ywzai.domain.agent.service.execute.auto.AutoAgentExecuteStrategy.execute(AutoAgentExecuteStrategy.java:56)
	at com.ywzai.trigger.http.AiAgentController.lambda$0(AiAgentController.java:61)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: org.stringtemplate.v4.compiler.STException: null
	at org.stringtemplate.v4.compiler.Compiler.reportMessageAndThrowSTException(Compiler.java:224)
	at org.stringtemplate.v4.compiler.Compiler.compile(Compiler.java:154)
	at org.stringtemplate.v4.STGroup.compile(STGroup.java:514)
	at org.stringtemplate.v4.ST.<init>(ST.java:162)
	at org.stringtemplate.v4.ST.<init>(ST.java:156)
	at org.springframework.ai.template.st.StTemplateRenderer.createST(StTemplateRenderer.java:115)
	... 28 common frames omitted
25-10-08.14:17:56.069 [parallel-4      ] WARN  StdioClientTransport   - Process terminated with code 1
25-10-08.14:18:18.735 [pool-2-thread-7 ] ERROR AiAgentController      - AutoAgent执行异常：The template string is not valid.
java.lang.IllegalArgumentException: The template string is not valid.
	at org.springframework.ai.template.st.StTemplateRenderer.createST(StTemplateRenderer.java:118)
	at org.springframework.ai.template.st.StTemplateRenderer.apply(StTemplateRenderer.java:103)
	at org.springframework.ai.chat.prompt.PromptTemplate.render(PromptTemplate.java:137)
	at com.ywzai.domain.agent.service.armory.factory.element.RagAnswerAdvisor.before(RagAnswerAdvisor.java:57)
	at com.ywzai.domain.agent.service.armory.factory.element.RagAnswerAdvisor.adviseCall(RagAnswerAdvisor.java:80)
	at org.springframework.ai.chat.client.advisor.DefaultAroundAdvisorChain.lambda$nextCall$1(DefaultAroundAdvisorChain.java:110)
	at io.micrometer.observation.Observation.observe(Observation.java:564)
	at org.springframework.ai.chat.client.advisor.DefaultAroundAdvisorChain.nextCall(DefaultAroundAdvisorChain.java:110)
	at org.springframework.ai.chat.client.advisor.api.BaseAdvisor.adviseCall(BaseAdvisor.java:52)
	at org.springframework.ai.chat.client.advisor.DefaultAroundAdvisorChain.lambda$nextCall$1(DefaultAroundAdvisorChain.java:110)
	at io.micrometer.observation.Observation.observe(Observation.java:564)
	at org.springframework.ai.chat.client.advisor.DefaultAroundAdvisorChain.nextCall(DefaultAroundAdvisorChain.java:110)
	at org.springframework.ai.chat.client.DefaultChatClient$DefaultCallResponseSpec.lambda$doGetObservableChatClientResponse$1(DefaultChatClient.java:469)
	at io.micrometer.observation.Observation.observe(Observation.java:564)
	at org.springframework.ai.chat.client.DefaultChatClient$DefaultCallResponseSpec.doGetObservableChatClientResponse(DefaultChatClient.java:467)
	at org.springframework.ai.chat.client.DefaultChatClient$DefaultCallResponseSpec.doGetObservableChatClientResponse(DefaultChatClient.java:446)
	at org.springframework.ai.chat.client.DefaultChatClient$DefaultCallResponseSpec.content(DefaultChatClient.java:441)
	at com.ywzai.domain.agent.service.execute.auto.step.Step1AnalyzerNode.doApply(Step1AnalyzerNode.java:47)
	at com.ywzai.domain.agent.service.execute.auto.step.Step1AnalyzerNode.doApply(Step1AnalyzerNode.java:21)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.apply(AbstractMultiThreadStrategyRouter.java:31)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.router(AbstractMultiThreadStrategyRouter.java:22)
	at com.ywzai.domain.agent.service.execute.auto.step.RootNode.doApply(RootNode.java:38)
	at com.ywzai.domain.agent.service.execute.auto.step.RootNode.doApply(RootNode.java:21)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.apply(AbstractMultiThreadStrategyRouter.java:31)
	at com.ywzai.domain.agent.service.execute.auto.AutoAgentExecuteStrategy.execute(AutoAgentExecuteStrategy.java:56)
	at com.ywzai.trigger.http.AiAgentController.lambda$0(AiAgentController.java:61)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: org.stringtemplate.v4.compiler.STException: null
	at org.stringtemplate.v4.compiler.Compiler.reportMessageAndThrowSTException(Compiler.java:224)
	at org.stringtemplate.v4.compiler.Compiler.compile(Compiler.java:154)
	at org.stringtemplate.v4.STGroup.compile(STGroup.java:514)
	at org.stringtemplate.v4.ST.<init>(ST.java:162)
	at org.stringtemplate.v4.ST.<init>(ST.java:156)
	at org.springframework.ai.template.st.StTemplateRenderer.createST(StTemplateRenderer.java:115)
	... 28 common frames omitted
25-10-08.14:24:32.053 [parallel-4      ] WARN  StdioClientTransport   - Process terminated with code 1
25-10-08.14:25:00.606 [pool-3-thread-1 ] ERROR McpClientSession       - Error handling request: JSONRPCError[code=-32603, message=parsing end time: syntax error: unexpected $end, expecting tNOW or tDIGIT at character 2 starting with "", data=null]
25-10-08.14:25:00.615 [pool-2-thread-7 ] ERROR AiAgentController      - AutoAgent执行异常：parsing end time: syntax error: unexpected $end, expecting tNOW or tDIGIT at character 2 starting with ""
io.modelcontextprotocol.spec.McpError: parsing end time: syntax error: unexpected $end, expecting tNOW or tDIGIT at character 2 starting with ""
	at io.modelcontextprotocol.spec.McpClientSession.lambda$sendRequest$11(McpClientSession.java:248)
	at reactor.core.publisher.FluxHandle$HandleSubscriber.onNext(FluxHandle.java:113)
	at reactor.core.publisher.SerializedSubscriber.onNext(SerializedSubscriber.java:99)
	at reactor.core.publisher.FluxTimeout$TimeoutMainSubscriber.onNext(FluxTimeout.java:181)
	at reactor.core.publisher.MonoCreate$DefaultMonoSink.success(MonoCreate.java:176)
	at io.modelcontextprotocol.spec.McpClientSession.handle(McpClientSession.java:136)
	at reactor.core.publisher.FluxPeekFuseable$PeekFuseableConditionalSubscriber.onNext(FluxPeekFuseable.java:489)
	at reactor.core.publisher.Operators$ScalarSubscription.request(Operators.java:2571)
	at reactor.core.publisher.FluxPeekFuseable$PeekFuseableConditionalSubscriber.request(FluxPeekFuseable.java:437)
	at reactor.core.publisher.FluxContextWrite$ContextWriteSubscriber.request(FluxContextWrite.java:136)
	at reactor.core.publisher.FluxFlatMap$FlatMapInner.onSubscribe(FluxFlatMap.java:968)
	at reactor.core.publisher.FluxContextWrite$ContextWriteSubscriber.onSubscribe(FluxContextWrite.java:101)
	at reactor.core.publisher.FluxPeekFuseable$PeekFuseableConditionalSubscriber.onSubscribe(FluxPeekFuseable.java:471)
	at reactor.core.publisher.MonoJust.subscribe(MonoJust.java:55)
	at reactor.core.publisher.Mono.subscribe(Mono.java:4576)
	at reactor.core.publisher.FluxFlatMap$FlatMapMain.onNext(FluxFlatMap.java:430)
	at reactor.core.publisher.SinkManyUnicast.drainRegular(SinkManyUnicast.java:284)
	at reactor.core.publisher.SinkManyUnicast.drain(SinkManyUnicast.java:365)
	at reactor.core.publisher.SinkManyUnicast.tryEmitNext(SinkManyUnicast.java:239)
	at reactor.core.publisher.SinkManySerialized.tryEmitNext(SinkManySerialized.java:100)
	at io.modelcontextprotocol.client.transport.StdioClientTransport.lambda$startInboundProcessing$6(StdioClientTransport.java:261)
	at reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:68)
	at reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:28)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:842)
	Suppressed: java.lang.Exception: #block terminated with an error
		at reactor.core.publisher.BlockingSingleSubscriber.blockingGet(BlockingSingleSubscriber.java:104)
		at reactor.core.publisher.Mono.block(Mono.java:1779)
		at io.modelcontextprotocol.client.McpSyncClient.callTool(McpSyncClient.java:218)
		at org.springframework.ai.mcp.SyncMcpToolCallback.call(SyncMcpToolCallback.java:116)
		at org.springframework.ai.mcp.SyncMcpToolCallback.call(SyncMcpToolCallback.java:126)
		at org.springframework.ai.model.tool.DefaultToolCallingManager.lambda$executeToolCall$5(DefaultToolCallingManager.java:224)
		at io.micrometer.observation.Observation.observe(Observation.java:564)
		at org.springframework.ai.model.tool.DefaultToolCallingManager.executeToolCall(DefaultToolCallingManager.java:221)
		at org.springframework.ai.model.tool.DefaultToolCallingManager.executeToolCalls(DefaultToolCallingManager.java:137)
		at org.springframework.ai.openai.OpenAiChatModel.internalCall(OpenAiChatModel.java:244)
		at org.springframework.ai.openai.OpenAiChatModel.internalCall(OpenAiChatModel.java:254)
		at org.springframework.ai.openai.OpenAiChatModel.call(OpenAiChatModel.java:181)
		at org.springframework.ai.chat.client.advisor.ChatModelCallAdvisor.adviseCall(ChatModelCallAdvisor.java:54)
		at org.springframework.ai.chat.client.advisor.DefaultAroundAdvisorChain.lambda$nextCall$1(DefaultAroundAdvisorChain.java:110)
		at io.micrometer.observation.Observation.observe(Observation.java:564)
		at org.springframework.ai.chat.client.advisor.DefaultAroundAdvisorChain.nextCall(DefaultAroundAdvisorChain.java:110)
		at com.ywzai.domain.agent.service.armory.factory.element.RagAnswerAdvisor.adviseCall(RagAnswerAdvisor.java:80)
		at org.springframework.ai.chat.client.advisor.DefaultAroundAdvisorChain.lambda$nextCall$1(DefaultAroundAdvisorChain.java:110)
		at io.micrometer.observation.Observation.observe(Observation.java:564)
		at org.springframework.ai.chat.client.advisor.DefaultAroundAdvisorChain.nextCall(DefaultAroundAdvisorChain.java:110)
		at org.springframework.ai.chat.client.advisor.api.BaseAdvisor.adviseCall(BaseAdvisor.java:52)
		at org.springframework.ai.chat.client.advisor.DefaultAroundAdvisorChain.lambda$nextCall$1(DefaultAroundAdvisorChain.java:110)
		at io.micrometer.observation.Observation.observe(Observation.java:564)
		at org.springframework.ai.chat.client.advisor.DefaultAroundAdvisorChain.nextCall(DefaultAroundAdvisorChain.java:110)
		at org.springframework.ai.chat.client.DefaultChatClient$DefaultCallResponseSpec.lambda$doGetObservableChatClientResponse$1(DefaultChatClient.java:469)
		at io.micrometer.observation.Observation.observe(Observation.java:564)
		at org.springframework.ai.chat.client.DefaultChatClient$DefaultCallResponseSpec.doGetObservableChatClientResponse(DefaultChatClient.java:467)
		at org.springframework.ai.chat.client.DefaultChatClient$DefaultCallResponseSpec.doGetObservableChatClientResponse(DefaultChatClient.java:446)
		at org.springframework.ai.chat.client.DefaultChatClient$DefaultCallResponseSpec.content(DefaultChatClient.java:441)
		at com.ywzai.domain.agent.service.execute.auto.step.Step1AnalyzerNode.doApply(Step1AnalyzerNode.java:47)
		at com.ywzai.domain.agent.service.execute.auto.step.Step1AnalyzerNode.doApply(Step1AnalyzerNode.java:21)
		at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.apply(AbstractMultiThreadStrategyRouter.java:31)
		at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.router(AbstractMultiThreadStrategyRouter.java:22)
		at com.ywzai.domain.agent.service.execute.auto.step.RootNode.doApply(RootNode.java:38)
		at com.ywzai.domain.agent.service.execute.auto.step.RootNode.doApply(RootNode.java:21)
		at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.apply(AbstractMultiThreadStrategyRouter.java:31)
		at com.ywzai.domain.agent.service.execute.auto.AutoAgentExecuteStrategy.execute(AutoAgentExecuteStrategy.java:56)
		at com.ywzai.trigger.http.AiAgentController.lambda$0(AiAgentController.java:61)
		... 3 common frames omitted
25-10-08.14:52:14.880 [pool-3-thread-1 ] ERROR McpClientSession       - Error handling request: JSONRPCError[code=-32603, message=parsing end time: syntax error: unexpected $end, expecting tNOW or tDIGIT at character 2 starting with "", data=null]
25-10-08.14:52:14.880 [pool-2-thread-8 ] ERROR AiAgentController      - AutoAgent执行异常：parsing end time: syntax error: unexpected $end, expecting tNOW or tDIGIT at character 2 starting with ""
io.modelcontextprotocol.spec.McpError: parsing end time: syntax error: unexpected $end, expecting tNOW or tDIGIT at character 2 starting with ""
	at io.modelcontextprotocol.spec.McpClientSession.lambda$sendRequest$11(McpClientSession.java:248)
	at reactor.core.publisher.FluxHandle$HandleSubscriber.onNext(FluxHandle.java:113)
	at reactor.core.publisher.SerializedSubscriber.onNext(SerializedSubscriber.java:99)
	at reactor.core.publisher.FluxTimeout$TimeoutMainSubscriber.onNext(FluxTimeout.java:181)
	at reactor.core.publisher.MonoCreate$DefaultMonoSink.success(MonoCreate.java:176)
	at io.modelcontextprotocol.spec.McpClientSession.handle(McpClientSession.java:136)
	at reactor.core.publisher.FluxPeekFuseable$PeekFuseableConditionalSubscriber.onNext(FluxPeekFuseable.java:489)
	at reactor.core.publisher.Operators$ScalarSubscription.request(Operators.java:2571)
	at reactor.core.publisher.FluxPeekFuseable$PeekFuseableConditionalSubscriber.request(FluxPeekFuseable.java:437)
	at reactor.core.publisher.FluxContextWrite$ContextWriteSubscriber.request(FluxContextWrite.java:136)
	at reactor.core.publisher.FluxFlatMap$FlatMapInner.onSubscribe(FluxFlatMap.java:968)
	at reactor.core.publisher.FluxContextWrite$ContextWriteSubscriber.onSubscribe(FluxContextWrite.java:101)
	at reactor.core.publisher.FluxPeekFuseable$PeekFuseableConditionalSubscriber.onSubscribe(FluxPeekFuseable.java:471)
	at reactor.core.publisher.MonoJust.subscribe(MonoJust.java:55)
	at reactor.core.publisher.Mono.subscribe(Mono.java:4576)
	at reactor.core.publisher.FluxFlatMap$FlatMapMain.onNext(FluxFlatMap.java:430)
	at reactor.core.publisher.SinkManyUnicast.drainRegular(SinkManyUnicast.java:284)
	at reactor.core.publisher.SinkManyUnicast.drain(SinkManyUnicast.java:365)
	at reactor.core.publisher.SinkManyUnicast.tryEmitNext(SinkManyUnicast.java:239)
	at reactor.core.publisher.SinkManySerialized.tryEmitNext(SinkManySerialized.java:100)
	at io.modelcontextprotocol.client.transport.StdioClientTransport.lambda$startInboundProcessing$6(StdioClientTransport.java:261)
	at reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:68)
	at reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:28)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:842)
	Suppressed: java.lang.Exception: #block terminated with an error
		at reactor.core.publisher.BlockingSingleSubscriber.blockingGet(BlockingSingleSubscriber.java:104)
		at reactor.core.publisher.Mono.block(Mono.java:1779)
		at io.modelcontextprotocol.client.McpSyncClient.callTool(McpSyncClient.java:218)
		at org.springframework.ai.mcp.SyncMcpToolCallback.call(SyncMcpToolCallback.java:116)
		at org.springframework.ai.mcp.SyncMcpToolCallback.call(SyncMcpToolCallback.java:126)
		at org.springframework.ai.model.tool.DefaultToolCallingManager.lambda$executeToolCall$5(DefaultToolCallingManager.java:224)
		at io.micrometer.observation.Observation.observe(Observation.java:564)
		at org.springframework.ai.model.tool.DefaultToolCallingManager.executeToolCall(DefaultToolCallingManager.java:221)
		at org.springframework.ai.model.tool.DefaultToolCallingManager.executeToolCalls(DefaultToolCallingManager.java:137)
		at org.springframework.ai.openai.OpenAiChatModel.internalCall(OpenAiChatModel.java:244)
		at org.springframework.ai.openai.OpenAiChatModel.internalCall(OpenAiChatModel.java:254)
		at org.springframework.ai.openai.OpenAiChatModel.call(OpenAiChatModel.java:181)
		at org.springframework.ai.chat.client.advisor.ChatModelCallAdvisor.adviseCall(ChatModelCallAdvisor.java:54)
		at org.springframework.ai.chat.client.advisor.DefaultAroundAdvisorChain.lambda$nextCall$1(DefaultAroundAdvisorChain.java:110)
		at io.micrometer.observation.Observation.observe(Observation.java:564)
		at org.springframework.ai.chat.client.advisor.DefaultAroundAdvisorChain.nextCall(DefaultAroundAdvisorChain.java:110)
		at com.ywzai.domain.agent.service.armory.factory.element.RagAnswerAdvisor.adviseCall(RagAnswerAdvisor.java:80)
		at org.springframework.ai.chat.client.advisor.DefaultAroundAdvisorChain.lambda$nextCall$1(DefaultAroundAdvisorChain.java:110)
		at io.micrometer.observation.Observation.observe(Observation.java:564)
		at org.springframework.ai.chat.client.advisor.DefaultAroundAdvisorChain.nextCall(DefaultAroundAdvisorChain.java:110)
		at org.springframework.ai.chat.client.advisor.api.BaseAdvisor.adviseCall(BaseAdvisor.java:52)
		at org.springframework.ai.chat.client.advisor.DefaultAroundAdvisorChain.lambda$nextCall$1(DefaultAroundAdvisorChain.java:110)
		at io.micrometer.observation.Observation.observe(Observation.java:564)
		at org.springframework.ai.chat.client.advisor.DefaultAroundAdvisorChain.nextCall(DefaultAroundAdvisorChain.java:110)
		at org.springframework.ai.chat.client.DefaultChatClient$DefaultCallResponseSpec.lambda$doGetObservableChatClientResponse$1(DefaultChatClient.java:469)
		at io.micrometer.observation.Observation.observe(Observation.java:564)
		at org.springframework.ai.chat.client.DefaultChatClient$DefaultCallResponseSpec.doGetObservableChatClientResponse(DefaultChatClient.java:467)
		at org.springframework.ai.chat.client.DefaultChatClient$DefaultCallResponseSpec.doGetObservableChatClientResponse(DefaultChatClient.java:446)
		at org.springframework.ai.chat.client.DefaultChatClient$DefaultCallResponseSpec.content(DefaultChatClient.java:441)
		at com.ywzai.domain.agent.service.execute.auto.step.Step2PrecisionExecutorNode.doApply(Step2PrecisionExecutorNode.java:46)
		at com.ywzai.domain.agent.service.execute.auto.step.Step2PrecisionExecutorNode.doApply(Step2PrecisionExecutorNode.java:20)
		at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.apply(AbstractMultiThreadStrategyRouter.java:31)
		at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.router(AbstractMultiThreadStrategyRouter.java:22)
		at com.ywzai.domain.agent.service.execute.auto.step.Step1AnalyzerNode.doApply(Step1AnalyzerNode.java:60)
		at com.ywzai.domain.agent.service.execute.auto.step.Step1AnalyzerNode.doApply(Step1AnalyzerNode.java:21)
		at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.apply(AbstractMultiThreadStrategyRouter.java:31)
		at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.router(AbstractMultiThreadStrategyRouter.java:22)
		at com.ywzai.domain.agent.service.execute.auto.step.RootNode.doApply(RootNode.java:38)
		at com.ywzai.domain.agent.service.execute.auto.step.RootNode.doApply(RootNode.java:21)
		at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.apply(AbstractMultiThreadStrategyRouter.java:31)
		at com.ywzai.domain.agent.service.execute.auto.AutoAgentExecuteStrategy.execute(AutoAgentExecuteStrategy.java:56)
		at com.ywzai.trigger.http.AiAgentController.lambda$0(AiAgentController.java:61)
		... 3 common frames omitted
25-10-08.15:13:51.252 [parallel-2      ] WARN  StdioClientTransport   - Process terminated with code 1
25-10-08.15:15:26.467 [parallel-4      ] WARN  StdioClientTransport   - Process terminated with code 1
25-10-08.15:16:45.596 [MainHikariPool housekeeper] WARN  HikariPool             - MainHikariPool - Thread starvation or clock leap detected (housekeeper delta=1m11s638ms300µs700ns).
25-10-08.15:23:41.448 [MainHikariPool housekeeper] WARN  HikariPool             - MainHikariPool - Thread starvation or clock leap detected (housekeeper delta=1m55s757ms522µs700ns).
25-10-08.15:24:02.676 [pool-3-thread-1 ] ERROR McpClientSession       - Error handling request: JSONRPCError[code=-32603, message=parsing end time: syntax error: unexpected $end, expecting tNOW or tDIGIT at character 2 starting with "", data=null]
25-10-08.15:24:02.684 [pool-2-thread-7 ] ERROR AiAgentController      - AutoAgent执行异常：parsing end time: syntax error: unexpected $end, expecting tNOW or tDIGIT at character 2 starting with ""
io.modelcontextprotocol.spec.McpError: parsing end time: syntax error: unexpected $end, expecting tNOW or tDIGIT at character 2 starting with ""
	at io.modelcontextprotocol.spec.McpClientSession.lambda$sendRequest$11(McpClientSession.java:248)
	Suppressed: reactor.core.publisher.FluxOnAssembly$OnAssemblyException: 
Assembly trace from producer [reactor.core.publisher.MonoHandleFuseable] :
	reactor.core.publisher.Mono.handle(Mono.java:3295)
	io.modelcontextprotocol.spec.McpClientSession.sendRequest(McpClientSession.java:245)
Error has been observed at the following site(s):
	*___Mono.handle ⇢ at io.modelcontextprotocol.spec.McpClientSession.sendRequest(McpClientSession.java:245)
	*__Mono.flatMap ⇢ at io.modelcontextprotocol.client.McpAsyncClient.withInitializationCheck(McpAsyncClient.java:379)
Original Stack Trace:
		at io.modelcontextprotocol.spec.McpClientSession.lambda$sendRequest$11(McpClientSession.java:248)
		at reactor.core.publisher.FluxHandleFuseable$HandleFuseableSubscriber.onNext(FluxHandleFuseable.java:179)
		at reactor.core.publisher.SerializedSubscriber.onNext(SerializedSubscriber.java:99)
		at reactor.core.publisher.FluxTimeout$TimeoutMainSubscriber.onNext(FluxTimeout.java:181)
		at reactor.core.publisher.MonoCreate$DefaultMonoSink.success(MonoCreate.java:176)
		at io.modelcontextprotocol.spec.McpClientSession.handle(McpClientSession.java:136)
		at reactor.core.publisher.FluxPeekFuseable$PeekConditionalSubscriber.onNext(FluxPeekFuseable.java:840)
		at reactor.core.publisher.Operators$ScalarSubscription.request(Operators.java:2571)
		at reactor.core.publisher.FluxPeekFuseable$PeekConditionalSubscriber.request(FluxPeekFuseable.java:783)
		at reactor.core.publisher.FluxContextWrite$ContextWriteSubscriber.request(FluxContextWrite.java:136)
		at reactor.core.publisher.FluxFlatMap$FlatMapInner.onSubscribe(FluxFlatMap.java:968)
		at reactor.core.publisher.FluxContextWrite$ContextWriteSubscriber.onSubscribe(FluxContextWrite.java:101)
		at reactor.core.publisher.FluxPeekFuseable$PeekConditionalSubscriber.onSubscribe(FluxPeekFuseable.java:816)
		at reactor.core.publisher.MonoJust.subscribe(MonoJust.java:55)
		at reactor.core.publisher.Mono.subscribe(Mono.java:4576)
		at reactor.core.publisher.FluxFlatMap$FlatMapMain.onNext(FluxFlatMap.java:430)
		at reactor.core.publisher.SinkManyUnicast.drainRegular(SinkManyUnicast.java:284)
		at reactor.core.publisher.SinkManyUnicast.drain(SinkManyUnicast.java:365)
		at reactor.core.publisher.SinkManyUnicast.tryEmitNext(SinkManyUnicast.java:239)
		at reactor.core.publisher.SinkManySerialized.tryEmitNext(SinkManySerialized.java:100)
		at io.modelcontextprotocol.client.transport.StdioClientTransport.lambda$startInboundProcessing$6(StdioClientTransport.java:261)
		at reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:68)
		at reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:28)
		at java.base/java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:264)
		at java.base/java.util.concurrent.FutureTask.run(FutureTask.java)
		at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
		at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
		at java.base/java.lang.Thread.run(Thread.java:842)
	Suppressed: java.lang.Exception: #block terminated with an error
		at reactor.core.publisher.BlockingSingleSubscriber.blockingGet(BlockingSingleSubscriber.java:104)
		at reactor.core.publisher.Mono.block(Mono.java:1779)
		at io.modelcontextprotocol.client.McpSyncClient.callTool(McpSyncClient.java:218)
		at org.springframework.ai.mcp.SyncMcpToolCallback.call(SyncMcpToolCallback.java:116)
		at org.springframework.ai.mcp.SyncMcpToolCallback.call(SyncMcpToolCallback.java:126)
		at org.springframework.ai.model.tool.DefaultToolCallingManager.lambda$executeToolCall$5(DefaultToolCallingManager.java:224)
		at io.micrometer.observation.Observation.observe(Observation.java:564)
		at org.springframework.ai.model.tool.DefaultToolCallingManager.executeToolCall(DefaultToolCallingManager.java:221)
		at org.springframework.ai.model.tool.DefaultToolCallingManager.executeToolCalls(DefaultToolCallingManager.java:137)
		at org.springframework.ai.openai.OpenAiChatModel.internalCall(OpenAiChatModel.java:244)
		at org.springframework.ai.openai.OpenAiChatModel.internalCall(OpenAiChatModel.java:254)
		at org.springframework.ai.openai.OpenAiChatModel.call(OpenAiChatModel.java:181)
		at org.springframework.ai.chat.client.advisor.ChatModelCallAdvisor.adviseCall(ChatModelCallAdvisor.java:54)
		at org.springframework.ai.chat.client.advisor.DefaultAroundAdvisorChain.lambda$nextCall$1(DefaultAroundAdvisorChain.java:110)
		at io.micrometer.observation.Observation.observe(Observation.java:564)
		at org.springframework.ai.chat.client.advisor.DefaultAroundAdvisorChain.nextCall(DefaultAroundAdvisorChain.java:110)
		at com.ywzai.domain.agent.service.armory.factory.element.RagAnswerAdvisor.adviseCall(RagAnswerAdvisor.java:81)
		at org.springframework.ai.chat.client.advisor.DefaultAroundAdvisorChain.lambda$nextCall$1(DefaultAroundAdvisorChain.java:110)
		at io.micrometer.observation.Observation.observe(Observation.java:564)
		at org.springframework.ai.chat.client.advisor.DefaultAroundAdvisorChain.nextCall(DefaultAroundAdvisorChain.java:110)
		at org.springframework.ai.chat.client.advisor.api.BaseAdvisor.adviseCall(BaseAdvisor.java:52)
		at org.springframework.ai.chat.client.advisor.DefaultAroundAdvisorChain.lambda$nextCall$1(DefaultAroundAdvisorChain.java:110)
		at io.micrometer.observation.Observation.observe(Observation.java:564)
		at org.springframework.ai.chat.client.advisor.DefaultAroundAdvisorChain.nextCall(DefaultAroundAdvisorChain.java:110)
		at org.springframework.ai.chat.client.DefaultChatClient$DefaultCallResponseSpec.lambda$doGetObservableChatClientResponse$1(DefaultChatClient.java:469)
		at io.micrometer.observation.Observation.observe(Observation.java:564)
		at org.springframework.ai.chat.client.DefaultChatClient$DefaultCallResponseSpec.doGetObservableChatClientResponse(DefaultChatClient.java:467)
		at org.springframework.ai.chat.client.DefaultChatClient$DefaultCallResponseSpec.doGetObservableChatClientResponse(DefaultChatClient.java:446)
		at org.springframework.ai.chat.client.DefaultChatClient$DefaultCallResponseSpec.content(DefaultChatClient.java:441)
		at com.ywzai.domain.agent.service.execute.auto.step.Step2PrecisionExecutorNode.doApply(Step2PrecisionExecutorNode.java:46)
		at com.ywzai.domain.agent.service.execute.auto.step.Step2PrecisionExecutorNode.doApply(Step2PrecisionExecutorNode.java:20)
		at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.apply(AbstractMultiThreadStrategyRouter.java:31)
		at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.router(AbstractMultiThreadStrategyRouter.java:22)
		at com.ywzai.domain.agent.service.execute.auto.step.Step1AnalyzerNode.doApply(Step1AnalyzerNode.java:60)
		at com.ywzai.domain.agent.service.execute.auto.step.Step1AnalyzerNode.doApply(Step1AnalyzerNode.java:21)
		at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.apply(AbstractMultiThreadStrategyRouter.java:31)
		at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.router(AbstractMultiThreadStrategyRouter.java:22)
		at com.ywzai.domain.agent.service.execute.auto.step.RootNode.doApply(RootNode.java:38)
		at com.ywzai.domain.agent.service.execute.auto.step.RootNode.doApply(RootNode.java:21)
		at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.apply(AbstractMultiThreadStrategyRouter.java:31)
		at com.ywzai.domain.agent.service.execute.auto.AutoAgentExecuteStrategy.execute(AutoAgentExecuteStrategy.java:56)
		at com.ywzai.trigger.http.AiAgentController.lambda$0(AiAgentController.java:61)
		at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
		at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
		at java.base/java.lang.Thread.run(Thread.java:842)
25-10-08.15:43:32.551 [PgVectorHikariPool housekeeper] WARN  HikariPool             - PgVectorHikariPool - Thread starvation or clock leap detected (housekeeper delta=11m49s513ms444µs500ns).
25-10-08.15:43:32.551 [MainHikariPool housekeeper] WARN  HikariPool             - MainHikariPool - Thread starvation or clock leap detected (housekeeper delta=11m51s14ms744µs600ns).
25-10-08.15:45:27.283 [pool-3-thread-1 ] ERROR McpClientSession       - Error handling request: JSONRPCError[code=-32603, message=parsing end time: syntax error: unexpected $end, expecting tNOW or tDIGIT at character 2 starting with "", data=null]
25-10-08.15:45:27.291 [pool-2-thread-7 ] ERROR AiAgentController      - AutoAgent执行异常：parsing end time: syntax error: unexpected $end, expecting tNOW or tDIGIT at character 2 starting with ""
io.modelcontextprotocol.spec.McpError: parsing end time: syntax error: unexpected $end, expecting tNOW or tDIGIT at character 2 starting with ""
	at io.modelcontextprotocol.spec.McpClientSession.lambda$sendRequest$11(McpClientSession.java:248)
	at reactor.core.publisher.FluxHandle$HandleSubscriber.onNext(FluxHandle.java:113)
	at reactor.core.publisher.SerializedSubscriber.onNext(SerializedSubscriber.java:99)
	at reactor.core.publisher.FluxTimeout$TimeoutMainSubscriber.onNext(FluxTimeout.java:181)
	at reactor.core.publisher.MonoCreate$DefaultMonoSink.success(MonoCreate.java:176)
	at io.modelcontextprotocol.spec.McpClientSession.handle(McpClientSession.java:136)
	at reactor.core.publisher.FluxPeekFuseable$PeekFuseableConditionalSubscriber.onNext(FluxPeekFuseable.java:489)
	at reactor.core.publisher.Operators$ScalarSubscription.request(Operators.java:2571)
	at reactor.core.publisher.FluxPeekFuseable$PeekFuseableConditionalSubscriber.request(FluxPeekFuseable.java:437)
	at reactor.core.publisher.FluxContextWrite$ContextWriteSubscriber.request(FluxContextWrite.java:136)
	at reactor.core.publisher.FluxFlatMap$FlatMapInner.onSubscribe(FluxFlatMap.java:968)
	at reactor.core.publisher.FluxContextWrite$ContextWriteSubscriber.onSubscribe(FluxContextWrite.java:101)
	at reactor.core.publisher.FluxPeekFuseable$PeekFuseableConditionalSubscriber.onSubscribe(FluxPeekFuseable.java:471)
	at reactor.core.publisher.MonoJust.subscribe(MonoJust.java:55)
	at reactor.core.publisher.Mono.subscribe(Mono.java:4576)
	at reactor.core.publisher.FluxFlatMap$FlatMapMain.onNext(FluxFlatMap.java:430)
	at reactor.core.publisher.SinkManyUnicast.drainRegular(SinkManyUnicast.java:284)
	at reactor.core.publisher.SinkManyUnicast.drain(SinkManyUnicast.java:365)
	at reactor.core.publisher.SinkManyUnicast.tryEmitNext(SinkManyUnicast.java:239)
	at reactor.core.publisher.SinkManySerialized.tryEmitNext(SinkManySerialized.java:100)
	at io.modelcontextprotocol.client.transport.StdioClientTransport.lambda$startInboundProcessing$6(StdioClientTransport.java:261)
	at reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:68)
	at reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:28)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:842)
	Suppressed: java.lang.Exception: #block terminated with an error
		at reactor.core.publisher.BlockingSingleSubscriber.blockingGet(BlockingSingleSubscriber.java:104)
		at reactor.core.publisher.Mono.block(Mono.java:1779)
		at io.modelcontextprotocol.client.McpSyncClient.callTool(McpSyncClient.java:218)
		at org.springframework.ai.mcp.SyncMcpToolCallback.call(SyncMcpToolCallback.java:116)
		at org.springframework.ai.mcp.SyncMcpToolCallback.call(SyncMcpToolCallback.java:126)
		at org.springframework.ai.model.tool.DefaultToolCallingManager.lambda$executeToolCall$5(DefaultToolCallingManager.java:224)
		at io.micrometer.observation.Observation.observe(Observation.java:564)
		at org.springframework.ai.model.tool.DefaultToolCallingManager.executeToolCall(DefaultToolCallingManager.java:221)
		at org.springframework.ai.model.tool.DefaultToolCallingManager.executeToolCalls(DefaultToolCallingManager.java:137)
		at org.springframework.ai.openai.OpenAiChatModel.internalCall(OpenAiChatModel.java:244)
		at org.springframework.ai.openai.OpenAiChatModel.internalCall(OpenAiChatModel.java:254)
		at org.springframework.ai.openai.OpenAiChatModel.call(OpenAiChatModel.java:181)
		at org.springframework.ai.chat.client.advisor.ChatModelCallAdvisor.adviseCall(ChatModelCallAdvisor.java:54)
		at org.springframework.ai.chat.client.advisor.DefaultAroundAdvisorChain.lambda$nextCall$1(DefaultAroundAdvisorChain.java:110)
		at io.micrometer.observation.Observation.observe(Observation.java:564)
		at org.springframework.ai.chat.client.advisor.DefaultAroundAdvisorChain.nextCall(DefaultAroundAdvisorChain.java:110)
		at com.ywzai.domain.agent.service.armory.factory.element.RagAnswerAdvisor.adviseCall(RagAnswerAdvisor.java:81)
		at org.springframework.ai.chat.client.advisor.DefaultAroundAdvisorChain.lambda$nextCall$1(DefaultAroundAdvisorChain.java:110)
		at io.micrometer.observation.Observation.observe(Observation.java:564)
		at org.springframework.ai.chat.client.advisor.DefaultAroundAdvisorChain.nextCall(DefaultAroundAdvisorChain.java:110)
		at org.springframework.ai.chat.client.advisor.api.BaseAdvisor.adviseCall(BaseAdvisor.java:52)
		at org.springframework.ai.chat.client.advisor.DefaultAroundAdvisorChain.lambda$nextCall$1(DefaultAroundAdvisorChain.java:110)
		at io.micrometer.observation.Observation.observe(Observation.java:564)
		at org.springframework.ai.chat.client.advisor.DefaultAroundAdvisorChain.nextCall(DefaultAroundAdvisorChain.java:110)
		at org.springframework.ai.chat.client.DefaultChatClient$DefaultCallResponseSpec.lambda$doGetObservableChatClientResponse$1(DefaultChatClient.java:469)
		at io.micrometer.observation.Observation.observe(Observation.java:564)
		at org.springframework.ai.chat.client.DefaultChatClient$DefaultCallResponseSpec.doGetObservableChatClientResponse(DefaultChatClient.java:467)
		at org.springframework.ai.chat.client.DefaultChatClient$DefaultCallResponseSpec.doGetObservableChatClientResponse(DefaultChatClient.java:446)
		at org.springframework.ai.chat.client.DefaultChatClient$DefaultCallResponseSpec.content(DefaultChatClient.java:441)
		at com.ywzai.domain.agent.service.execute.auto.step.Step2PrecisionExecutorNode.doApply(Step2PrecisionExecutorNode.java:46)
		at com.ywzai.domain.agent.service.execute.auto.step.Step2PrecisionExecutorNode.doApply(Step2PrecisionExecutorNode.java:20)
		at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.apply(AbstractMultiThreadStrategyRouter.java:31)
		at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.router(AbstractMultiThreadStrategyRouter.java:22)
		at com.ywzai.domain.agent.service.execute.auto.step.Step1AnalyzerNode.doApply(Step1AnalyzerNode.java:60)
		at com.ywzai.domain.agent.service.execute.auto.step.Step1AnalyzerNode.doApply(Step1AnalyzerNode.java:21)
		at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.apply(AbstractMultiThreadStrategyRouter.java:31)
		at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.router(AbstractMultiThreadStrategyRouter.java:22)
		at com.ywzai.domain.agent.service.execute.auto.step.RootNode.doApply(RootNode.java:38)
		at com.ywzai.domain.agent.service.execute.auto.step.RootNode.doApply(RootNode.java:21)
		at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.apply(AbstractMultiThreadStrategyRouter.java:31)
		at com.ywzai.domain.agent.service.execute.auto.AutoAgentExecuteStrategy.execute(AutoAgentExecuteStrategy.java:56)
		at com.ywzai.trigger.http.AiAgentController.lambda$0(AiAgentController.java:61)
		... 3 common frames omitted
25-10-08.15:51:29.191 [parallel-16     ] WARN  StdioClientTransport   - Process terminated with code 1
25-10-08.15:55:03.040 [pool-2-thread-7 ] WARN  Step3QualitySupervisorNode - ⚠️ 无法识别的质量检查结果: ## 🚨 拼团系统监控数据质量监督报告 🚨

### 🔍 MCP验证记录
通过强制MCP工具调用，我获取了真实的监控数据：

1. **数据源验证**: ✅ Prometheus数据源 (UID: PBFA97CFB590B2093) 连接正常
2. **系统识别验证**: ✅ 成功识别 `group-buy-market-app` 系统 (job标签)
3. **指标可用性验证**: ✅ 发现HTTP请求指标 `http_server_requests_seconds_count/sum`
4. **接口发现验证**: ✅ 识别到3个主要接口端点

### 📊 当前状况分析

**系统运行状态**: ✅ 系统在线且正常运行 (up=1)

**接口TPS/QPS数据**:
- **`/actuator/prometheus`** (GET): 
  - QPS: ~0.067 请求/秒
  - 平均响应时间: 54-95ms (波动较大)
  
- **`/api/v1/gbm/index/query_group_buy_market_config`** (POST):
  - QPS: 0 (过去1小时内无请求)
  - 存在ClientAbortException异常请求 (18次)

- **`/api/v1/gbm/dcc/update_config`** (GET):
  - QPS: 0 (过去1小时内无请求)

**关键发现**:
1. **数据质量问题**: 原始执行结果完全错误！系统实际有HTTP监控指标，但之前的分析错误地查询了node_exporter指标
2. **接口活跃度**: 只有Prometheus监控端点有活跃请求，业务接口在过去1小时无请求
3. **异常情况**: 存在18次ClientAbortException异常，表明客户端连接中断

### 🎯 下一步策略

**立即执行的数据获取计划**:
1. **扩展时间范围**: 查询过去24小时的数据以获取更完整的业务接口使用情况
2. **错误率分析**: 专门查询错误状态码和异常情况的详细数据
3. **性能分位数**: 获取95%、99%分位数的响应时间数据
4. **业务指标关联**: 检查是否有其他业务相关的自定义指标

**优先级排序**:
- 高优先级: 验证业务接口的真实使用情况和性能数据
- 中优先级: 分析ClientAbortException异常的根本原因  
- 低优先级: 优化查询性能和数据展示格式

### 🔧 执行计划

**MCP工具调用序列**:
1. 查询过去24小时的业务接口请求量: `rate(http_server_requests_seconds_count{job="group-buy-market-app", uri=~"/api/.*"}[5m])`
2. 获取错误率数据: `rate(http_server_requests_seconds_count{job="group-buy-market-app", status=~"5.."}[5m])`
3. 计算响应时间分位数: 使用直方图分位数计算
4. 验证系统标签完整性: 确保所有相关标签维度都已发现

**风险评估**:
- 数据稀疏风险: 业务接口请求量可能很低，需要调整时间窗口
- 标签不完整风险: 可能存在其他未发现的接口端点
- 异常处理风险: ClientAbortException可能影响数据准确性

### 📈 质量评分

**监控数据质量综合评分**: 85分 🟡 良好

**各维度质量得分**:
- 系统名称识别质量: 100分 ✅
- TPS/QPS数据质量: 80分 🟡 (数据稀疏但准确)
- 响应时间数据质量: 85分 🟡 (部分接口无数据)
- 错误率数据质量: 75分 🟠 (需要进一步验证)
- MCP工具调用质量: 100分 ✅

**完成度评估**: 60%
**任务状态**: CONTINUE
**策略调整**: 从基础指标发现转向深度业务指标分析，重点关注实际业务接口的性能数据

### ⚠️ 重要提醒
原始执行结果存在严重质量问题，错误地假设系统使用node_exporter监控，而实际系统使用的是Spring Boot Actuator的HTTP指标。这凸显了强制MCP验证的必要性！
25-10-08.15:55:13.013 [pool-3-thread-1 ] ERROR McpClientSession       - Error handling request: JSONRPCError[code=-32603, message=parsing end time: syntax error: unexpected $end, expecting tNOW or tDIGIT at character 2 starting with "", data=null]
25-10-08.15:55:13.028 [pool-2-thread-7 ] ERROR AiAgentController      - AutoAgent执行异常：parsing end time: syntax error: unexpected $end, expecting tNOW or tDIGIT at character 2 starting with ""
io.modelcontextprotocol.spec.McpError: parsing end time: syntax error: unexpected $end, expecting tNOW or tDIGIT at character 2 starting with ""
	at io.modelcontextprotocol.spec.McpClientSession.lambda$sendRequest$11(McpClientSession.java:248)
	at reactor.core.publisher.FluxHandle$HandleSubscriber.onNext(FluxHandle.java:113)
	at reactor.core.publisher.SerializedSubscriber.onNext(SerializedSubscriber.java:99)
	at reactor.core.publisher.FluxTimeout$TimeoutMainSubscriber.onNext(FluxTimeout.java:181)
	at reactor.core.publisher.MonoCreate$DefaultMonoSink.success(MonoCreate.java:176)
	at io.modelcontextprotocol.spec.McpClientSession.handle(McpClientSession.java:136)
	at reactor.core.publisher.FluxPeekFuseable$PeekFuseableConditionalSubscriber.onNext(FluxPeekFuseable.java:489)
	at reactor.core.publisher.Operators$ScalarSubscription.request(Operators.java:2571)
	at reactor.core.publisher.FluxPeekFuseable$PeekFuseableConditionalSubscriber.request(FluxPeekFuseable.java:437)
	at reactor.core.publisher.FluxContextWrite$ContextWriteSubscriber.request(FluxContextWrite.java:136)
	at reactor.core.publisher.FluxFlatMap$FlatMapInner.onSubscribe(FluxFlatMap.java:968)
	at reactor.core.publisher.FluxContextWrite$ContextWriteSubscriber.onSubscribe(FluxContextWrite.java:101)
	at reactor.core.publisher.FluxPeekFuseable$PeekFuseableConditionalSubscriber.onSubscribe(FluxPeekFuseable.java:471)
	at reactor.core.publisher.MonoJust.subscribe(MonoJust.java:55)
	at reactor.core.publisher.Mono.subscribe(Mono.java:4576)
	at reactor.core.publisher.FluxFlatMap$FlatMapMain.onNext(FluxFlatMap.java:430)
	at reactor.core.publisher.SinkManyUnicast.drainRegular(SinkManyUnicast.java:284)
	at reactor.core.publisher.SinkManyUnicast.drain(SinkManyUnicast.java:365)
	at reactor.core.publisher.SinkManyUnicast.tryEmitNext(SinkManyUnicast.java:239)
	at reactor.core.publisher.SinkManySerialized.tryEmitNext(SinkManySerialized.java:100)
	at io.modelcontextprotocol.client.transport.StdioClientTransport.lambda$startInboundProcessing$6(StdioClientTransport.java:261)
	at reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:68)
	at reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:28)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:842)
	Suppressed: java.lang.Exception: #block terminated with an error
		at reactor.core.publisher.BlockingSingleSubscriber.blockingGet(BlockingSingleSubscriber.java:104)
		at reactor.core.publisher.Mono.block(Mono.java:1779)
		at io.modelcontextprotocol.client.McpSyncClient.callTool(McpSyncClient.java:218)
		at org.springframework.ai.mcp.SyncMcpToolCallback.call(SyncMcpToolCallback.java:116)
		at org.springframework.ai.mcp.SyncMcpToolCallback.call(SyncMcpToolCallback.java:126)
		at org.springframework.ai.model.tool.DefaultToolCallingManager.lambda$executeToolCall$5(DefaultToolCallingManager.java:224)
		at io.micrometer.observation.Observation.observe(Observation.java:564)
		at org.springframework.ai.model.tool.DefaultToolCallingManager.executeToolCall(DefaultToolCallingManager.java:221)
		at org.springframework.ai.model.tool.DefaultToolCallingManager.executeToolCalls(DefaultToolCallingManager.java:137)
		at org.springframework.ai.openai.OpenAiChatModel.internalCall(OpenAiChatModel.java:244)
		at org.springframework.ai.openai.OpenAiChatModel.internalCall(OpenAiChatModel.java:254)
		at org.springframework.ai.openai.OpenAiChatModel.call(OpenAiChatModel.java:181)
		at org.springframework.ai.chat.client.advisor.ChatModelCallAdvisor.adviseCall(ChatModelCallAdvisor.java:54)
		at org.springframework.ai.chat.client.advisor.DefaultAroundAdvisorChain.lambda$nextCall$1(DefaultAroundAdvisorChain.java:110)
		at io.micrometer.observation.Observation.observe(Observation.java:564)
		at org.springframework.ai.chat.client.advisor.DefaultAroundAdvisorChain.nextCall(DefaultAroundAdvisorChain.java:110)
		at com.ywzai.domain.agent.service.armory.factory.element.RagAnswerAdvisor.adviseCall(RagAnswerAdvisor.java:87)
		at org.springframework.ai.chat.client.advisor.DefaultAroundAdvisorChain.lambda$nextCall$1(DefaultAroundAdvisorChain.java:110)
		at io.micrometer.observation.Observation.observe(Observation.java:564)
		at org.springframework.ai.chat.client.advisor.DefaultAroundAdvisorChain.nextCall(DefaultAroundAdvisorChain.java:110)
		at org.springframework.ai.chat.client.advisor.api.BaseAdvisor.adviseCall(BaseAdvisor.java:52)
		at org.springframework.ai.chat.client.advisor.DefaultAroundAdvisorChain.lambda$nextCall$1(DefaultAroundAdvisorChain.java:110)
		at io.micrometer.observation.Observation.observe(Observation.java:564)
		at org.springframework.ai.chat.client.advisor.DefaultAroundAdvisorChain.nextCall(DefaultAroundAdvisorChain.java:110)
		at org.springframework.ai.chat.client.DefaultChatClient$DefaultCallResponseSpec.lambda$doGetObservableChatClientResponse$1(DefaultChatClient.java:469)
		at io.micrometer.observation.Observation.observe(Observation.java:564)
		at org.springframework.ai.chat.client.DefaultChatClient$DefaultCallResponseSpec.doGetObservableChatClientResponse(DefaultChatClient.java:467)
		at org.springframework.ai.chat.client.DefaultChatClient$DefaultCallResponseSpec.doGetObservableChatClientResponse(DefaultChatClient.java:446)
		at org.springframework.ai.chat.client.DefaultChatClient$DefaultCallResponseSpec.content(DefaultChatClient.java:441)
		at com.ywzai.domain.agent.service.execute.auto.step.Step1AnalyzerNode.doApply(Step1AnalyzerNode.java:47)
		at com.ywzai.domain.agent.service.execute.auto.step.Step1AnalyzerNode.doApply(Step1AnalyzerNode.java:21)
		at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.apply(AbstractMultiThreadStrategyRouter.java:31)
		at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.router(AbstractMultiThreadStrategyRouter.java:22)
		at com.ywzai.domain.agent.service.execute.auto.step.Step3QualitySupervisorNode.doApply(Step3QualitySupervisorNode.java:84)
		at com.ywzai.domain.agent.service.execute.auto.step.Step3QualitySupervisorNode.doApply(Step3QualitySupervisorNode.java:20)
		at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.apply(AbstractMultiThreadStrategyRouter.java:31)
		at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.router(AbstractMultiThreadStrategyRouter.java:22)
		at com.ywzai.domain.agent.service.execute.auto.step.Step2PrecisionExecutorNode.doApply(Step2PrecisionExecutorNode.java:57)
		at com.ywzai.domain.agent.service.execute.auto.step.Step2PrecisionExecutorNode.doApply(Step2PrecisionExecutorNode.java:20)
		at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.apply(AbstractMultiThreadStrategyRouter.java:31)
		at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.router(AbstractMultiThreadStrategyRouter.java:22)
		at com.ywzai.domain.agent.service.execute.auto.step.Step1AnalyzerNode.doApply(Step1AnalyzerNode.java:60)
		at com.ywzai.domain.agent.service.execute.auto.step.Step1AnalyzerNode.doApply(Step1AnalyzerNode.java:21)
		at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.apply(AbstractMultiThreadStrategyRouter.java:31)
		at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.router(AbstractMultiThreadStrategyRouter.java:22)
		at com.ywzai.domain.agent.service.execute.auto.step.RootNode.doApply(RootNode.java:38)
		at com.ywzai.domain.agent.service.execute.auto.step.RootNode.doApply(RootNode.java:21)
		at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.apply(AbstractMultiThreadStrategyRouter.java:31)
		at com.ywzai.domain.agent.service.execute.auto.AutoAgentExecuteStrategy.execute(AutoAgentExecuteStrategy.java:56)
		at com.ywzai.trigger.http.AiAgentController.lambda$0(AiAgentController.java:61)
		... 3 common frames omitted
25-10-08.16:10:04.653 [parallel-20     ] WARN  StdioClientTransport   - Process terminated with code 1
25-10-08.16:11:01.944 [pool-3-thread-1 ] ERROR McpClientSession       - Error handling request: JSONRPCError[code=-32603, message=parsing end time: syntax error: unexpected $end, expecting tNOW or tDIGIT at character 2 starting with "", data=null]
25-10-08.16:11:01.951 [pool-2-thread-7 ] ERROR AiAgentController      - AutoAgent执行异常：parsing end time: syntax error: unexpected $end, expecting tNOW or tDIGIT at character 2 starting with ""
io.modelcontextprotocol.spec.McpError: parsing end time: syntax error: unexpected $end, expecting tNOW or tDIGIT at character 2 starting with ""
	at io.modelcontextprotocol.spec.McpClientSession.lambda$sendRequest$11(McpClientSession.java:248)
	at reactor.core.publisher.FluxHandle$HandleSubscriber.onNext(FluxHandle.java:113)
	at reactor.core.publisher.SerializedSubscriber.onNext(SerializedSubscriber.java:99)
	at reactor.core.publisher.FluxTimeout$TimeoutMainSubscriber.onNext(FluxTimeout.java:181)
	at reactor.core.publisher.MonoCreate$DefaultMonoSink.success(MonoCreate.java:176)
	at io.modelcontextprotocol.spec.McpClientSession.handle(McpClientSession.java:136)
	at reactor.core.publisher.FluxPeekFuseable$PeekFuseableConditionalSubscriber.onNext(FluxPeekFuseable.java:489)
	at reactor.core.publisher.Operators$ScalarSubscription.request(Operators.java:2571)
	at reactor.core.publisher.FluxPeekFuseable$PeekFuseableConditionalSubscriber.request(FluxPeekFuseable.java:437)
	at reactor.core.publisher.FluxContextWrite$ContextWriteSubscriber.request(FluxContextWrite.java:136)
	at reactor.core.publisher.FluxFlatMap$FlatMapInner.onSubscribe(FluxFlatMap.java:968)
	at reactor.core.publisher.FluxContextWrite$ContextWriteSubscriber.onSubscribe(FluxContextWrite.java:101)
	at reactor.core.publisher.FluxPeekFuseable$PeekFuseableConditionalSubscriber.onSubscribe(FluxPeekFuseable.java:471)
	at reactor.core.publisher.MonoJust.subscribe(MonoJust.java:55)
	at reactor.core.publisher.Mono.subscribe(Mono.java:4576)
	at reactor.core.publisher.FluxFlatMap$FlatMapMain.onNext(FluxFlatMap.java:430)
	at reactor.core.publisher.SinkManyUnicast.drainRegular(SinkManyUnicast.java:284)
	at reactor.core.publisher.SinkManyUnicast.drain(SinkManyUnicast.java:365)
	at reactor.core.publisher.SinkManyUnicast.tryEmitNext(SinkManyUnicast.java:239)
	at reactor.core.publisher.SinkManySerialized.tryEmitNext(SinkManySerialized.java:100)
	at io.modelcontextprotocol.client.transport.StdioClientTransport.lambda$startInboundProcessing$6(StdioClientTransport.java:261)
	at reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:68)
	at reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:28)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:842)
	Suppressed: java.lang.Exception: #block terminated with an error
		at reactor.core.publisher.BlockingSingleSubscriber.blockingGet(BlockingSingleSubscriber.java:104)
		at reactor.core.publisher.Mono.block(Mono.java:1779)
		at io.modelcontextprotocol.client.McpSyncClient.callTool(McpSyncClient.java:218)
		at org.springframework.ai.mcp.SyncMcpToolCallback.call(SyncMcpToolCallback.java:116)
		at org.springframework.ai.mcp.SyncMcpToolCallback.call(SyncMcpToolCallback.java:126)
		at org.springframework.ai.model.tool.DefaultToolCallingManager.lambda$executeToolCall$5(DefaultToolCallingManager.java:224)
		at io.micrometer.observation.Observation.observe(Observation.java:564)
		at org.springframework.ai.model.tool.DefaultToolCallingManager.executeToolCall(DefaultToolCallingManager.java:221)
		at org.springframework.ai.model.tool.DefaultToolCallingManager.executeToolCalls(DefaultToolCallingManager.java:137)
		at org.springframework.ai.openai.OpenAiChatModel.internalCall(OpenAiChatModel.java:244)
		at org.springframework.ai.openai.OpenAiChatModel.internalCall(OpenAiChatModel.java:254)
		at org.springframework.ai.openai.OpenAiChatModel.call(OpenAiChatModel.java:181)
		at org.springframework.ai.chat.client.advisor.ChatModelCallAdvisor.adviseCall(ChatModelCallAdvisor.java:54)
		at org.springframework.ai.chat.client.advisor.DefaultAroundAdvisorChain.lambda$nextCall$1(DefaultAroundAdvisorChain.java:110)
		at io.micrometer.observation.Observation.observe(Observation.java:564)
		at org.springframework.ai.chat.client.advisor.DefaultAroundAdvisorChain.nextCall(DefaultAroundAdvisorChain.java:110)
		at com.ywzai.domain.agent.service.armory.factory.element.RagAnswerAdvisor.adviseCall(RagAnswerAdvisor.java:87)
		at org.springframework.ai.chat.client.advisor.DefaultAroundAdvisorChain.lambda$nextCall$1(DefaultAroundAdvisorChain.java:110)
		at io.micrometer.observation.Observation.observe(Observation.java:564)
		at org.springframework.ai.chat.client.advisor.DefaultAroundAdvisorChain.nextCall(DefaultAroundAdvisorChain.java:110)
		at org.springframework.ai.chat.client.advisor.api.BaseAdvisor.adviseCall(BaseAdvisor.java:52)
		at org.springframework.ai.chat.client.advisor.DefaultAroundAdvisorChain.lambda$nextCall$1(DefaultAroundAdvisorChain.java:110)
		at io.micrometer.observation.Observation.observe(Observation.java:564)
		at org.springframework.ai.chat.client.advisor.DefaultAroundAdvisorChain.nextCall(DefaultAroundAdvisorChain.java:110)
		at org.springframework.ai.chat.client.DefaultChatClient$DefaultCallResponseSpec.lambda$doGetObservableChatClientResponse$1(DefaultChatClient.java:469)
		at io.micrometer.observation.Observation.observe(Observation.java:564)
		at org.springframework.ai.chat.client.DefaultChatClient$DefaultCallResponseSpec.doGetObservableChatClientResponse(DefaultChatClient.java:467)
		at org.springframework.ai.chat.client.DefaultChatClient$DefaultCallResponseSpec.doGetObservableChatClientResponse(DefaultChatClient.java:446)
		at org.springframework.ai.chat.client.DefaultChatClient$DefaultCallResponseSpec.content(DefaultChatClient.java:441)
		at com.ywzai.domain.agent.service.execute.auto.step.Step2PrecisionExecutorNode.doApply(Step2PrecisionExecutorNode.java:46)
		at com.ywzai.domain.agent.service.execute.auto.step.Step2PrecisionExecutorNode.doApply(Step2PrecisionExecutorNode.java:20)
		at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.apply(AbstractMultiThreadStrategyRouter.java:31)
		at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.router(AbstractMultiThreadStrategyRouter.java:22)
		at com.ywzai.domain.agent.service.execute.auto.step.Step1AnalyzerNode.doApply(Step1AnalyzerNode.java:61)
		at com.ywzai.domain.agent.service.execute.auto.step.Step1AnalyzerNode.doApply(Step1AnalyzerNode.java:21)
		at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.apply(AbstractMultiThreadStrategyRouter.java:31)
		at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.router(AbstractMultiThreadStrategyRouter.java:22)
		at com.ywzai.domain.agent.service.execute.auto.step.RootNode.doApply(RootNode.java:38)
		at com.ywzai.domain.agent.service.execute.auto.step.RootNode.doApply(RootNode.java:21)
		at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.apply(AbstractMultiThreadStrategyRouter.java:31)
		at com.ywzai.domain.agent.service.execute.auto.AutoAgentExecuteStrategy.execute(AutoAgentExecuteStrategy.java:56)
		at com.ywzai.trigger.http.AiAgentController.lambda$0(AiAgentController.java:61)
		... 3 common frames omitted
25-10-08.16:11:47.056 [parallel-18     ] WARN  StdioClientTransport   - Process terminated with code 1
25-10-08.16:16:59.997 [pool-2-thread-7 ] WARN  Step3QualitySupervisorNode - ⚠️ 无法识别的质量检查结果: ## 🚨 MCP验证质量监督报告

### 🔍 数据完整性验证结果

**✅ 数据源连接验证**
- 数据源UID: PBFA97CFB590B2093 ✅
- 连接状态: 正常 ✅
- 数据源类型: Prometheus ✅

**✅ 系统识别验证**
- 系统名称: group-buy-market-app ✅
- 实例状态: 10.105.130.18:8091 ✅
- 服务可用性: up=1 (100%可用) ✅

**⚠️ 关键指标缺失问题**
- **严重问题**: `http_server_requests_seconds_bucket` 指标不存在 ❌
- **严重问题**: 缺少HTTP状态码标签(status) ❌
- **严重问题**: 无法计算95分位响应时间 ❌

### 📊 实际监控数据质量评估

**TPS/QPS数据质量: 65/100分**
- ✅ 基础请求计数指标存在
- ✅ 能够获取接口级别的QPS数据
- ❌ 无法区分成功/失败请求
- ❌ 缺少完整的HTTP状态码监控

**响应时间数据质量: 30/100分**
- ❌ 直方图指标完全缺失
- ❌ 无法计算分位数响应时间
- ❌ 只能获取平均响应时间（如果存在）

**错误率数据质量: 25/100分**
- ❌ 状态码标签缺失
- ❌ 无法计算错误率
- ❌ 无法区分不同类型的错误

### 🎯 关键发现与问题识别

**严重质量问题（需要立即修复）:**
1. **监控指标配置不完整**: 应用缺少Micrometer的HTTP直方图配置
2. **标签维度缺失**: HTTP请求缺少status标签，无法监控错误率
3. **响应时间监控缺失**: 无法获取分位数响应时间数据

**执行结果准确性问题:**
- 原始报告中提到的"响应时间: 最大1.34秒" **无法验证**，因为缺少直方图数据
- 原始报告中提到的"100% 200状态码" **无法验证**，因为缺少状态码标签
- 原始报告中的TPS/QPS数据 **部分准确**，但缺少错误请求统计

### 📈 真实系统运行状态（基于MCP验证）

**实际QPS数据:**
- 总QPS: ~0.067 请求/秒（远低于原始报告的1.13请求/秒）
- 主要接口: `/api/v1/gbm/index/query_group_buy_market_config` (POST) - ~1.07 QPS
- 健康检查: `/actuator/prometheus` (GET) - ~0.067 QPS

**系统状态:**
- 服务可用性: 100% ✅
- 但**无法评估**响应时间和错误率 ❌

### 🛠️ 质量改进建议

**立即修复建议:**
1. **应用端配置修复**: 在group-buy-market-app中启用HTTP请求的直方图监控
   ```yaml
   management:
     metrics:
       web:
         server:
           request:
             autotime:
               enabled: true
   ```
2. **标签配置修复**: 确保HTTP请求包含status标签
3. **重新部署应用**: 应用配置更改后重新部署

**监控优化建议:**
1. **完善指标采集**: 确保所有关键业务接口都有完整的性能监控
2. **添加业务指标**: 补充拼团业务相关的自定义指标
3. **设置告警规则**: 基于完整的指标数据设置合理的告警阈值

### 📋 质量评分总结

- **数据完整性**: 60/100分
- **数据准确性**: 55/100分  
- **系统覆盖度**: 85/100分
- **指标质量**: 40/100分
- **MCP工具调用质量**: 100/100分

**综合质量评分: 68/100分 (🔴 不合格)**

**评估结果: FAIL**

**下一步重点:**
1. 修复应用监控配置，确保HTTP直方图和状态码标签正确采集
2. 重新验证监控数据的完整性
3. 基于完整的监控数据重新生成准确的系统运行报告

**根本原因**: 原始分析报告基于不完整的监控数据，缺少关键的性能指标，导致结论严重偏离实际情况。必须先完善监控配置，再进行准确的性能分析。
25-10-08.16:19:13.572 [pool-2-thread-7 ] WARN  Step3QualitySupervisorNode - ⚠️ 无法识别的质量检查结果: ## 🚨 MCP验证质量监督报告

### 🔍 数据完整性验证结果

**✅ 数据源连接验证**
- 数据源UID: PBFA97CFB590B2093 ✅
- 连接状态: 正常 ✅
- 数据源类型: Prometheus ✅

**✅ 系统识别验证**
- 系统名称: group-buy-market-app ✅
- 实例状态: 10.105.130.18:8091 ✅
- 服务可用性: up=1 (100%可用) ✅

**⚠️ 关键指标缺失问题**
- **严重问题**: `http_server_requests_seconds_bucket` 指标不存在 ❌
- **严重问题**: 缺少HTTP状态码标签(status) ❌
- **严重问题**: 无法计算95分位响应时间 ❌

### 📊 实际监控数据质量评估

**TPS/QPS数据质量: 65/100分**
- ✅ 基础请求计数指标存在
- ✅ 能够获取接口级别的QPS数据
- ❌ 无法区分成功/失败请求
- ❌ 缺少完整的HTTP状态码监控

**响应时间数据质量: 30/100分**
- ❌ 直方图指标完全缺失
- ❌ 无法计算分位数响应时间
- ❌ 只能获取平均响应时间（如果存在）

**错误率数据质量: 25/100分**
- ❌ 状态码标签缺失
- ❌ 无法计算错误率
- ❌ 无法区分不同类型的错误

### 🎯 关键发现与问题识别

**严重质量问题（需要立即修复）:**
1. **监控指标配置不完整**: 应用缺少Micrometer的HTTP直方图配置
2. **标签维度缺失**: HTTP请求缺少status标签，无法监控错误率
3. **响应时间监控缺失**: 无法获取分位数响应时间数据

**执行结果准确性问题:**
- 原始报告中提到的"响应时间: 最大1.34秒" **无法验证**，因为缺少直方图数据
- 原始报告中提到的"100% 200状态码" **无法验证**，因为缺少状态码标签
- 原始报告中的TPS/QPS数据 **部分准确**，但缺少错误请求统计

### 📈 真实系统运行状态（基于MCP验证）

**实际QPS数据:**
- 总QPS: ~0.067 请求/秒（远低于原始报告的1.13请求/秒）
- 主要接口: `/api/v1/gbm/index/query_group_buy_market_config` (POST) - ~1.07 QPS
- 健康检查: `/actuator/prometheus` (GET) - ~0.067 QPS

**系统状态:**
- 服务可用性: 100% ✅
- 但**无法评估**响应时间和错误率 ❌

### 🛠️ 质量改进建议

**立即修复建议:**
1. **应用端配置修复**: 在group-buy-market-app中启用HTTP请求的直方图监控
   ```yaml
   management:
     metrics:
       web:
         server:
           request:
             autotime:
               enabled: true
   ```
2. **标签配置修复**: 确保HTTP请求包含status标签
3. **重新部署应用**: 应用配置更改后重新部署

**监控优化建议:**
1. **完善指标采集**: 确保所有关键业务接口都有完整的性能监控
2. **添加业务指标**: 补充拼团业务相关的自定义指标
3. **设置告警规则**: 基于完整的指标数据设置合理的告警阈值

### 📋 质量评分总结

- **数据完整性**: 60/100分
- **数据准确性**: 55/100分  
- **系统覆盖度**: 85/100分
- **指标质量**: 40/100分
- **MCP工具调用质量**: 100/100分

**综合质量评分: 68/100分 (🔴 不合格)**

**评估结果: FAIL**

**下一步重点:**
1. 修复应用监控配置，确保HTTP直方图和状态码标签正确采集
2. 重新验证监控数据的完整性
3. 基于完整的监控数据重新生成准确的系统运行报告

**根本原因**: 原始分析报告基于不完整的监控数据，缺少关键的性能指标，导致结论严重偏离实际情况。必须先完善监控配置，再进行准确的性能分析。
25-10-08.16:23:12.342 [parallel-16     ] WARN  StdioClientTransport   - Process terminated with code 1
25-10-08.16:27:07.915 [ForkJoinPool.commonPool-worker-1] WARN  StdioClientTransport   - Process terminated with code 1
25-10-08.16:28:59.254 [pool-3-thread-1 ] ERROR McpClientSession       - Error handling request: JSONRPCError[code=-32603, message=stepSeconds must be provided when queryType is 'range', data=null]
25-10-08.16:28:59.261 [pool-2-thread-7 ] ERROR AiAgentController      - AutoAgent执行异常：stepSeconds must be provided when queryType is 'range'
io.modelcontextprotocol.spec.McpError: stepSeconds must be provided when queryType is 'range'
	at io.modelcontextprotocol.spec.McpClientSession.lambda$sendRequest$11(McpClientSession.java:248)
	at reactor.core.publisher.FluxHandle$HandleSubscriber.onNext(FluxHandle.java:113)
	at reactor.core.publisher.SerializedSubscriber.onNext(SerializedSubscriber.java:99)
	at reactor.core.publisher.FluxTimeout$TimeoutMainSubscriber.onNext(FluxTimeout.java:181)
	at reactor.core.publisher.MonoCreate$DefaultMonoSink.success(MonoCreate.java:176)
	at io.modelcontextprotocol.spec.McpClientSession.handle(McpClientSession.java:136)
	at reactor.core.publisher.FluxPeekFuseable$PeekFuseableConditionalSubscriber.onNext(FluxPeekFuseable.java:489)
	at reactor.core.publisher.Operators$ScalarSubscription.request(Operators.java:2571)
	at reactor.core.publisher.FluxPeekFuseable$PeekFuseableConditionalSubscriber.request(FluxPeekFuseable.java:437)
	at reactor.core.publisher.FluxContextWrite$ContextWriteSubscriber.request(FluxContextWrite.java:136)
	at reactor.core.publisher.FluxFlatMap$FlatMapInner.onSubscribe(FluxFlatMap.java:968)
	at reactor.core.publisher.FluxContextWrite$ContextWriteSubscriber.onSubscribe(FluxContextWrite.java:101)
	at reactor.core.publisher.FluxPeekFuseable$PeekFuseableConditionalSubscriber.onSubscribe(FluxPeekFuseable.java:471)
	at reactor.core.publisher.MonoJust.subscribe(MonoJust.java:55)
	at reactor.core.publisher.Mono.subscribe(Mono.java:4576)
	at reactor.core.publisher.FluxFlatMap$FlatMapMain.onNext(FluxFlatMap.java:430)
	at reactor.core.publisher.SinkManyUnicast.drainRegular(SinkManyUnicast.java:284)
	at reactor.core.publisher.SinkManyUnicast.drain(SinkManyUnicast.java:365)
	at reactor.core.publisher.SinkManyUnicast.tryEmitNext(SinkManyUnicast.java:239)
	at reactor.core.publisher.SinkManySerialized.tryEmitNext(SinkManySerialized.java:100)
	at io.modelcontextprotocol.client.transport.StdioClientTransport.lambda$startInboundProcessing$6(StdioClientTransport.java:261)
	at reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:68)
	at reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:28)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:842)
	Suppressed: java.lang.Exception: #block terminated with an error
		at reactor.core.publisher.BlockingSingleSubscriber.blockingGet(BlockingSingleSubscriber.java:104)
		at reactor.core.publisher.Mono.block(Mono.java:1779)
		at io.modelcontextprotocol.client.McpSyncClient.callTool(McpSyncClient.java:218)
		at org.springframework.ai.mcp.SyncMcpToolCallback.call(SyncMcpToolCallback.java:116)
		at org.springframework.ai.mcp.SyncMcpToolCallback.call(SyncMcpToolCallback.java:126)
		at org.springframework.ai.model.tool.DefaultToolCallingManager.lambda$executeToolCall$5(DefaultToolCallingManager.java:224)
		at io.micrometer.observation.Observation.observe(Observation.java:564)
		at org.springframework.ai.model.tool.DefaultToolCallingManager.executeToolCall(DefaultToolCallingManager.java:221)
		at org.springframework.ai.model.tool.DefaultToolCallingManager.executeToolCalls(DefaultToolCallingManager.java:137)
		at org.springframework.ai.openai.OpenAiChatModel.internalCall(OpenAiChatModel.java:244)
		at org.springframework.ai.openai.OpenAiChatModel.internalCall(OpenAiChatModel.java:254)
		at org.springframework.ai.openai.OpenAiChatModel.internalCall(OpenAiChatModel.java:254)
		at org.springframework.ai.openai.OpenAiChatModel.internalCall(OpenAiChatModel.java:254)
		at org.springframework.ai.openai.OpenAiChatModel.internalCall(OpenAiChatModel.java:254)
		at org.springframework.ai.openai.OpenAiChatModel.internalCall(OpenAiChatModel.java:254)
		at org.springframework.ai.openai.OpenAiChatModel.call(OpenAiChatModel.java:181)
		at org.springframework.ai.chat.client.advisor.ChatModelCallAdvisor.adviseCall(ChatModelCallAdvisor.java:54)
		at org.springframework.ai.chat.client.advisor.DefaultAroundAdvisorChain.lambda$nextCall$1(DefaultAroundAdvisorChain.java:110)
		at io.micrometer.observation.Observation.observe(Observation.java:564)
		at org.springframework.ai.chat.client.advisor.DefaultAroundAdvisorChain.nextCall(DefaultAroundAdvisorChain.java:110)
		at org.springframework.ai.chat.client.advisor.api.BaseAdvisor.adviseCall(BaseAdvisor.java:52)
		at org.springframework.ai.chat.client.advisor.DefaultAroundAdvisorChain.lambda$nextCall$1(DefaultAroundAdvisorChain.java:110)
		at io.micrometer.observation.Observation.observe(Observation.java:564)
		at org.springframework.ai.chat.client.advisor.DefaultAroundAdvisorChain.nextCall(DefaultAroundAdvisorChain.java:110)
		at org.springframework.ai.chat.client.DefaultChatClient$DefaultCallResponseSpec.lambda$doGetObservableChatClientResponse$1(DefaultChatClient.java:469)
		at io.micrometer.observation.Observation.observe(Observation.java:564)
		at org.springframework.ai.chat.client.DefaultChatClient$DefaultCallResponseSpec.doGetObservableChatClientResponse(DefaultChatClient.java:467)
		at org.springframework.ai.chat.client.DefaultChatClient$DefaultCallResponseSpec.doGetObservableChatClientResponse(DefaultChatClient.java:446)
		at org.springframework.ai.chat.client.DefaultChatClient$DefaultCallResponseSpec.content(DefaultChatClient.java:441)
		at com.ywzai.domain.agent.service.execute.auto.step.Step3QualitySupervisorNode.doApply(Step3QualitySupervisorNode.java:44)
		at com.ywzai.domain.agent.service.execute.auto.step.Step3QualitySupervisorNode.doApply(Step3QualitySupervisorNode.java:20)
		at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.apply(AbstractMultiThreadStrategyRouter.java:31)
		at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.router(AbstractMultiThreadStrategyRouter.java:22)
		at com.ywzai.domain.agent.service.execute.auto.step.Step2PrecisionExecutorNode.doApply(Step2PrecisionExecutorNode.java:58)
		at com.ywzai.domain.agent.service.execute.auto.step.Step2PrecisionExecutorNode.doApply(Step2PrecisionExecutorNode.java:20)
		at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.apply(AbstractMultiThreadStrategyRouter.java:31)
		at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.router(AbstractMultiThreadStrategyRouter.java:22)
		at com.ywzai.domain.agent.service.execute.auto.step.Step1AnalyzerNode.doApply(Step1AnalyzerNode.java:61)
		at com.ywzai.domain.agent.service.execute.auto.step.Step1AnalyzerNode.doApply(Step1AnalyzerNode.java:21)
		at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.apply(AbstractMultiThreadStrategyRouter.java:31)
		at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.router(AbstractMultiThreadStrategyRouter.java:22)
		at com.ywzai.domain.agent.service.execute.auto.step.RootNode.doApply(RootNode.java:38)
		at com.ywzai.domain.agent.service.execute.auto.step.RootNode.doApply(RootNode.java:21)
		at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.apply(AbstractMultiThreadStrategyRouter.java:31)
		at com.ywzai.domain.agent.service.execute.auto.AutoAgentExecuteStrategy.execute(AutoAgentExecuteStrategy.java:56)
		at com.ywzai.trigger.http.AiAgentController.lambda$0(AiAgentController.java:61)
		... 3 common frames omitted
25-10-08.16:30:14.256 [parallel-16     ] WARN  StdioClientTransport   - Process terminated with code 1
25-10-08.16:33:31.730 [pool-2-thread-7 ] WARN  RetryUtils             - Retry error. Retry count:1
org.springframework.ai.retry.NonTransientAiException: 400 - {"error":{"code":"InvalidParameter","param":null,"message":"Range of input length should be [1, 8192]","type":"InvalidParameter"},"id":"7b881538-ec8b-4ace-b892-6a44026eef61","request_id":"7b881538-ec8b-4ace-b892-6a44026eef61"}
	at org.springframework.ai.retry.RetryUtils$1.handleError(RetryUtils.java:63)
	at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:58)
	at org.springframework.web.client.StatusHandler.lambda$fromErrorHandler$1(StatusHandler.java:71)
	at org.springframework.web.client.StatusHandler.handle(StatusHandler.java:146)
	at org.springframework.web.client.DefaultRestClient$DefaultResponseSpec.applyStatusHandlers(DefaultRestClient.java:826)
	at org.springframework.web.client.DefaultRestClient$DefaultResponseSpec.lambda$readBody$4(DefaultRestClient.java:815)
	at org.springframework.web.client.DefaultRestClient.readWithMessageConverters(DefaultRestClient.java:215)
	at org.springframework.web.client.DefaultRestClient$DefaultResponseSpec.readBody(DefaultRestClient.java:814)
	at org.springframework.web.client.DefaultRestClient$DefaultResponseSpec.lambda$toEntityInternal$2(DefaultRestClient.java:770)
	at org.springframework.web.client.DefaultRestClient$DefaultRequestBodyUriSpec.exchangeInternal(DefaultRestClient.java:574)
	at org.springframework.web.client.DefaultRestClient$DefaultRequestBodyUriSpec.exchange(DefaultRestClient.java:535)
	at org.springframework.web.client.RestClient$RequestHeadersSpec.exchange(RestClient.java:677)
	at org.springframework.web.client.DefaultRestClient$DefaultResponseSpec.executeAndExtract(DefaultRestClient.java:809)
	at org.springframework.web.client.DefaultRestClient$DefaultResponseSpec.toEntityInternal(DefaultRestClient.java:769)
	at org.springframework.web.client.DefaultRestClient$DefaultResponseSpec.toEntity(DefaultRestClient.java:765)
	at org.springframework.ai.openai.api.OpenAiApi.embeddings(OpenAiApi.java:294)
	at org.springframework.ai.openai.OpenAiEmbeddingModel.lambda$call$1(OpenAiEmbeddingModel.java:168)
	at org.springframework.retry.support.RetryTemplate.doExecute(RetryTemplate.java:357)
	at org.springframework.retry.support.RetryTemplate.execute(RetryTemplate.java:230)
	at org.springframework.ai.openai.OpenAiEmbeddingModel.lambda$call$3(OpenAiEmbeddingModel.java:168)
	at io.micrometer.observation.Observation.observe(Observation.java:564)
	at org.springframework.ai.openai.OpenAiEmbeddingModel.call(OpenAiEmbeddingModel.java:166)
	at org.springframework.ai.embedding.EmbeddingModel.embed(EmbeddingModel.java:67)
	at org.springframework.ai.embedding.EmbeddingModel.embed(EmbeddingModel.java:49)
	at org.springframework.ai.vectorstore.pgvector.PgVectorStore.getQueryEmbedding(PgVectorStore.java:392)
	at org.springframework.ai.vectorstore.pgvector.PgVectorStore.doSimilaritySearch(PgVectorStore.java:370)
	at org.springframework.ai.vectorstore.observation.AbstractObservationVectorStore.lambda$similaritySearch$7(AbstractObservationVectorStore.java:126)
	at io.micrometer.observation.Observation.observe(Observation.java:564)
	at org.springframework.ai.vectorstore.observation.AbstractObservationVectorStore.similaritySearch(AbstractObservationVectorStore.java:125)
	at com.ywzai.domain.agent.service.armory.factory.element.RagAnswerAdvisor.before(RagAnswerAdvisor.java:52)
	at com.ywzai.domain.agent.service.armory.factory.element.RagAnswerAdvisor.adviseCall(RagAnswerAdvisor.java:90)
	at org.springframework.ai.chat.client.advisor.DefaultAroundAdvisorChain.lambda$nextCall$1(DefaultAroundAdvisorChain.java:110)
	at io.micrometer.observation.Observation.observe(Observation.java:564)
	at org.springframework.ai.chat.client.advisor.DefaultAroundAdvisorChain.nextCall(DefaultAroundAdvisorChain.java:110)
	at org.springframework.ai.chat.client.advisor.api.BaseAdvisor.adviseCall(BaseAdvisor.java:52)
	at org.springframework.ai.chat.client.advisor.DefaultAroundAdvisorChain.lambda$nextCall$1(DefaultAroundAdvisorChain.java:110)
	at io.micrometer.observation.Observation.observe(Observation.java:564)
	at org.springframework.ai.chat.client.advisor.DefaultAroundAdvisorChain.nextCall(DefaultAroundAdvisorChain.java:110)
	at org.springframework.ai.chat.client.DefaultChatClient$DefaultCallResponseSpec.lambda$doGetObservableChatClientResponse$1(DefaultChatClient.java:469)
	at io.micrometer.observation.Observation.observe(Observation.java:564)
	at org.springframework.ai.chat.client.DefaultChatClient$DefaultCallResponseSpec.doGetObservableChatClientResponse(DefaultChatClient.java:467)
	at org.springframework.ai.chat.client.DefaultChatClient$DefaultCallResponseSpec.doGetObservableChatClientResponse(DefaultChatClient.java:446)
	at org.springframework.ai.chat.client.DefaultChatClient$DefaultCallResponseSpec.content(DefaultChatClient.java:441)
	at com.ywzai.domain.agent.service.execute.auto.step.Step2PrecisionExecutorNode.doApply(Step2PrecisionExecutorNode.java:46)
	at com.ywzai.domain.agent.service.execute.auto.step.Step2PrecisionExecutorNode.doApply(Step2PrecisionExecutorNode.java:20)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.apply(AbstractMultiThreadStrategyRouter.java:31)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.router(AbstractMultiThreadStrategyRouter.java:22)
	at com.ywzai.domain.agent.service.execute.auto.step.Step1AnalyzerNode.doApply(Step1AnalyzerNode.java:61)
	at com.ywzai.domain.agent.service.execute.auto.step.Step1AnalyzerNode.doApply(Step1AnalyzerNode.java:21)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.apply(AbstractMultiThreadStrategyRouter.java:31)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.router(AbstractMultiThreadStrategyRouter.java:22)
	at com.ywzai.domain.agent.service.execute.auto.step.RootNode.doApply(RootNode.java:38)
	at com.ywzai.domain.agent.service.execute.auto.step.RootNode.doApply(RootNode.java:21)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.apply(AbstractMultiThreadStrategyRouter.java:31)
	at com.ywzai.domain.agent.service.execute.auto.AutoAgentExecuteStrategy.execute(AutoAgentExecuteStrategy.java:56)
	at com.ywzai.trigger.http.AiAgentController.lambda$0(AiAgentController.java:61)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:842)
25-10-08.16:33:31.733 [pool-2-thread-7 ] ERROR AiAgentController      - AutoAgent执行异常：400 - {"error":{"code":"InvalidParameter","param":null,"message":"Range of input length should be [1, 8192]","type":"InvalidParameter"},"id":"7b881538-ec8b-4ace-b892-6a44026eef61","request_id":"7b881538-ec8b-4ace-b892-6a44026eef61"}
org.springframework.ai.retry.NonTransientAiException: 400 - {"error":{"code":"InvalidParameter","param":null,"message":"Range of input length should be [1, 8192]","type":"InvalidParameter"},"id":"7b881538-ec8b-4ace-b892-6a44026eef61","request_id":"7b881538-ec8b-4ace-b892-6a44026eef61"}
	at org.springframework.ai.retry.RetryUtils$1.handleError(RetryUtils.java:63)
	at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:58)
	at org.springframework.web.client.StatusHandler.lambda$fromErrorHandler$1(StatusHandler.java:71)
	at org.springframework.web.client.StatusHandler.handle(StatusHandler.java:146)
	at org.springframework.web.client.DefaultRestClient$DefaultResponseSpec.applyStatusHandlers(DefaultRestClient.java:826)
	at org.springframework.web.client.DefaultRestClient$DefaultResponseSpec.lambda$readBody$4(DefaultRestClient.java:815)
	at org.springframework.web.client.DefaultRestClient.readWithMessageConverters(DefaultRestClient.java:215)
	at org.springframework.web.client.DefaultRestClient$DefaultResponseSpec.readBody(DefaultRestClient.java:814)
	at org.springframework.web.client.DefaultRestClient$DefaultResponseSpec.lambda$toEntityInternal$2(DefaultRestClient.java:770)
	at org.springframework.web.client.DefaultRestClient$DefaultRequestBodyUriSpec.exchangeInternal(DefaultRestClient.java:574)
	at org.springframework.web.client.DefaultRestClient$DefaultRequestBodyUriSpec.exchange(DefaultRestClient.java:535)
	at org.springframework.web.client.RestClient$RequestHeadersSpec.exchange(RestClient.java:677)
	at org.springframework.web.client.DefaultRestClient$DefaultResponseSpec.executeAndExtract(DefaultRestClient.java:809)
	at org.springframework.web.client.DefaultRestClient$DefaultResponseSpec.toEntityInternal(DefaultRestClient.java:769)
	at org.springframework.web.client.DefaultRestClient$DefaultResponseSpec.toEntity(DefaultRestClient.java:765)
	at org.springframework.ai.openai.api.OpenAiApi.embeddings(OpenAiApi.java:294)
	at org.springframework.ai.openai.OpenAiEmbeddingModel.lambda$call$1(OpenAiEmbeddingModel.java:168)
	at org.springframework.retry.support.RetryTemplate.doExecute(RetryTemplate.java:357)
	at org.springframework.retry.support.RetryTemplate.execute(RetryTemplate.java:230)
	at org.springframework.ai.openai.OpenAiEmbeddingModel.lambda$call$3(OpenAiEmbeddingModel.java:168)
	at io.micrometer.observation.Observation.observe(Observation.java:564)
	at org.springframework.ai.openai.OpenAiEmbeddingModel.call(OpenAiEmbeddingModel.java:166)
	at org.springframework.ai.embedding.EmbeddingModel.embed(EmbeddingModel.java:67)
	at org.springframework.ai.embedding.EmbeddingModel.embed(EmbeddingModel.java:49)
	at org.springframework.ai.vectorstore.pgvector.PgVectorStore.getQueryEmbedding(PgVectorStore.java:392)
	at org.springframework.ai.vectorstore.pgvector.PgVectorStore.doSimilaritySearch(PgVectorStore.java:370)
	at org.springframework.ai.vectorstore.observation.AbstractObservationVectorStore.lambda$similaritySearch$7(AbstractObservationVectorStore.java:126)
	at io.micrometer.observation.Observation.observe(Observation.java:564)
	at org.springframework.ai.vectorstore.observation.AbstractObservationVectorStore.similaritySearch(AbstractObservationVectorStore.java:125)
	at com.ywzai.domain.agent.service.armory.factory.element.RagAnswerAdvisor.before(RagAnswerAdvisor.java:52)
	at com.ywzai.domain.agent.service.armory.factory.element.RagAnswerAdvisor.adviseCall(RagAnswerAdvisor.java:90)
	at org.springframework.ai.chat.client.advisor.DefaultAroundAdvisorChain.lambda$nextCall$1(DefaultAroundAdvisorChain.java:110)
	at io.micrometer.observation.Observation.observe(Observation.java:564)
	at org.springframework.ai.chat.client.advisor.DefaultAroundAdvisorChain.nextCall(DefaultAroundAdvisorChain.java:110)
	at org.springframework.ai.chat.client.advisor.api.BaseAdvisor.adviseCall(BaseAdvisor.java:52)
	at org.springframework.ai.chat.client.advisor.DefaultAroundAdvisorChain.lambda$nextCall$1(DefaultAroundAdvisorChain.java:110)
	at io.micrometer.observation.Observation.observe(Observation.java:564)
	at org.springframework.ai.chat.client.advisor.DefaultAroundAdvisorChain.nextCall(DefaultAroundAdvisorChain.java:110)
	at org.springframework.ai.chat.client.DefaultChatClient$DefaultCallResponseSpec.lambda$doGetObservableChatClientResponse$1(DefaultChatClient.java:469)
	at io.micrometer.observation.Observation.observe(Observation.java:564)
	at org.springframework.ai.chat.client.DefaultChatClient$DefaultCallResponseSpec.doGetObservableChatClientResponse(DefaultChatClient.java:467)
	at org.springframework.ai.chat.client.DefaultChatClient$DefaultCallResponseSpec.doGetObservableChatClientResponse(DefaultChatClient.java:446)
	at org.springframework.ai.chat.client.DefaultChatClient$DefaultCallResponseSpec.content(DefaultChatClient.java:441)
	at com.ywzai.domain.agent.service.execute.auto.step.Step2PrecisionExecutorNode.doApply(Step2PrecisionExecutorNode.java:46)
	at com.ywzai.domain.agent.service.execute.auto.step.Step2PrecisionExecutorNode.doApply(Step2PrecisionExecutorNode.java:20)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.apply(AbstractMultiThreadStrategyRouter.java:31)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.router(AbstractMultiThreadStrategyRouter.java:22)
	at com.ywzai.domain.agent.service.execute.auto.step.Step1AnalyzerNode.doApply(Step1AnalyzerNode.java:61)
	at com.ywzai.domain.agent.service.execute.auto.step.Step1AnalyzerNode.doApply(Step1AnalyzerNode.java:21)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.apply(AbstractMultiThreadStrategyRouter.java:31)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.router(AbstractMultiThreadStrategyRouter.java:22)
	at com.ywzai.domain.agent.service.execute.auto.step.RootNode.doApply(RootNode.java:38)
	at com.ywzai.domain.agent.service.execute.auto.step.RootNode.doApply(RootNode.java:21)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.apply(AbstractMultiThreadStrategyRouter.java:31)
	at com.ywzai.domain.agent.service.execute.auto.AutoAgentExecuteStrategy.execute(AutoAgentExecuteStrategy.java:56)
	at com.ywzai.trigger.http.AiAgentController.lambda$0(AiAgentController.java:61)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:842)
